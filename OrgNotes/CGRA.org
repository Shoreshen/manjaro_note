#+LATEX_HEADER:

#+TITLE: CGRA

currnet mark: 5

* 定义

** DFG <<MK1>>

[[~/OneDrive/离散数学/Disc_Math.org::MK221][有向图]] $G=\left<V_d,E_d\right>$ 其中：

（1） $V_d$ 为[[~/OneDrive/离散数学/Disc_Math.org::MK209][节点]]的集合，表示每一个运算符操作

（2） $E_d$ 为[[~/OneDrive/离散数学/Disc_Math.org::MK211][边]]的集合，表示操作之间的依赖关系

** DFGE<<MK3>>

[[MK1][DFG]]的扩展 $G=\left<V_d,E_d,R_d\right>$ 其中 $V_d,E_d$ 定义与[[MK1][DFG]]一致

$r=\left<v_i,v_j,t_i,t_j\right>\in R$ 表示在 $t_i$ 时 $v_i$ 的结果需要写入某寄存器 $r$ ， $t_j$ 时 $v_j$ 需要读取 $r$ 存入的结果

** Initial Interval （II） 

从一个迭代开始，到下一个连续迭代开始所占用的时钟周期

** TEC <<MK2>>

[[~/OneDrive/离散数学/Disc_Math.org::MK221][有向图]] $T=\left<V_T,E_T,R_c,M_c\right>$ 其中：

（1） $V_T=\left\{PE^t_i\big|\{m,n\}\subset\mathbb{N}\land 1\leq t\leq m\land 1\leq i\leq n\right\}$ 其中 $m$ 为时钟周期数， $n$ 为 $PE$ 节点个数

（2） $e=\left<PE^t_i,PE^{t+1}_j\right>\in E_T\subset \bigcup_{t=1}^{m-1}\left\{PE^k_j\big|PE^k_j\in V_T\land k=t\right\}\times\left\{PE^k_j\big|PE^k_j\in V_T\land k=t+1\right\}$

     表示在时间 $t$ 到 $t+1$ ， $PE_i$ 单元可以输出到 $PE_j$ 单元

（3） $R_c,M_c$ 表示固定的寄存器资源和内存资源
 
** 有效映射<<MK5>>

若 $f:V_d\to V_T$ 为[[MK3][DFGE]]的节点到[[MK2][TEC]]的节点的[[~/OneDrive/离散数学/Disc_Math.org::MK200][双射函数]]，且满足:

（1） 对于任意 $\left<v_i,v_j\right>\in E_d$ 设 $f(v_j)=PE^t_i$ 则存在 $1\leq k\leq n$ 满足 $f(v_i)=PE^{t_p}_k$ 其中 $t_p=\begin{cases}m&t=1\\t-1&t> 1\end{cases}$

（2） 对于任意 $\left<v_i,v_j,t_i,t_j\right>\in R$ 在 $t_i$ 到 $t_j$ 之间存在可用寄存器 $r\in R$

     若 $r$ 是本地寄存器，设 $f(v_i)=PE^{t_i}_u,f(v_j)=PE^{t_j}_v$ 则有 $u=v$

对于给定[[MK3][DFGE]]和[[MK2][TEC]] $G,T$ ，定义所有有效映射的集合为 $F(G,T)$

** 相容图<<MK4>>

对于给定[[MK3][DFGE]] $G=\left<V_d,E_d,R_d\right>$ 和[[MK2][TEC]] $T=\left<V_T,E_T,R_c,M_c\right>$ ，定义[[~/OneDrive/离散数学/Disc_Math.org::MK224][无向图]] $CG(G,T)=\left<V,E\right>$ 其中：

（1） $V\subset V_T\times V_d$ 表示可能的 $V_d$ 到 $V_T$ 的映射关系

（2） $E=\left\{\left<\left<PE^{t_a}_{i_a},v_{j_a}\right>,\left<PE^{t_b}_{i_b},v_{j_b}\right>\right>\big|(\exists f\in F(G,T)\to (f(v_{j_a})=PE^{t_a}_{i_a}\land f(v_{j_b})=PE^{t_b}_{i_b})) \right\}$

     即 $E=\left\{\left<a,b\right>\big|(\exists f\in F(G,T)\to \{a,b\}\subset f^{-1}) \right\}$ 其中 $\{a,b\}\subset V$ ，$F(G,T)$ 是[[MK5][有效映射]]的集合

** 最大团

即最大[[~/OneDrive/离散数学/Disc_Math.org::MK226][完全]]的[[~/OneDrive/离散数学/Disc_Math.org::MK229][子图]]，


