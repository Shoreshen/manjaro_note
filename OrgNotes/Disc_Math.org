#+LATEX_HEADER:

#+TITLE: 离散数学概论

currnet mark: 485

free mark:
 
图论: P40

* 集合论

** 集合论语言<<MK468>>

*** 符号

集合论语言为[[MK466][一阶语言]]包含如下[[MK116][符号]]

（1） [[MK130][变元符号]]： $X$ 表示变元符号集合

（2） 谓词符号： $\{p_\in\}$ 其中根据[[MK445][符号假定]]有 $\pi_P(p_\in)=2$ 即“属于”符号

（3） 逻辑符号： $\{\lnot,\to,\land,\lor,\leftrightarrow\}$ 即“否定”，“蕴含”，“合取”，“析取”以及“双向蕴含”

（4） 量词符号： $\{\forall,\exists\}$ 即“全称量词”以及“存在量词”

（5） 等式符号： $\{=\}$ 满足[[MK176][等价关系]]，由[[MK5][外延公理]]确定

基于以上符号，根据[[MK135][表达式]]可生成集合论表达式

*** 其他定义

为书写方便，我们做如下约定：

（1） $p_\in(A,B)$ 记作 $A\in B$ ， $\lnot(p_\in(A,B))$ 记作 $A\not\in B$

（2） $\forall x(x\in A\rightarrow x\in B)$ 即“[[MK20][包含]]”，记作 $A\subset B$ ， $\lnot(\forall x(x\in A\rightarrow x\in B))$ 记作 $A\not\subset B$

（3） 定义 $\bigcup A=\left\{x\big|\exists u((u\in A)\land (x\in u))\right\}$ ，当 $A=\{B,C\}$ 时可写成 $B\cup C$

（4） 定义 $\bigcap A=\left\{x\big|\forall u((u\in A)\land (x\in u))\right\}$ ，当 $A=\{B,C\}$ 时可写成 $B\cap C$ 

*** 逻辑公理

**** 运算律

** 集合论公理

*** 第一存在性<<MK469>>

$\exists x(x=x)$ 即存在一个集合

*** 外延公理<<MK5>>

形式语言： $\forall A(\forall B((A=B)\leftrightarrow(\forall x(x\in A\leftrightarrow x\in B))))$

即当且仅当 $A,B$ 中具有相同的[[MK2][元素]]，集合 $A,B$ 相等，显然满足[[MK176][等价关系]]

该公理说明了：

（1） 集合元素的 *无序性*

（2） 集合表示的 *不唯一性*

*** 幂集公理<<MK467>>

形式语言： $\forall A\exists B\forall z\big(z\in B\leftrightarrow z\subset A\big)$

即对于任意结合 $A$ 其[[MK25][幂集]] $B$ 存在且亦为集合

*** 分离公理模式<<MK9>>

形式语言： $\forall p_1(...(\forall p_n(\forall U(\exists S(\forall x((x\in S)\leftrightarrow((x\in U)\land \phi(p_1,...,p_n,x)))))))...)$

其中 $n\in\mathbb{N}$ 是自然数， $\phi(p_1,...,p_n,x)$ 是[[MK441][自由变元]]为 $p_1,...,p_n,x$ 且不包含 $U,S$ 的[[MK135][表达式]]

即对于任一集合 $U$ 存在 $S$ 使得 $x\in S$ 的充要条件是 $x\in U\land \phi(p_1,...,p_n,x)$ 

即对于任意一组给定的 $p_1,...,p_n$ 以及给定的 $U$ 均存在 $S=\left\{x\big|((x\in U)\land\phi(p_1,...,p_n,x))\right\}$

**** 唯一性

设 $x$ 为一个集合 $\phi(a_1,...,a_n,z)$ 是[[MK441][自由变元]]为 $a_1,...,a_n,z$ 且不包含 $x$ 的[[MK135][表达式]]

则当 $a_1,...,a_n$ [[MK447][赋值]]确定时，存在唯一的 $y$ 满足 $\forall z((z\in y)\leftrightarrow((z\in x)\land(\phi(a_1,...,a_n,z))))$

***** 证明

假设存在 $y_1,y_2$ 同时满足，则对于任意 $z$

有 $(z\in y_1)\leftrightarrow((z\in x)\land(\phi(a_1,...,a_n,z)))\leftrightarrow(z\in y_2)$

则根据[[MK5][外延公理]]可得 $y_1=y_2$

**** 推论

$\lnot(\exists x(\forall y(y\in x)))$ 即不存在包含一切集合的集合

***** 证明

假设 $\exists x(\forall y(y\in x))$ 成立，则存在 $x$ 包含所有集合

定义 $y=\left\{z\in x\big|z\not\in z\right\}$ 根据[[MK9][分离模式]]可得 $y$ 是一个集合，则有 $y\in x$

此时若 $y\in y$ 则根据 $y$ 的定义有 $y\not\in y$ ，若 $y\not\in y$ 则根据 $y$ 的定义有 $y\in y$

故推出矛盾，即假设不成立，有 $\lnot(\exists x(\forall y(y\in x)))$ 

**** 空集存在<<MK6>>

形式语言： $\exists A\big(\forall x(x\not\in A)\big)$

即存在一个集合 $A$ 他不包含任何[[MK2][元素]]（空集），记作 $\varnothing$

***** 证明

显然 $\lnot(z=z)$ 是[[MK468][集合论语言]]的合法[[MK135][表达式]]，则根据[[MK469][第一存在]]可得有集合 $x$

故根据[[MK9][分离模式]]可得 $y=\left\{z\in x\big|\lnot(z=z)\right\}$ 亦为一个集合

根据[[MK468][集合论语言]]可得 $=$ 符号满足[[MK176][等价关系]]，即有 $\forall z(z=z)$ 故不存在任意元素满足 $\lnot(z=z)$

综上所述，不存在 $x\in y$ 即 $y=\varnothing$

***** 唯一性<<MK470>>

有且仅有一个不包含任意元素的集合 $\varnothing$

****** 证明

根据定义可得 $\forall x(x\not\in\varnothing)$ ，若存在 $y$ 亦满足 $\forall x(x\not\in y)$

则对于[[MK135][表达式]] $\forall x((x\in\varnothing)\leftrightarrow (x\in y))$ 来说对于任意 $x$ 均有 $x\in\varnothing$ 与 $x\in y$ 均不成立

则有 $\forall x((x\in\varnothing)\leftrightarrow (x\in y))$ 成立，则根据[[MK5][外延公理]]有 $y=\varnothing$ 

***** 包含

$\forall x(\varnothing\subset x)$ 即空集是任意集合的子集

****** 证明

根据[[MK20][子集]]定义，对于集合 $x$ 均有 $\forall z(z\in\varnothing\rightarrow x\in x)$

由于 $z\in\varnothing$ 恒不成立，故可得 $z\in\varnothing\rightarrow x\in x$ 恒成立，故有 $\forall x(\forall z(z\in\varnothing\rightarrow x\in x))$

即 $\forall x(\varnothing\subset x)$ 

*** 配对公理<<MK7>>

形式语言： $\forall B(\forall C(\exists A(\forall x((x\in A)\leftrightarrow((x=B)\lor (x=C))))))$

即给定集合 $B,C$ ，存在集合 $A=\{B,C\}$

**** 推论

$\forall y\exists x(y\in x)$

***** 证明

根据[[MK7][配对公理]]可得当 $B=C$ 时有 $\forall C(\exists A(\forall x((x\in A)\leftrightarrow((x=C)\lor (x=C)))))$

故可得对于任意 $C$ 均存在 $A$ 满足 $C\in A$

*** 并集公理<<MK8>>

形式语言： $\forall A(\exists B(\forall x((x\in B)\leftrightarrow(\exists u((u\in A)\land(x\in u))))))$

即对于任意集合 $A$ 存在 $A$ [[MK2][元素]]的[[MK2][元素]]的集合 $B$

*** 无穷公理<<MK462>>

形式语言： $\exists A\big(\varnothing\in A\land (x\in A\rightarrow x\cup\{x\}\in A)\big)$

即存在一个集合 $A$ 包含[[MK6][空集]]，且任意元素 $x$ 若 $x\in A$ 则其后继 $x\cup\{x\}=\{x,\{x\}\}$ 也属于 $A$

定义所有满足 $((\varnothing\in A)\land ((x\in A)\rightarrow (x\cup\{x\}\in A)))$ 的集合为 $Inf$

*** 替换公理模式

形式语言： $\forall X\exists Y\big(f(x)\in Y\leftrightarrow x\in X\big)$

即对于任意[[MK194][函数]] $f(x)$ 和任意集合 $X$ ，若对于任意 $x\in X$ 来说 $f(x)$ 有定义

则存在集合 $Y$ 使得 $f(x)\in Y$ 是 $x\in X$ 的充要条件

*** 正则公理

形式语言： $\forall A\exists x\big((\exists z(z\in A))\rightarrow \left((x\in A)\land(\lnot\exists y(y\in x\land y\in A))\right)\big)$

即对于任意非空集合 $A$ ，存在元素 $x\in A$ 使得 $x\cap A=\varnothing$ 

注：由于所有[[MK2][元素]]亦为集合，故可由并集操作

**** 推论

***** 不存在包含自身的集合

假设 $A\in A$ 即集合 $A$ 中有一个元素是其自身。

则根据[[MK7][配对公理]]设 $x=A,y=A$ 则存在 $B=\{A\}$ 

此时 $B$ 非空且仅含有一个元素，则 $A\cap B=A\cap \{A\}$

由于 $A\in A,A\in\{A\}$ 故有 $A\cap B=A$ 与正则公理矛盾，故 $A\not\in A$

***** 不存在无限递降的序列

定义无限递降序列 $\\...\in A_n\in...\in A_2\in A_1$ 

根据[[MK7][无序对公理]]可得存在集合 $S'= \{\{A_1\},...\{A_n\},...\}$ 根据[[MK8][并集公理]]可得 $S=\{A_1,...A_n,...\}$ 存在

则根据正则公理，存在一个元素 $A_k\in S$ 使得 $A_k\cup S=\varnothing$

又根据无限序列，有 $A_{k+1}\in A_k$ 同时有 $A_{k+1}\in S$ 则有 $A_k\cap S$ 至少包含 $A_{k+1}$ 与正则公理矛盾。

*** 选择公理<<MK10>>

对于任意不包含空集的[[MK12][集合族]] $A=\left\{S_i\big|i\in I\right\}$ 存在选择[[MK194][函数]] $f:A\to\bigcup_{i\in I}S_i$ 满足 $f(S_i)\in S_i$

形式语言： $\forall A\left(S_i\ne\varnothing\land S_i\in A\rightarrow\exists (f:A\to\bigcup S_i)\rightarrow\left(f(S_i)\in S_i\right)\right)$

**** 推论

对于任意集合 $A$ 中的每个[[MK2][元素]]选择一个[[MK2][元素]]的[[MK2][元素]]，可组成一个新的集合 $B$

根据选择公理，存在选择函数。则对于任意 $S\in A$ 存在 $\{f(S)\}$ 使得 $f(S)\in S$

根据[[MK7][无序对公理]]及[[MK8][并集公理]]可得 $B=\left\{f(S)\big|S\in A\right\}$ 存在

** 罗素定理

形式语言： $(\lnot(\exists x(\forall y((y\in x)\rightarrow y\not\in y))))$

*** 证明

假设罗素定理不成立，则存在 $x$ 满足条件，定义为 $x^*$ 则有 $\forall y(y\in x^*\leftrightarrow y\not\in y)$

则若 $y=x^*$ 可得 $x^*\in x^*\leftrightarrow x^*\not\in x^*$ 显然矛盾。假设不成立，罗素定理为真

** 集合的关系

*** 包含（子集）<<MK20>>

若集合 $A$ 的每一个[[MK2][元素]]都是集合 $B$ 的元素，则称 $A$ 为 $B$ 的子集，记作 $A\subset B$ 。

即 $\forall x(x\in A\rightarrow x\in B)\rightarrow A\subset B$

**** 真子集

若 $A\subset B\land A\ne B$ 则称 $A$ 为 $B$ 的真子集

**** 定理1（自反性）<<MK21>>

对于任意集合 $A,B$ 当且仅当 $A\subset B$ 且 $B\subset A$ 时 $A=B$

***** 证明

当 $A=B$ 时，根据[[MK55][外延公理]]，[[MK80][等价等值式]]以及[[MK91][替换原理]]有：

\begin{aligned}
&\forall x(x\in A\leftrightarrow x\in B)\\
{|\!\!\!=\!\!\!|}&\forall x((x\in A\rightarrow x\in B)\land(x\in B\rightarrow x\in A))\\
{|\!\!\!=\!\!\!|}&\forall x(x\in A\rightarrow x\in B)\land\forall x(x\in B\rightarrow x\in A)\\
{|\!\!\!=\!\!\!|}&(A\subset B)\land(B\subset A)\\
\end{aligned}

故得 $A=B{|\!\!\!=\!\!\!|}&(A\subset B)\land(B\subset A)$

**** 定理2（传递性）<<MK22>>

若 $A\subset B\land B\subset C$ 则有 $A\subset C$

***** 证明

根据[[MK89][蕴含传递]]以及[[MK91][替换原理]]有：

\begin{aligned}
&A\subset B\land B\subset A\\
{|\!\!\!=\!\!\!|}&\forall x(x\in A\rightarrow x\in B) \land \forall x(x\in B\rightarrow x\in C)\\
{|\!\!\!=\!\!\!|}&\forall x((x\in A\rightarrow x\in B)\land(x\in B\rightarrow x\in C))\\
{|\!\!\!=}&\forall x(x\in A\rightarrow x\in C)\\
\end{aligned}

**** 定理3

对于任意集合 $A$ ，都存在 $A\in U$ 其中 $U$ 为[[MK120][全总域]]

***** 证明

由于 $x\in U$ 为永真，故有 $x\in A\rightarrow x\in U$ 永真，故 $\forall x(x\in A\rightarrow x\in U)\rightarrow A\subset U$

**** 定理4<<MK23>>

空集是任意集合的子集

***** 证明

对于任意元素 $x$ 表达式 $x\in\varnothing$ 永假式，故 $x\in\varnothing\rightarrow x\in A$ 永真，故 $\forall x(x\in\varnothing\rightarrow x\in A)\rightarrow \varnothing\subset A$

**** 定理5

空集是唯一的

***** 证明

假设存在两个空集 $\varnothing_1,\varnothing_2$ 根据[[MK23][定理4]]可得 $\varnothing_1\subset\varnothing_2,\varnothing_2\subset\varnothing_1$ 又根据[[MK21][定理1]]可得 $\varnothing_1=\varnothing_2$

**** 定理6<<MK24>>

若集合 $A$ 的[[MK3][基数]]为 $|A|=n$ ，则 $A$ 的子集数量为 $2^n$

***** 证明

集合 $A$ 中有 $n$ 个元素，定义子集为 $a$ ，每个元素 $x_i\in A,1\leq i\leq n$ 要么属于 $a$ 要么不属于 $a$

故一共 $n$ 个元素，组合得 $a$ 有 $2^n$ 中可能性。

**** 定理7<<MK355>>

若 $A\subset B$ 则有 $|A|\leq|B|$

***** 证明

由于 $A\subset B$ 则定义映射 $\phi(a)=a,a\in A$ 显然是[[MK200][双射函数]]

此时若 $A\sim B$ 则有 $|A|=|B|$ ，若 $A\not\sim B$ 则有 $|A|<|B|$

又根据[[MK354][推论2]]可得 $|A|=|B|,|A|>|B|,|A|<|B|$ 仅有一种成立

故可得 $|A|\not>|B|$

*** 幂集<<MK25>>

若集合 $A$ ，则其幂集定义为 $\rho(A)=\left\{x\big|x\subset A\right\}$ ，根据[[MK467][幂集公理]]可得 $\rho(A)$ 存在

**** 性质1

[[MK42][有限集]]时 $|A|=n$ 时 $|\rho(A)|=2^n$

***** 证明

根据[[MK24][定理6]]可得

**** 性质2

若 $A,B$ 为集合，则 $A\subset B$ 的充要条件为 $\rho(A)\subset\rho(B)$ ，即 $(A\subset B)\leftrightarrow(\rho(A)\subset \rho(B))$ 

***** 证明

当 $A\subset B$ 时，根据[[MK25][定义]]对于任意 $x$ 有 $x\in \rho(A)\leftrightarrow x\subset A$ 又有 $A\subset B$ 根据[[MK22][传递性]]可得 $x\subset A\land A\subset B\rightarrow x\subset B$ 

根据[[MK25][定义]] $x\subset B\leftrightarrow x\in \rho(B)$ 最终得 $x\in \rho(A)\rightarrow x\in \rho(B)$ ，根据[[MK20][定义]]可得 $A\subset B\rightarrow \rho(A)\subset \rho(B)$

当 $\rho(A)\subset \rho(B)$ 根据[[MK25][定义]] $A\in \rho(A)$ 且根据[[MK20][子集定义]] $A\in \rho(B)$ 同理根据[[MK25][定义]] $A\in \rho(B)\rightarrow A\subset B$

即 $\rho(A)\subset \rho(B)\rightarrow A\subset B$

综上所述 $((A\subset B)\rightarrow (\rho(A)\subset \rho(B)))\land((\rho(A)\subset \rho(B))\rightarrow(A\subset B)){|\!\!\!=\!\!\!|}(A\subset B)\leftrightarrow(\rho(A)\subset \rho(B))$

**** 性质3

若 $x$ 是一个集合，则之多有一个 $y$ 满足 $\forall z((z\in y)\leftrightarrow(z\subset x))$

***** 证明

假设存在 $y_1,y_2$ 同时满足 $\forall z((z\in y_1)\leftrightarrow(z\subset x))$ 以及 $\forall z((z\in y_2)\leftrightarrow(z\subset x))$

则可得 $\forall z((z\in y_1)\leftrightarrow(z\subset x)\leftrightarrow (z\in y_2))$ 则根据[[MK5][外延公理]]可得 $y_1=y_2$

**** 康托定理

定义 $M$ 是任意一个集合，则有 $|M|<|\rho(M)|$ 即其[[MK25][幂集]]的[[MK3][基数]]严格大于其本身的基数

***** 证明

反正法，若假设成立，则有 $|M|\geq|\rho(M)|$ 显然 $\forall a\in M\rightarrow \{a\}\in\rho(M)$ 存在[[MK200][双射函数]]

且 $\bigcup_{a\in M}\{\{a\}\}\subset\rho(M)$ 为幂集的子集，故 $M$ 与 $\rho(M)$ 子集[[MK26][对等]]， 故 $|M|\not>|\rho(M)|$

则仅有可能 $|M|=|\rho(M)|$ ，根据[[MK26][对等]]存在[[MK200][双射函数]] $\sigma:M\to\rho(M)$ 根据[[MK203][定义]]存在 $\sigma^{-1}:\rho(M)\to M$ 亦为双射

定义集合 $A=\left\{x\big|x\in M\land x\not\in\sigma(x)\right\}$ 显然 $A\subset M$ 故存在 $\sigma^{-1}(A)$ 根据[[MK204][性质1]]可得 $\sigma(\sigma^{-1}(A))=A$

则若 $y=\sigma^{-1}(A)\in A$ 则根据 $A$ 的定义满足 $y\not\in\sigma(y)$ 其中 $\sigma(y)=\sigma(\sigma^{-1}(A))=A$ 

故推出 $y\not\in A$ 矛盾

若 $y=\sigma^{-1}(A)\not\in A$ 则根据 $A$ 的定义满足 $y\in\sigma(y)$ 同理 $\sigma(y)=\sigma(\sigma^{-1}(A))=A$ 

故推出 $y\in A$ 亦矛盾

故假设不成立


** 集合定义

*** 集合朴素定义<<MK1>>

做为整体识别的、确定的、互相区别的一些对象的总体。

其中：

（1） 整体识别：不再分割

（2） 确定：属于或者不属于整体

（3） 互相区别：各异的对象

用花括号表示，例如 $A=\{1,2,3\}$

*** 成员/元素<<MK2>>

组成集合的对象，可以是任意具体或抽象的事物。也可以是[[MK1][集合]]。

若 $a$ 是集合 $A$ 的成员，记作 $a\in A$ ，定义其否命题 $\lnot(a\in A)=a\not\in A$

*** 基数<<MK3>>

**** 有限集

[[MK42][有限集]]的基数定义为集合中所含元素的个数。

若有限集合 $A$ 中含有 $n$ 个元素，则 $A$ 的基数为 $n$ ，记作 $|A|=n$

**** 无限集<<MK348>>

是比较的概念，定义为以下三种情况：

（1） $A\sim B$ 即两个集合[[MK26][对等]]，则称 $A,B$ 有相同的基数，记作 $|A|=|B|$

（2） $A\sim C\land C\subset B\land A\not\sim B$ 即 $A$ 的基数小于 $B$ 的基数，记作 $|A|>|B|$

（3） $C\sim B\land C\subset A\land A\not\sim B$ 即 $B$ 的基数小于 $A$ 的基数，记作 $|A|<|B|$

（4） $|A|\leq|B|$ 表示 $\left(|A|<|B|\lor |A|=|B|\right)\land|A|\not>|B|$

（5） $|A|\geq|B|$ 表示 $\left(|A|>|B|\lor |A|=|B|\right)\land|A|\not<|B|$

***** 推论1<<MK353>>

（1） 若 $|A|=|B|$ 则有 $|A|\not < |B|\land |A|\not>|B|$

（2） 若 $|A|>|B|\lor|A|<|B|$ 则有 $|A|\ne|B|$

****** 证明

根据[[MK348][定义]]（2）和（3）显然

***** 推论2<<MK354>>

关系 $|A|=|B|,|A|>|B|,|A|<|B|$ 至多只有一种成立

****** 证明

当 $|A|=|B|$ 时根据[[MK353][推论1]]可得其他均不成立

当 $|A|<|B|$ 时根据[[MK353][推论1]]可得 $|A|\ne|B|$

假设 $|A|>|B|$ 则根据[[MK348][定义]]（4）和（5）可得满足 $|A|\leq|B|\land|A|\geq|B|$

则根据[[MK4][伯恩斯坦定理]]可得 $|A|=|B|$ 显然与[[MK353][推论1]]，故假设不成立

同理可证 $|A|>|B|$ 时其他均不成立

**** 伯恩斯坦定理<<MK4>>

若集合 $A,B$ 满足 $|A|\geq|B|\land|A|\leq|B|$ 则有 $|A|=|B|$

***** 证明

****** 定义集合

根据定义，存在 $A_0\subset A$ 使得 $B\sim A_0$ 即有[[MK200][双射]] $\psi:B\to A_0$

则定义 $A_1=A-A_0$ 又根据定义存在双射 $\phi:A_1\to B_1$

同理亦有 $\psi(B_1)=A_2$ 由于 $\psi:B\to A_0$ 固有 $A_2\subset A_0$ ，则 $A_1\cap A_2=\varnothing$

同理亦有 $\phi(A_2)=B_3,\psi(B_3)=A_3...\a$

****** 证明互不相交

若 $\phi(A_{n+1})=B_{n+1}$ 于任意一个 $B_i,1\leq i\leq n$ 相交，定义其中一个交点为 $\omega$

则存在 $\delta_1\in A_{n+1},\delta_2\in A_i$ 满足 $\phi(\delta_1)=\phi(\delta_2)=\omega$ 与 $\phi$ 是双射矛盾。

同理对于 $\psi(B_{n+1})=A_{n+2}$ 亦可证 $A_{n+2}$ 不与任何 $A_i,1\leq i\leq n+1$ 相交

则通过数学归纳法可得 $\forall \{i,j\}\subset\mathbb{N}\rightarrow A_i\cap A_j=\varnothing\land B_i\cap B_j=\varnothing$

****** 证明结论

由于 $\forall i\in\mathbb{N}\rightarrow\psi(B_i)=A_{i+1}$ 且 $\psi$ 是双射函数，根据[[MK352][定理3]]有 $B_i\sim A_{i+1}$ ，

由于 $A_i$ 互补相交且 $B_i$ 互不相交，则根据[[MK349][定理2]]有 $\bigcup_{i=1}^\infty B_i\sim \bigcup_{i=2}^\infty A_i$

易证 $\psi\left(\bigcup_{i=1}^\infty B_i\right)=\bigcup_{i=2}^\infty A_i$ ，又由于 $\psi(B)=A_0$

故根据[[MK352][定理3]] $\left(B-\bigcup_{i=1}^\infty B_i\right)\sim\left(A_0-\bigcup_{i=2}^\infty A_i\right)$

根据 $A_1$ 的定义有 $A=A_0\cup A_1$ 则易证 $A_0-\bigcup_{i=2}^\infty A_i=A-\bigcup_{i=1}^\infty A_i$

故有 $\left(B-\bigcup_{i=1}^\infty B_i\right)\sim\left(A-\bigcup_{i=1}^\infty A_i\right)$

又由于 $\phi$ 为双射，根据[[MK352][定理3]]可得 $A_i\sim B_i$ ，故根据[[MK349][定理2]]有 $\bigcup_{i=1}^\infty B_i\sim \bigcup_{i=1}^\infty A_i$

最终根据[[MK349][定理2]]有 $\left\{\left(B-\bigcup_{i=1}^\infty B_i\right)\cup\left(\bigcup_{i=1}^\infty B_i\right)\right\}\sim\left\{\left(A-\bigcup_{i=1}^\infty A_i\right)\cup\left(\bigcup_{i=1}^\infty A_i\right)\right\}$

显然 $A=\left(A-\bigcup_{i=1}^\infty A_i\right)\cup\left(\bigcup_{i=1}^\infty A_i\right)\land B=\left(B-\bigcup_{i=1}^\infty B_i\right)\cup\left(\bigcup_{i=1}^\infty B_i\right)$

最终证得 $A\sim B$ 即 $|A|=|B|$

*** 特殊集合

**** 多重集合<<MK11>>

在[[MK1][集合定义]]上扩展，可包含 *互相不区别* 的对象，即同一[[MK2][元素]]可在集合中出现多次。

其元素定义为[[MK151][有序组]] $<S,n>$ 其中 $S$ 是元素 $n\in\mathbb{N}^+$ 表示重数

用方括号表示，例如 $A=[1,1,1,2,2,3]=\{<1,3>,<2,2>,<3,1>\}$

*** 集合族<<MK12>>

集合 $A$ 中的元素都是集合，则 $A$ 称作集合族。

**** 标志集（指标集）<<MK13>>

定义集合族 $C$ 可表示为 $C=\left\{S_d\big|d\in D\right\}$ 那么下标所组成的集合称为 $C$ 的标志集

简化一般记作 $C_D$

** 集合的表示

*** 列举法

列举集合中所有的元素，例如 $A=\{1,2,3\}$

*** 描述法<<MK14>>

利用[[MK135][谓词公式定义]]描述集合中的元素。

例如 $A=\left\{x\big|P(x)\right\}$ 或 $A=\left\{x\big:P(x)\right\}$ 

定义为当且仅当[[MK135][谓词公式]] $P(x)=1$ 时，有 $x\in A$ 即 $\forall x(P(x)\leftrightarrow x\in A)=1$ 。

**** 替换引理<<MK330>>

若有 $A=\left\{x\big|P(x)\right\}$ 则 $A=\left\{x\bigg|x\in\left\{z\big|P(z)\right\}\right\}$

***** 证明

定义 $A'=\left\{x\bigg|x\in\left\{z\big|P(z)\right\}\right\}$ 则对于任意 $x^*\in A$ 均满足 $P(x^*)=1$

则显然 $x^*\in\left\{z\big|P(z)\right\}$ 为真，则 $x\in A'$ ，即根据[[MK20][定义]]可得 $A'\subset A$

对于任意 $x^*\in A'$ 必有 $x\in\left\{z\big|P(z)\right\}$ 为真，

由于 $A=\left\{x\big|P(x)\right\}=\left\{z\big|P(z)\right\}$ 即 $x\in A$ ，即根据[[MK20][定义]]可得 $A \subset A'$

故根据[[MK21][自反性]]可得 $A=A'$

*** 归纳法

**** 归纳定义<<MK15>>

根据以下三个条款：

（1） 基础条款<<MK16>>：规定某些元素为待定义集合成员，集合其它元素可以从基本元素出发逐步确定

（2） 归纳条款<<MK17>>：规定由已确定的集合元素去进一步确定其它元素的规则

（3） 终极条款<<MK18>>：规定待定义集合只含有基础条款和归纳条款所确定的成员

定义的集合。

其中[基础条款]与[归纳条款]为完备性条款，保证无遗漏产生集合所有成员

[终极条款]为纯粹性条款，保证集合中仅包含满足完备性条款的那些对象。

**** 归纳原理（数学归纳法）

若集合 $A$ 以[[MK15][归纳定义]]，若 $P(x)$ 是[[MK135][谓词公式]]其中 $x$ 是命题变元。要证明 $\forall x(x\in A\rightarrow P(x))$ 仅需证明：

（1） [[MK16][基础条款]]中定义的所有元素为真 $P(x^1_0)\land...\land P(x^u_0)=1$

（2） 证明当已确定的元素 $x_1,...,x_k$ 满足 $P$ 时，由[[MK17][归纳条款]]进一步确定的其他元素也满足 $P$ 

      即若其中任一归纳条款为 $\forall x_1...\forall x_k\left((x_1\in A\land...\land x_k\in A)\rightarrow (g_1(x_1,...,x_k)\in A\land...\land g_s(x_1,...,x_k)\in A)\right)$ 

      则有 $\forall x_1...\forall x_s\left((P(x_1)\land...\land P(x_s))\rightarrow (P(g_1(x_1,...,x_k))\land...\land P(g_s(x_1,...,x_k)))\right)$
 
***** 证明

假设集合 $A$ 有[[MK15][归纳定义]]，[[MK135][谓词公式]] $P$ 且两个条件均成立，即：

（1） $P(x^1_0)\land...\land P(x^u_0)=1$

（2） 对于任一归纳条款 $\forall x_1...\forall x_k\left((x_1\in A\land...\land x_k\in A)\rightarrow (g_1(x_1,...,x_k)\in A\land...\land g_s(x_1,...,x_k)\in A)\right)$ 

      均有 $\forall x_1...\forall x_s\left((P(x_1)\land...\land P(x_s))\rightarrow (P(g_1(x_1,...,x_k))\land...\land P(g_s(x_1,...,x_k)))\right)$

对于任意 $y\in A$ 若 $y\in(x^1_0,...,x^u_0)$ 则根据（1）有 $P(y)=1$

若 $y\not\in(x^1_0,...,x^u_0)$ 则由[[MK18][终极条款]]，必于有公式序列 $x^1_0,...,x^u_0,z_1,...,z_n,y$ 

其中 $n<\infty$ ， $z_i$ 可由 $x^1_0,...,x^u_0,z_1,...,z_{i-1}$ 由[[MK17][归纳条款]]导出。

根据条件（2）可得 $P(y)=1$

**** 自然数集合定义

***** 自然数归纳定义<<MK19>>

基础条款： $\varnothing\in N$

归纳条款： 如果 $x\in N$ 则 $x'=x\cup\{x\}\in N$ （即 $0=\varnothing,1=\left\{\varnothing\right\},2=\left\{\varnothing,\left\{\varnothing\right\}\right\},3=\left\{\varnothing,\left\{\varnothing\right\},\left\{\varnothing,\left\{\varnothing\right\}\right\}\right\}$ ）

终极条款： 只有有限次使用上述条款产生的集合为自然数。

***** 自然数加法

若 $x$ 是自然数，则：

（1） $x+0=x$ （ $A\cup\varnothing=A$ ）

（2） $x+y'=(x+y)'$ （ $A+(B\cup \{B\})=(A+B)\cup\{A+B\}$ ）

***** 自然数乘法

若 $x$ 是自然数，则：

（1） $x\times0=0$

（2） $x\times y'=(x\times y)+x$

** 集合的关系

*** 空集

根据[[MK6][空集存在]]公理，不含有任何[[MK2][元素]]的集合称为空集，记作 $\varnothing$

*** 全集

根据定义，包含研究对象全体的集合叫做全集，记作 $U$

全集亦为空集的[[MK33][补集]]

*** 相等

根据[[MK5][外延公理]]，集合间存在相等关系，且等价条件为 $\forall x(x\in A\leftrightarrow x\in B)$

*** 等势（对等）<<MK26>>

**** 定义<<MK27>>

若集合 $A,B$ 存在[[MK200][双射函数]] $\sigma:A\to B$ 则称 $A,B$ 集合对等，记作 $A\sim B$
  
规定空集与空集对等

**** 定理1<<MK28>>

集合对等是[[MK176][等价关系]]

***** 证明

根据等价关系定义证明自反性，对称性以及传递性

若 $\sigma:A\to A$ 为其中每一个元素于自身的映射，则显然满足映射中的双射关系，故 $A\sim A$

若 $A\sim B$ 则存在双射函数 $\sigma:A\sim B$ 则根据[[MK203][函数求逆]]可得存在你函数 $\sigma^{-1}:B\to A$

根据[[MK205][性质2]]可得你函数亦为双射，故有 $B\sim A$

若有 $A\sim B\land B\sim C$ 则存在 $\sigma_1:A\to B,\sigma_2:B\to C$ 两个双射函数

根据[[MK201][传递性]]可得存在双射函数 $\sigma:A\to C$

故满足自反性，对称性以及传递性，即为等价关系

**** 定理2<<MK349>>

若有 $\forall i\in\mathbb{N}\rightarrow A_i\sim B_i$ 且 $\{A_n\}$ 中任意两个集合互不相交， $\{B_n\}$ 中任意两个集合互不相交

则有 $\bigcup_{i=1}^\infty A_i\sim \bigcup_{i=1}^\infty B_i$

***** 证明

根据[[MK27][定义]]可得有[[MK200][双射]] $\phi_i:A_i\to B_i$ 则定义[[MK194][映射]] $\phi=\bigcup_{i=1}^\infty\phi_i$

根据[[MK350][并双射]]可得 $\phi$ 亦是[[MK200][双射]]，即 $\bigcup_{i=1}^\infty A_i\sim \bigcup_{i=1}^\infty B_i$

**** 定理3<<MK352>>

若 $A\sim B$ 即存在 $\phi:A\to B$ 是[[MK200][双射函数]]，则对于 $C\subset A$

（1） $C\sim \phi(C)$ 且双射函数 $\phi'=\left\{<x,y>\big|<x,y>\in\phi\land x\in C\right\}$

（2） $A-C\sim B-\phi(C)$ 且双射函数 $\phi'=\left\{<x,y>\big|<x,y>\in\phi\land x\in A-C\right\}$

***** 证明

对于（1）根据[[MK351][子双射]]可得 $\phi'$ 以为双射函数，即可得 $C\sim \phi(C)$

对于任意 $x\not\in C$ 可得 $\phi(x)$ 假设 $\phi(x)\in\phi(C)$ ，则存在 $x'\in C$ 使得 $\phi(x')=\phi(x)$

即 $\phi$ 不是[[MK195][单射]]，与条件矛盾，故假设不成立，即 $x\not\in C\rightarrow \phi(x)\not\in\phi(C)$

同理易证 $\phi(x)\not\in\phi(C)\rightarrow x\not\in C$

定义 $D=A-C$ 则对于任意 $x\in D$ 显然 $\phi(x)\in B$ 又由于 $x\not\in C$ 且双射，故有 $\phi(x)\not\in\phi(C)$

即有 $\phi(D)\subset B-\phi(C)$ 同理对于任意 $y\in B-\phi(C)$ 可得 $\phi^{-1}(y)\in A$

又由于 $y\not\in\phi(C)$ 则有 $\phi^{-1}(y)\not\in C$ 即 $\phi^{-1}(B-\phi(C))=A-C$

则有 $\phi(D)=\phi(A-C)=\phi\left(\phi^{-1}(B-\phi(C))\right)=B-\phi(C)$

则运用（1）有 $A-C=D\sim\phi(D)=B-\phi(C)$ 证毕

** 集合的计算<<MK329>>

以[[MK1][集合]]作为运算对象，结果亦为[[MK1][集合]]的运算。

*** 运算<<MK29>>

**** 并运算<<MK30>><<MK34>>

定义为 $\bigcup C=\left\{x\big|\exists c((c\in C)\rightarrow (x\in c))\right\}$ 根据[[MK8][并集公理]]可得 $\bigcup C$ 存在

若 $C$ 为[[MK12][集合族]]，其[[MK13][标志集]]为 $\Lambda$ 则亦有 $\bigcup_{\lambda\in\Lambda} C_\lambda=\left\{x\big|\exists \lambda\in\Lambda\rightarrow x\in C_\lambda\right\}$

特别地当 $C=\{A,B\}$ 时可记作 $A\cup B=\left\{x\big|x\in A\lor x\in B\right\}$

**** 交运算<<MK31>><<MK35>>

定义为 $\bigcap C=\left\{x\big|\forall c((c\in C)\rightarrow (x\in c))\right\}$ 

若 $C$ 为[[MK12][集合族]]，其[[MK13][标志集]]为 $\Lambda$ 则亦有 $\bigcap_{\lambda\in\Lambda} C_\lambda=\left\{x\big|\forall \lambda\in\Lambda\rightarrow x\in C_\lambda\right\}$

特别地当 $C=\{A,B\}$ 时可记作 $A\cap B=\left\{x\big|x\in A\land x\in B\right\}$

***** 存在性证明

显然 $\forall c((c\in C)\rightarrow (x\in c))$ 是[[MK468][集合论语言]]的[[MK135][表达式]]，又根据[[MK8][并集公理]]可得 $\bigcup C$ 存在

根据[[MK9][分离模式]]定理存在 $S=\left\{x\big|((x\in\bigcup C)\land(\forall c((c\in C)\rightarrow (x\in c)))\right\}$

**** 差运算<<MK32>>

定义为 $A- B=\left\{x\big|x\in A\land x\not\in B\right\}$

**** 补运算<<MK33>>

定义为 $\overline{A}=U-A=\left\{x\big|x\not\in A\right\}$

*** 性质

**** 相同集合的广义交并相同<<MK36>>

\begin{aligned}
A=B{|\!\!\!=}\cup A=\cup B\\
A=B{|\!\!\!=}\cap A=\cap B\\
\end{aligned}

***** 证明

仅证明 $A=B{|\!\!\!=}\cup A=\cup B$ 且 $A,B$ 为集合族

根据[[MK5][外延公理]] $A=B{|\!\!\!=\!\!\!|}\forall S(S\in A\leftrightarrow S\in B)$

根据[[MK34][广义并]]可得 $x\in\cup A{|\!\!\!=\!\!\!|}\exists S(x\in S\land S\in A)$

故有 $x\in\cup A{|\!\!\!=\!\!\!|}\exists S(x\in S\land S\in A){|\!\!\!=\!\!\!|}\exists S(x\in S\land S\in B){|\!\!\!=\!\!\!|}x\in\cup B$ 根据[[MK5][外延公理]] $\cup A=\cup B$

**** 集合族运算与交并<<MK333>>

\begin{aligned}
A\cap\left(\bigcup_{\lambda\in\Lambda} C_\lambda\right)&=\bigcup_{\lambda\in\Lambda}A\cap C_\lambda\\
A\cup\left(\bigcap_{\lambda\in\Lambda} C_\lambda\right)&=\bigcap_{\lambda\in\Lambda}A\cup C_\lambda\\
\end{aligned}

**** 集合族运算与差<<MK341>>

\begin{aligned}
A-\left(\bigcup_{\lambda\in\Lambda} C_\lambda\right)&=\bigcap_{\lambda\in\Lambda}(A- C_\lambda)\\
A-\left(\bigcap_{\lambda\in\Lambda} C_\lambda\right)&=\bigcup_{\lambda\in\Lambda}(A- C_\lambda)\\
\end{aligned}

***** 证明

仅证 $A-\bigcup_{\lambda\in\Lambda} C=\bigcap_{\lambda\in\Lambda}(A-C_\lambda)$

则对于任意 $x\in A-\bigcup_{\lambda\in\Lambda} C$ 有 $x\in A\land x\not\in\bigcup_{\lambda\in\Lambda} C_\lambda$

根据[[MK35][广义交]] $x\in A\land\forall\lambda\in\Lambda\rightarrow x\not\in C_\lambda$

根据[[MK75][交换率]] $(\forall\lambda\in\Lambda\rightarrow x\not\in C_\lambda)\land x\in A$

根据[[MK145][辖域变化]] $\forall\lambda\in\Lambda\rightarrow (x\not\in C_\lambda\land x\in A)$ 即有 $\forall\lambda\in\Lambda\rightarrow (x\in(A-C_\lambda))$  

又根据[[MK34][广义并]] $x\in\bigcup_{\lambda\in\Lambda}(A-C_\lambda)$ 故有 $A-\bigcup_{\lambda\in\Lambda} C\subset\bigcap_{\lambda\in\Lambda}(A-C_\lambda)$

同理易证 $\bigcap_{\lambda\in\Lambda}(A-C_\lambda)\subset A-\bigcup_{\lambda\in\Lambda} C$

根据[[MK21][自反性]]有 $A-\bigcup_{\lambda\in\Lambda} C=\bigcap_{\lambda\in\Lambda}(A-C_\lambda)$

**** 集合族运算与补<<MK331>>

\begin{aligned}
\overline{\bigcup_{\lambda\in\Lambda} C_\lambda}&=\bigcap_{\lambda\in\Lambda}\overline{C_\lambda}\\
\overline{\bigcap_{\lambda\in\Lambda} C_\lambda}&=\bigcup_{\lambda\in\Lambda}\overline{C_\lambda}\\
\end{aligned}

**** 可数性质<<MK37>>

\begin{aligned}
&\forall x\left(x\in\bigcup_{i=1}^\infty S_i\leftrightarrow x\in\bigcup_{i\in\mathbb{N}^+} S_i\leftrightarrow \exists i\left(i\in\mathbb{N}^+\land x\in S_i\right)\right)\\
&\forall x\left(x\in\bigcap_{i=1}^\infty S_i\leftrightarrow x\in\bigcap_{i\in\mathbb{N}^+} S_i\leftrightarrow \forall i\left(i\in\mathbb{N}^+\rightarrow x\in S_i\right)\right)
\end{aligned}

***** 证明

根据[[MK44][可数]]定义可得必与整数集的子集有一一对应关系，则有 $\bigcup_{i=1}^\infty S_i=\bigcup_{i\in\mathbb{N}^+}S_i$

进一步根据[[MK34][广义并]]以及[[MK35][广义交]]定义，显然证得

**** 等利律（幂等律）<<MK38>>

\begin{aligned}
A\cap A=A\\
A\cup A=A
\end{aligned}

**** 交换律<<MK39>>

\begin{aligned}
A\cap B=B\cap A\\
A\cup A=B\cup A
\end{aligned}

**** 结合律<<MK40>>

\begin{aligned}
(A\cap B)\cap C=A\cap (B\cap C)\\
(A\cup B)\cup C=A\cup (B\cup C)\\
\end{aligned}

**** 同一律<<MK336>>

\begin{aligned}
A\cup\varnothing=A\\
A\cap U=A\\
\end{aligned}

**** 零律

\begin{aligned}
A\cap\varnothing=\varnothing\\
A\cup U=U\\
\end{aligned}

**** 分配律<<MK327>>

\begin{aligned}
A\cup (B\cap C)&=(A\cup B)\cap (A\cup C)\\
A\cap (B\cup C)&=(A\cap B)\cup (A\cap C)\\
\end{aligned}

进一步有：

\begin{aligned}
A\cup\left(\bigcap_{i=1}^\infty B_i\right)&=\bigcap_{i=1}^\infty\left(A\cup B_i\right)\\
A\cap\left(\bigcup_{i=1}^\infty B_i\right)&=\bigcup_{i=1}^\infty\left(A\cap B_i\right)\\
\end{aligned}

***** 证明

****** 有限个<<MK41>>

这里仅证 $A\cup (B\cap C)&=(A\cup B)\cap (A\cup C)$ 其余同理可证

根据[[MK30][并]]以及[[MK31][交]]运算可得 $B\cap C=\left\{x\big|x\in B\land x\in C\right\}$ 以及 $A\cup (B\cap C)=\left\{x\big|x\in A\lor x\in B\cap C\right\}$

根据[[MK77][分配率]]，[[MK14][描述法定义]]以及[[MK91][替换原理]]可得对于任意 $x$

\begin{aligned}
&x\in A\cup (B\cap C)\\
\leftrightarrow&x\in A\lor x\in B\cap C\\
\leftrightarrow&x\in A\lor(x\in B\land x\in C)\\
\leftrightarrow&(x\in A\lor x\in B)\land(x\in A\lor x\in C)\\
\leftrightarrow&(x\in A\cup B)\land(x\in A\cup C)\\
\leftrightarrow&x\in(A\cup B)\cap(A\cup C)\\
\end{aligned}

即 $\forall x:(x\in A\cup (B\cap C))\leftrightarrow(x\in(A\cup B)\cap(A\cup C))$ 根据[[MK5][外延公理]] $A\cup (B\cap C)&=(A\cup B)\cap (A\cup C)$

****** [[MK44][可数]]个

这里仅证 $A\cup\left(\bigcap_{i=1}^\infty B_i\right)&=\bigcap_{i=1}^\infty\left(A\cup B_i\right)$ 其余同理

根据[[MK37][可数性质]]、[[MK145][辖域变化]]、[[MK39][交换律]]以及[[MK29][运算定义]]

\begin{aligned}
&\forall x\in \left(\bigcap_{i=1}^\infty\left(A\cup B_i\right)\right)\\
\leftrightarrow&\forall i(i\in\mathbb{N^+}\rightarrow x\in B_i\lor x\in A)\\
\leftrightarrow&\forall i(i\in\mathbb{N^+}\rightarrow x\in B_i)\lor x\in A\\
\leftrightarrow&x\in\left(\left(\bigcap_{i=1}^\infty B_i\right)\cup A\right)
\end{aligned}

根据[[MK5][外延公理]]可得 $A\cup\left(\bigcap_{i=1}^\infty B_i\right)&=\bigcap_{i=1}^\infty\left(A\cup B_i\right)$ 

**** 吸收律

\begin{aligned}
A\cap (A\cup B)&=A\\
A\cup (A\cap B)&=A\\
\end{aligned}

**** 双重否定率

\begin{aligned}
\overline{\overline{A}}=A\\
\end{aligned}

**** 特殊集合的差

\begin{aligned}
A-A=\varnothing\\
A-\varnothing=A\\
A-U=\varnothing\\
\end{aligned}

**** 差分配率<<MK347>>

\begin{aligned}
A-(B\cap C)&=(A-B)\cup (A-C)\\
A-(B\cup C)&=(A-B)\cap (A-C)\\
\end{aligned}

***** 证明

仅证 $A-(B\cap C)&=(A- B)\cup (A-C)$ 根据[[MK30][并]]，[[MK31][交]]以及[[MK32][差]]运算定义 $B\cap C=\left\{x\big|x\in B\land x\in C\right\},A-(B\cap C)=\left\{x\big|x\in A\land x\not\in B\cap C\right\}$

则根据[[MK2][成员定义]]，[[MK78][德摩根律]]，[[MK77][分配率]]，[[MK14][描述法定义]]以及[[MK91][替换原理]]可得对于任意 $x$

\begin{aligned}
&x\in A-(B\cap C)\\
\leftrightarrow&x\in A\land x\not\in B\cap C\\
\leftrightarrow&x\in A\land\lnot(x\in B\land x\in C)\\
\leftrightarrow&x\in A\land(x\not\in B\lor x\not\in C)\\
\leftrightarrow&(x\in A\land x\not\in B)\lor(x\in A\land x\not\in C)\\
\leftrightarrow&(x\in A-B)\lor(x\in A-C)\\
\leftrightarrow&x\in (A-B)\cup(A-C)\\
\end{aligned}

即 $\forall x:x\in A-(B\cap C)\leftrightarrow x\in (A-B)\cup(A-C)$ ，根据[[MK5][外延公理]] $A-(B\cap C)&=(A- B)\cup (A-C)$

**** 矛盾律和排中律

\begin{aligned}
\overline{U}=\varnothing\\
\overline{\varnothing}=U\\
\end{aligned}

**** 自身补运算

\begin{aligned}
A\cup \overline{A}=U\\
A\cap \overline{A}=\varnothing\\
\end{aligned}

**** 德摩根律<<MK328>>

\begin{aligned}
\overline{A\cup B}=\overline{A}\cap \overline{B}\\
\overline{A\cap B}=\overline{A}\cup \overline{B}\\
\end{aligned}

进一步有

\begin{aligned}
\overline{\bigcup_{i=1}^\infty A_i}=\bigcap_{i=1}^\infty\overline{A_i}\\
\overline{\bigcap_{i=1}^\infty A_i}=\bigcup_{i=1}^\infty\overline{A_i}\\
\end{aligned}

***** 证明

****** 有限

仅证 $\overline{A\cup B}=\overline{A}\cap\overline{B}$ 根据[[MK30][并]]与[[MK33][补]]运算定义 $\overline{A\cup B}=\left\{x\big|x\not\in A\cup B\right\}$ 以及 $\overline{A}\cap\overline{B}=\left\{x\big|x\not\in A\land x\not\in B\right\}$

根据[[MK2][成员定义]]，[[MK14][描述法定义]]，[[MK78][德摩根律]]以及[[MK91][替换原理]]可得对于任意 $x$

\begin{aligned}
&x\in \overline{A\cup B}\\
\leftrightarrow&x\not\in(A\cup B)\\
\leftrightarrow&\lnot(x\in(A\cup B))\\
\leftrightarrow&\lnot(x\in A\lor x\in B))\\
\leftrightarrow&\lnot(x\in A)\land\lnot(x\in B)\\
\leftrightarrow&x\not\in A\land x\not\in B\\
\leftrightarrow&x\in\overline{A}\cap\overline{B}\\
\end{aligned}

即 $\forall x\left((x\in\overline{A\cup B})\leftrightarrow(x\in\overline{A}\cap\overline{B})\right)$ ，根据[[MK5][外延公理]] $\overline{A\cup B}=\overline{A}\cap\overline{B}$ 

****** [[MK44][可数]]

仅证 $\overline{\bigcap_{i=1}^\infty A_i}=\bigcup_{i=1}^\infty\overline{A_i}$ 其余同理

根据[[MK37][可数性质]]、[[MK29][运算定义]]、[[MK79][蕴含等式]]、[[MK78][德摩根律]]、[[MK144][量词转换]]可得

\begin{aligned}
&x\in\bigcup_{i=1}^\infty\overline{A_i}\\
\leftrightarrow&\exists i\left(i\in\mathbb{N}^+\land x\in \overline{A_i}\right)\\
\leftrightarrow&\exists i\left(i\in\mathbb{N}^+\land x\not\in A_i\right)\\
\leftrightarrow&\exists i\left(\lnot\left(i\not\in\mathbb{N}^+\lor x\in A_i\right)\right)\\
\leftrightarrow&\lnot\forall i\left(i\not\in\mathbb{N}^+\lor x\in A_i\right)\\
\leftrightarrow&\lnot\forall i\left(i\in\mathbb{N}^+\rightarrow x\in A_i\right)\\
\leftrightarrow&\lnot\left(x\in\bigcup_{i=1}^\infty A_i\right)\\
\leftrightarrow&x\in\overline{\bigcup_{i=1}^\infty A_i}\\
\end{aligned}

根据[[MK5][外延公理]]可得 $\overline{\bigcap_{i=1}^\infty A_i}=\bigcup_{i=1}^\infty\overline{A_i}$ 

**** 补与减<<MK334>>

\begin{aligned}
A-B=A\cap\overline{B}\\
\end{aligned}

**** 连续减<<MK359>>

$A-B-C=A-B\cup C$

***** 证明

若 $x\in A-B$ 则等价于 $x\in A\land x\not\in B$

则 $x\in (A-B)-C$ 则满足 $x\in A-B$ 同时亦有 $x\not\in C$

即 $x\in A\land x\not\in B\land x\not\in C$

若 $x\not\in B\cup C$ 则根据[[MK30][并运算]]可得 $x\not\in B\land x\not\in C$

则 $x\in A-B\cup C$ 定义为 $x\in A\land x\not\in B\land x\not\in C$

故两者等价，即 $A-B-C=A-B\cup C$

**** 子集与计算<<MK332>>

\begin{aligned}
&A\subset A\cup B\\
&A\cup B\subset A\\
&A-B\subset A\\
&A\subset B\leftrightarrow A-B=\varnothing\leftrightarrow A\cup B=B\leftrightarrow A\cap B=A\\
&A\subset B\rightarrow \overline{B}\subset \overline{A}\\
&A\subset B\rightarrow B=A\cup(A-B)
\end{aligned}

**** [[MK124][量词]]与运算<<MK331>>

\begin{aligned}
\left\{x\big|\forall y\in Y\rightarrow P(x,y)\right\}=\bigcap_{y\in Y}\left\{x\big|P(x,y)\right\}\\
\left\{x\big|\exists y\in Y\rightarrow P(x,y)\right\}=\bigcup_{y\in Y}\left\{x\big|P(x,y)\right\}\\
\end{aligned}

***** 证明

仅证一式，二式同理易证

根据[[MK330][替换引理]]以及[[MK35][广义并]]有：

\begin{aligned}
&\left\{x\big|\forall y\in Y\rightarrow P(x,y)\right\}\\
=&\left\{x\bigg|\forall y\in Y\rightarrow x\in\left\{z\big|P(z,y)\right\}\right\}\\
=&\bigcap_{y\in Y}\left\{x\bigg|x\in\left\{z\big|P(z,y)\right\}\right\}\\
=&\bigcap_{y\in Y}\left\{x\big|P(x,y)\right\}\\
\end{aligned}

**** 补与并<<MK335>>

$A\cap B=C\cap B\rightarrow\overline{A}\cap B=\overline{C}\cap B$

***** 证明

由于 $A\cap B=C\cap B$ 则有 $x\in A\land x\in B\leftrightarrow x\in C\land x\in B$

对于任意 $a\in\overline{A}\cap B$ 可得 $a\not\in A\land a\in B$

假设 $a\in C$ 则根据 $x\in C\land a\in B$ 可得 $x\in A$ 与 $a$ 的定义矛盾

故假设不成立，则有 $x\not\in C$ 即 $x\not\in C\land x\in B\rightarrow x\in\overline{C}\cap B$ 即 $\overline{A}\cap B\subset\overline{C}\cap B$

同理易证 $\overline{C}\cap B\subset\overline{B}\cap B$ 则根据[[MK21][自反性]]可得 $\overline{A}\cap B=\overline{C}\cap B$

** 集合分类

*** 有限集<<MK42>>

空集和只含有限多个元素的集合称作有限集

*** 无限集<<MK43>>

不为[[MK42][有限集]]的集合均为无限集

*** 可数集<<MK44>>

根据[[MK19][自然数归纳定义]]所定义的自然数集合 $N$ ，若[[MK43][无限集]]与 $N$ [[MK26][等势]]，则称为可数集。

**** 推论

若 $A,B$ [[MK26][等势]]，则 $A$ 为可数集的充要条件是 $B$ 为可数集

***** 证明

必要条件，若 $B$ 为可数集，则存在[[MK200][双射函数]] $\Phi:N\rightarrow B$ ，又根据等势定义，存在双射函数 $\Psi:B\rightarrow A$

则根据[[MK201][双射传递]]，存在合成映射 $P:N\rightarrow A$ 亦为双射函数

故 $A$ 可数，同理可证充分

**** 定理

***** 定理0

[[MK42][有限集]]不是可数集

****** 证明

若存在[[MK200][双射函数]] $\sigma:\mathbb{N}\to A$ 其中 $A$ 为有限集且 $|A|=n$ 则集合可表述为 $A=\left\{a_1,...,a_n\right\}$

定义 $B=\left\{\sigma(i)\big|i\in\mathbb{N}\land i< k\right\}$ 由于双射，故 $\forall a\in\mathbb{N}\forall b\in\mathbb{N}\left(a\ne b\rightarrow\sigma(a)\ne\sigma(b)\right)$

故有 $|B|=k$ 即[[MK3][基数]]为 $k$ 且 $B\subset A$ 当 $k>n$ 时显然不成立。

***** 定理1<<MK45>>

任意[[MK43][无限集]]合至少包含一个可数子集

****** 证明

假设有无限集 $A$ 则定义 $B=\{A\}$ 根据[[MK42][有限集]]定义可知 $A\ne\varnothing$

故根据[[MK10][选择公理]]可得存在 $f:B\to A$ 使得 $f(A)\in A$

定义 $e_1=f(A)$ 定义 $A_1=A-e_1\subset A$ 为 $A$ 与 $e_1$ 的[[MK29][差]]，则有 $B_1 = \{A_1\}$ 

对于任意 $n\in\mathbb{N}$ 若存在 $A_n$ 则有 $B_n=\{A_n\}$ 此时若 $A_n=\varnothing$ 则有 $A=\{e_1,...,e_{n-1}\}$ 则为有限集

故同理根据选择公里存在 $f:B_n\to A_n$ 使得 $f(A_n)\in A_n$ 则定义 $e_n=f(A_n)\subset A$

综上所属：

（1） 存在 $e_1\in A$

（2） 对于任意 $n$ 若存在 $e_{n-1}$ 则存在 $e_n$

故有集合 $C=\{e_1,...,e_n,...\}$ 则对于任意 $n\in\mathbb{N}$ 定义映射 $f(n)=e_n$

显然是一一对应的[[MK200][双射函数]]，根据[[MK26][对等]]定义可得 $\mathbb{N}\sim C$ 且 $\forall e_i\in C\rightarrow e_i\in A$ 故有 $C\subset A$

***** 定理2<<MK46>>

可数集的任意无限子集仍是可数集

****** 证明

假设集合 $A$ [[MK44][可数]]，则根据[[MK27][对等]]有 $A\sim\mathbb{N}$

假设 $B\subset A$ 且为[[MK43][无限集]]，根据[[MK45][定理1]]其必定包含可数子集，定义为 $C\subset B$ ，则根据[[MK27][对等]]有 $C\sim\mathbb{N}$

根据[[MK28][定理]]对等是[[MK176][等价关系]]，故有[[MK173][传递性]]，故得 $C\sim A$ 

综上所述 $C\subset B\land C\sim A$ 根据[[MK3][基数]]定义可得 $|A|\leq |B|$

又因为 $B\subset A\land B\sim B$ 同理可得 $|B|\leq|A|$

故根据[[MK4][伯恩斯坦定理]]可得 $|A|=|B|$ 根据[[MK3][基数]]定义可得 $A\sim B$

同理根据等价关系传递性有 $B\sim A\sim\mathbb{N}$

****** 推论<<MK47>>

可数集的子集，要么是[[MK44][可数集]]，要么是[[MK42][有限集]]

*** 至多可数集<<MK48>>

即[[MK42][有限集]]和[[MK44][可数集]]的并集，即与正整数集子集对等

**** 定理<<MK346>>

***** 定理1<<MK49>>

至多可数个至多可数集的并，仍是至多可数集

即[[MK12][集合族]] $C_D$ 其中 $D$ 是[[MK13][指标集]]，集合 $C,D$ 均为至多可数集

则 $$\bigcup_{d\in D}C_d$$ 亦为至多可数集

****** 证明

******* 前提定义

定义 $d\in D$ 为指标集中某一元素，由于是至多可数集，故存在 $\sigma(d)=i\land i\in\mathbb{N}$ 

进一步定义 $C_i=C_{\sigma(d)}$ 故 $\bigcup_{d\in D}C_d=\bigcup_{i\in\{\sigma(d)|d\in D\}}C_i$

由于 $C_i$ 亦为至多可数集，故必有 $\sigma_i:C_i\to\mathbb{N}$ 则定义 $c_{ij}\in C_i$ 满足 $\sigma_i(c_{ij})=j$

仅证明 $D$ 以及 $C_d,d\in D$ 均为[[MK44][可数集]]，且 $C_d,d\in D$ 无交集的情况。

其他情况根据可视为该情况的子集，故根据[[MK47][推论]]可证得

******* 构建映射

定义 $$\alpha:\bigcup_{d\in D} C_d\to\mathbb{N}$$ 即 $$\alpha:\bigcup_{i\in\{\sigma(d)|d\in D\}}C_i\to\mathbb{N}$$

映射规则为 $\alpha(c_{ij})=\frac{i+j}{2}(i+j-1)-(j-1)$

******* 证明是函数

对于任意 $\{i,j\}\subset\mathbb{N}$ 均有 $\frac{i+j}{2}(i+j-1)-(j-1)$ 且唯一，故是[[MK194][函数]]

******* 证明[[MK195][单射]]

若不是单射，则存在 $\{i,j\}\ne\{i',j'\}$ 使得 $\alpha(c_{ij})-\alpha(c_{i'j'})=0$

若 $i+j=i'+j'$ 则有

\begin{aligned}
&\alpha(c_{ij})-\alpha(c_{i'j'})\\
=&\frac{1}{2}\left((i+j)^2-i-2j-(i'+j')^2+i'+2j'\right)\\
=&\frac{1}{2}\left(i'+j'-(i+j)+j'-j\right)\\
=&\frac{1}{2}\left(j'-j\right)\\
\end{aligned}

则有 $j=j'$ 又因为 $i+j=i'+j'$ 故有 $i=i'\land j=j'$ 与条件 $\{i,j\}\ne\{i',j'\}$ 不符

若 $i+j\ne i'+j'$ 则假设 $i+j>i'+j'$ 故有，反之同理 

\begin{aligned}
&\alpha(c_{ij})-\alpha(c_{i'j'})\\
=&\frac{1}{2}\left((i+j)^2-i-2j-(i'+j')^2+i'+2j'\right)\\
=&\frac{1}{2}\left([(i+j)^2-(i'+j')^2]-(i-i')-2(j-j')\right)\\
=&\frac{1}{2}\left((i+j-i'-j')(i+j+i'+j')-(i-i'+j-j')-(j-j')\right)\\
=&\frac{1}{2}\left((i+j-i'-j')(i+j+i'+j'-1)-(j-j')\right)\\
\end{aligned}

由于均为大于 $1$ 正整数且 $i+j>i'+j'$ ，故有 $i+j-i'-j'>1$

由于均为大于 $1$ 正整数，则有 $i+i'+j+j'-1>j+j'>j-j'$

故有 $(i+j-i'-j')(i+j+i'+j'-1)>i+j+i'+j'-1>j-j'$

则有 $\alpha(c_{ij})-\alpha(c_{i'j'})>0$

综上所述，对于任意 $\{i,j\}\ne\{i',j'\}$ 均有 $\alpha(c_{ij})\ne\alpha(c_{i'j'})$ 即单射

******* 证明[[MK198][满射]]

根据高斯公式可得 $\frac{(i+j)(i+j-1)}{2}=\sum_{k=1}^{i+j-1}k$ 则对于任意 $n\in\mathbb{N}$ 存在 $l$ 使得 $\sum_{k=1}^{l-2}k\leq n\land\sum_{k=1}^{l-1}k>n$

故对于该正整数 $n$ 取 $i+j=l$ 以及 $j=\sum_{k=1}^{l-1}k-n+1$ 

由于 $\sum_{k=1}^{l-1}k-\sum_{k=1}^{l-2}k=l-1$ 故有 $0\leq\sum_{k=1}^{l-1}k-n<l-1$ 则 $0\leq j-1<i+j-1$

故有 $1\leq j<i+j$ 满足均为大于等于 $1$ 的正整数条件，则有 

\begin{aligned}
\alpha(c_{ij})=&\frac{i+j}{2}(i+j-1)-(j-1)\\
=&\sum_{k=1}^{l-1}k-\left(\sum_{k=1}^{l-1}k-n+1-1\right)\\
=&n
\end{aligned}

故对于任意 $n\in\mathbb{N}$ 均有 $\{i>0,j>0\}\subset\mathbb{N}$ 使得 $\alpha(c_{ij})=n$

******* 结论

根据上述证明，存在[[MK200][双射函数]] $$\alpha:\bigcup_{d\in D} C_d\to\mathbb{N}$$ ，故根据[[MK26][定义]]可得 $\bigcup_{d\in D} C_d\sim\mathbb{N}$

进一步根据[[MK44][可数集]]定义可得 $\bigcup_{d\in D} C_d$ 是可数集。

由于其他情况均可视为可数集的子集，根据[[MK47][推论]]可得要么是[[MK44][可数集]]，要么是[[MK42][有限集]]

综上所述 $\bigcup_{d\in D} C_d$ 是至多可数集 

****** 推论1<<MK325>>

有理数集合是可数集

******* 证明

定义 $A_i=\left\{\frac{n}{i}\big| n\in\mathbb{N}\right\}$ 其中 $i\in\mathbb{N}$ 则定义[[MK12][集合族]] $A_\mathbb{N}$ 

其中显然 $|A_i|=|\mathbb{N}|$ 故 $A_i,\mathbb{N}$ 均为[[MK44][可数集]]，即属于[[MK48][至多可数集]]，故至多可数个至多可数集的并，仍是至多可数集

因为所有有理数均定义为 $\frac{p}{q},\{p,q\}\subset\mathbb{N}$ 故正有理数集合是至多可数集，同理可正负有理数集合为至多可数集

再次使用定理可得有理数集合为至多可数集。显然有理数结合不为[[MK42][有限集]]，则正有理数集合为[[MK44][可数集]]

****** 推论2<<MK358>>

两个至多可数集的[[MK153][直积]]仍是可数集

******* 证明

定义 $A,B$ 是至多可数集，对于任意 $a\in A$ 定义 $C_a=\left\{<a,b>\big|b\in B\right\}$

进而定义 $Z=\bigcup_{a\in A}C_a$ 易证 $Z=A\times B$

根据定理可得 $Z$ 是至多可数集，即 $A\times B$ 亦为至多可数集

***** 定理2

有限个至多可数集的[[MK153][直积]]仍是至多可数集

****** 证明

定义 $A=\left\{A_i\big|i\in\mathbb{N}\land i\leq n \land n\in\mathbb{N}\right\}$ 其中 $A_i$ 是[[MK48][至多可数集]]，归纳法证明：

（1） 当 $n=1$ 时即 $A_1$ 本身，显然成立

（2） 当 $n-1$ 成立时，由于 $A_n$ 亦为至多可数集，则必有[[MK200][双射函数]] $\sigma:A_n\to\mathbb{N}$

     定义满足 $a\in A_n\land\sigma(a)=i$ 的元素为 $a_i$ 则有 $A_n=\{a_1,a_2,...,a_n,...\}$

     定义 $A^*=A_1\times...\times A_{n-1}$ 定义 $A_i^*=A_1\times...\times A_{n-1}\times\{a_i\}$ 

     后者是前 $n-1$ 个集合的[[MK153][直积]]的结果与 $\{a_i\}$ 的再次直积，显然 $A^*_i\sim A^*$ [[MK26][对等]]，故根据假设 $A^*_i$ 为至多可数集

     根据[[MK154][分配率]]可得 $A^*\times A_n=A^*\times\bigcup \{a_i\}=\bigcup A^*\times\{a_i\}=\bigcup A^*_i$ 

     由于 $A_n$ 是至多可数集，故根据[[MK49][定理1]]可得 $A^*\times A_n$ 亦为至多可数集

（3） 综上所述，当 $n$ 有限时 $A_1\times...\times A_n$ 为至多可数集

***** 定理3

代数数的全体是可数集

代数数为整系数多项式的[[~/OneDrive/高等代数/Algb-4-Multi-equ.org][因式、可约与根-根]]，若不是，则定义为超越数（例如 $\pi$ ）

****** 证明

******* 证明多项式集合可数

定义 $A_n=\left\{f(x)\big|f(x)=\sum_{i=0}^na_ix^i\land i\in\mathbb{N}\right\}$ 是全体 $n$ 此整系数多项式集合

定义 $\sigma:A_n\to\mathbb{N}^n$ 规则为 $\sigma(f(x))=<a_1,...,a_n>$ 

定义 $g(x)=\sum_{i=0}^nb_ix^i$ 根据[[~/OneDrive/高等代数/Algb-4-Multi-equ.org][一元多项式-一元多项式运算-相等]]可得若 $f(x)\ne g(x)$ 则至少有一组 $b_k\ne a_k$

根据[[MK151][有序组]]定义可得 $<a_1,...,a_{k-1},a_k,a_{k+1},...,a_n>\ne<a_1,...,a_{k-1},b_k,a_{k+1},...,a_n>$ 故[[MK195][单射]]

则根据单射定义，取 $K=\mathbb{N}^n-\left\{k\big|k\in\mathbb{N}^n\land \lnot\exists f(x)(f(x)\in A_n\land \sigma(f(x))=k)\right\}$ 

即去除 $\mathbb{N}^n$ 中没有原相的元素，则显然 $\sigma':A_n\to K$ 是[[MK200][双射]]且 $K\subset\mathbb{N}^n$ 

显然 $K$ 是无限集，故根据[[MK46][定理2]]可得 $K$ 是[[MK44][可数集]]，故 $A_n$ 亦为可数集

******* 证明根的集合

定义 $B_n$ 是全体 $f(x)\in A_n$ 的根的集合，则定义集合 $A_n\times\{1,2,...,n\}$ 

对于每一个 $f(x)\in A_n$ 定义 $<f(x),k>$ 对应 $f(x)$ 的第 $k$ 个根，显然 $k\in B_n$

则有映射 $\sigma:A_n\times\{1,2,...,n\}\to B_n$ 显然根据定义 $B_n$ 中的元素必为某个 $f(x)\in A_n$ 的根

进一步根据[[~/OneDrive/高等代数/Algb-4-Multi-equ.org][因式、可约与根-根-根的个数]]可知 $f(x)$ 至多有 $n$ 个根，故 $\sigma$ 是[[MK198][满射]]

定义[[MK12][集合族]] $K=\left\{K_b\big|b\in B_n\right\}$ 其中 $K_b=\left\{a\big|\sigma(a)=b\right\}$

根据[[MK10][选择公理]]存在选择函数 $f(K_b)\in K_b$ 则定义 $K'=\left\{f(K_b)\big|K_b\in K\right\}$

则映射 $\sigma':K'\to B_n$ 是[[MK200][双射]]故根据[[MK26][定义]]可得 $K'\sim B_n$ 显然 $K'$ 是无限集且 $K'\subset A_n\times\{1,2,...,n\}$

由于 $\{1,2,...,n\}$ 是有限集，故是至多可数集。根据定理2可得 $A_n\times\{1,2,...,n\}$ 亦为至多可数集

显然 $K'$ 是[[MK43][无限集]]，故根据[[MK46][定理2]]可得 $K'$ 是[[MK44][可数集]]，故根据[[MK28][对等传递性]] $B_n$ 亦为可数集

显然所有代数数的集合可写为 $\bigcup_{i=1}^\infty B_i$ 根据[[MK49][定理1]]可得其为至多可数集

显然 $\bigcup_{i=1}^\infty B_i$ 是[[MK43][无限集]]故根据[[MK48][至多可数集定义]]代数数全体为可数集

*** 不可数集<<MK324>>

若[[MK43][无限集]]不是[[MK44][可数集]]，则称为不可数集

**** 推论<<MK50>>

若 $A,B$ [[MK26][等势]]，则 $A$ 为不可数集的充要条件是 $B$ 为不可数集

***** 证明

必要条件，当 $B$ 不可数时，假设 $A$ 可数。此时存在[[MK200][双射函数]] $\Phi:N\rightarrow A$ 

又根据等势定义，存在双射函数 $\Psi:B\rightarrow A$ 根据[[MK203][逆函数]]可得存在逆函数 $\Psi^{-1}:A\rightarrow B$ 

且 $\Psi^{-1}$ 亦为双射函数。则根据[[MK201][双射传递]]存在合成映射 $P:N\rightarrow B$ 亦为双射函数，则 $B$ 可数，推出矛盾。

故 $B$ 不可数时 $A$ 亦不可数。

充分条件同理。

*** 相关推论

**** $(0,1)$ 为不可数集

假设可数，则 $(0,1)$ 中的数与[[MK19][自然数]]一一对应，故有：

\begin{aligned}
&1\rightarrow0.a_{11}a_{12}...\\
&2\rightarrow0.a_{21}a_{22}...\\
&...\\
&n\rightarrow0.a_{n1}a_{n2}...\\
&...\\
\end{aligned}

其中 $a_{ij}\in\left\{x\big|x\in N\land x\leq 9\right\}$ 是对应的第 $i$ 个数小数位 $j$ 为上的数字

则取 $B=0.b_1b_2...\a$ 同理 $b_j\in\left\{x\big|x\in N\land x\leq 9\right\}$ 且 $b_i\ne a_{ii}$

可以看到，纵然序列无限， $B$ 任然不在序列当中

且 $B\in(0,1)$ 故与集合与[[MK19][自然数]]一一对应矛盾。故不为[[MK26][等势]]，根据[[MK44][定义]]不可数。

**** $[0,1]$ 为不可数集

定义映射 $f:(0,1)\rightarrow[0,1]$ 为 $f(x)=\begin{cases}0&x=\frac{1}{2}\\1&x=\frac{1}{4}\\\frac{1}{2^n}&x=\frac{1}{2^{n+2}},n=3,4,...\\x&x\ne\frac{1}{2^n}\end{cases}$ 

逆函数为 $f^{-1}(y)=\begin{cases}\frac{1}{2}&y=0\\\frac{1}{4}&y=1\\\frac{1}{2^{n+2}}&y=\frac{1}{2^n},n=3,4,...\\y&y\ne\frac{1}{2^n},0,1\end{cases}$ 

故有对于任意 $x\in(0,1)$ 都有唯一对应的 $f(x)\in [0,1]$ ，

对于任意 $y\in[0,1]$ 均有唯一对应的 $x\in(0,1)$ 使得 $x=f^{-1}(y)$

故 $f$ 为[[MK200][双射函数]]，即 $(0,1)$ 与 $[0,1]$ 等势。根据[[MK50][推论]]可得 $[0,1]$ 不可数。

***** 推论

同理可证 $[0,1),(0,1]$ 亦不可数

**** 任意实数区间均不可数<<MK323>>

对于任意区间 $(a,b),[a,b],[a,b),(a,b]$ 可由函数 $f(x)=(b-a)x\ \ x\in(0,1),[0,1],[0,1),(0,1]$ 映射。

对于整个实数区间，可由函数 $f(x)=\tan(x)$ 映射。

对于半封闭区间（例如 $[a,\infty)$ ），可由分段函数映射。

*** 传递集合<<MK461>>

若[[MK1][集合]] $X$ 满足 $\forall a\in X\rightarrow a\subset X$ 则称 $X$ 是一个传递集合

** 自然数

定义自然数集合 $\mathbb{N}$ 满足 $\mathbb{N}\in Inf\land W(\mathbb{N})=\mathbb{N}$ 即满足[[MK462][无穷公理]]以及[[MK465][ $W$ 运算]]后是本身

根据[[MK464][定理]]中结论（3）可得 $\mathbb{N}$ 唯一，进一步做如下定义

\begin{aligned}
&0=\varnothing\\
&1=0\cup\{0\}=\{\varnothing\}\\
&2=1\cup\{1\}=\{\varnothing\}\cup\{\{\varnothing\}\}=\{\varnothing,\{\varnothing\}\}\\
&...
\end{aligned}

即 $n\in\mathbb{N}=n-1\cup\{n-1\}$

*** $W$ 运算<<MK465>>

若 $u\in Inf$ 满足[[MK462][无穷公理]]，则定义 $W(u)=\left\{a\big|a\in u\land \forall V(V\in Inf\rightarrow a \in V)\right\}$

**** 性质<<MK463>>

对于任意 $u\in Inf$ 有 $W(u)=\bigcap_{V\in Inf} V$

***** 证明

对于任意 $u\in Inf$ 可得 $W(u)=\left\{a\big|a\in u\land \forall V(V\in Inf\rightarrow a \in V)\right\}$

则若 $a\in W(u)$ 则若存在 $V\in Inf$ 则对于任意满足条件的 $V$ 有 $a\in V$ 。又由于[[MK462][无穷公理]]可得 $Inf\ne\varnothing$

故 $a\in \bigcap_{V\in Inf} V$ 故有 $W(u)\subset\bigcap_{V\in Inf} V$

对于任意 $b\in\bigcap_{V\in Inf} V$ 由于 $u\in Inf$ 则有 $b\in u$ 且满足对于任意 $V\in Inf$ 均有 $b\in V$

故有 $\bigcap_{V\in Inf} V\subset W(u)$ ，根据[[MK21][自反性]]有 $W(u)=\bigcap_{V\in Inf} V$

**** 定理<<MK464>>

（1） 若 $u\in Inf$ 则 $W(u)\in Inf$

（2） 若 $\{u_1,u_2\}\subset Inf$ 则 $W(u_1)=W(u_2)$

（3） 若 $u\in Inf\land W(u)=u$ 则 $u$ 唯一

***** 证明

****** 证明（1）

根据[[MK463][性质]]可得 $W(u)=\bigcap_{V\in Inf} V$ 根据[[MK462][无穷公理]]定义可得对于任意 $A\in Inf$

有 $\varnothing\in A$ 故可得 $\varnothing\in \bigcap_{V\in Inf} V= W(u)$

对于任意 $x\in A$ 均有 $x\cup\{x\}\in A$ 故对于任意 $x\in\bigcap_{V\in Inf} V$ 有 $x\cup\{x\}\in\bigcap_{V\in Inf} V$

综上所述 $\bigcap_{V\in Inf} V$ 以满足[[MK462][无穷公理]]，则有 $W(u)=\bigcap_{V\in Inf} V\in Inf$

****** 证明（2）

根据[[MK463][性质]]可得 $W(u_1)=\bigcap_{V\in Inf} V=W(u_2)$ 

****** 证明（3）

根据[[MK463][性质]]可得任意 $u\in Inf$ 均有 $W(u)=\bigcap_{V\in Inf} V$ 且根据（1）有 $\bigcap_{V\in Inf} V\in Inf$

故当且仅当 $u=\bigcap_{V\in Inf} V$ 时有 $u\in Inf\land W(u)=u$ 故唯一
 
* 关系与函数

** 基本定义

*** 有序组<<MK151>>

$n$ 元有序组定义为：

（1） 当 $n=2$ 时 $<a_1,a_2>=\left\{\{a_1\},\{a_1,a_2\}\right\}$

（2） 当 $n>2$ 时 $<a_1,...a_n>=<<a_1,...,a_{n-1}>,a_n>$

进一步简化表达可有 $a_1a_2...a_n=<a_1,a_2,...,a_n>$

对于任意有序组 $s=<a_1,a_2,...,a_n>$ 定义 $s[i]=a_i$

**** 定理<<MK152>>

对于 $n$ 元有序数组 $<a_1,...,a_n>=<b_1,...,b_n>$ 当且仅当 $a_i=b_i,1\leq i\leq n$

***** 证明

******  $n=2$ 时

当 $n=2$ 时 $<a_1,a_2>=\left\{\{a_1\},\{a_1,a_2\}\right\},<b_1,b_2>=\left\{\{b_1\},\{b_1,b_2\}\right\}$

必要性显然，下面证充分性：

根据[[MK36][相同集合族广义交并]]对集合求广义交有 $\left\{\{a_1\},\{a_1,a_2\}\right\}=\left\{\{b_1\},\{b_1,b_2\}\right\}\rightarrow \{a_1\}=\{b_1\}\rightarrow a_1=b_1$

同理对集合求广义并由 $\{a_1,a_2\}=\{b_1,b_2\}$ 又由于 $u=v$ 故有 $a_2=b_2$

******  $n>2$ 时

假设 $<a_1,...,a_{n-1}>=<b_1,...,b_{n-1}>$ 的充要条件是 $a_i=b_i,1\leq i\leq n-1$

显然，当 $a_i=b_i,1\leq i\leq n$ 时 $<a_1,...,a_{n-1}>=<b_1,...,b_{n-1}>$

下面证明充分性：

定义 $<a_1,...,a_{n-1}>=u,<b_1,...,b_{n-1}>=v$ 则有 

\begin{aligned}
<a_1,...a_n>&=<<a_1,...,a_{n-1}>,a_n>=<u,a_{n}>\\
<b_1,...,b_n>&=<v,b_n>
\end{aligned}

若 $<a_1,...,a_n>=<b_1,...,b_n>\rightarrow <u,a_n>=<v,b_n>\rightarrow \left\{\{u\},\{u,a_n\}\right\}=\left\{\{v\},\{v,b_2\}\right\}$

根据[[MK36][相同集合族广义交并]]对集合求广义交有 $\left\{\{u\},\{u,a_n\}\right\}=\left\{\{v\},\{v,b_n\}\right\}\rightarrow \{u\}=\{v\}\rightarrow u=v$

根据前提假设 $u,v$ 均为 $n-1$ 元有序组，故有 $u=v\rightarrow a_i=b_i1\leq i\leq n-1$

同理对集合求广义并由 $\{u,a_n\}=\{v,b_n\}$ 又由于 $u=v$ 故有 $a_n=b_n$

*** 笛卡尔积/直积<<MK153>>

当两个集合做笛卡尔积时定义为 $A_1\times A_2=\left\{<u,v>\big|u\in A_1\land v\in A_2\right\}$ 记作 $A_1\times A_2$

多个结合做笛卡尔积时 $A_1\times...\times A_n=(A_1\times...\times A_{n-1})\times A_n$ 

集合 $A$ 对自己做 $n$ 次笛卡尔积运算可记作 $A^n=A\times...\times A$

**** 性质

***** 空集

\begin{aligned}
A\times\varnothing=\varnothing\times A=\varnothing
\end{aligned}

****** 证明

根据[[MK153][定义]]可得 $A\times\varnothing=\left\{<x,y>\big|x\in A\land y\in\varnothing\right\}$ 由于 $y\in\varnothing$ 永假

故有 $\forall x(x\in A\times\varnothing)$ 永假，故 $A\times\varnothing=\varnothing$

***** 分配率<<MK154>>

\begin{aligned}
A\times(B\cup C)&=(A\times B)\cup(A\times C)\\
A\times(B\cap C)&=(A\times B)\cap(A\times C)\\
A\times(B-C)&=(A\times B)-(A\times C)\\
\left(\bigcup_{n=1}^\infty I_n\right)\times\left(\bigcup_{n=1}^\infty I'_n\right)&=\bigcup_{i=1}^\infty\left(\bigcup_{j=1}^\infty I_i\times I'_j\right)\\
\end{aligned}

****** 证明

仅证以下，其他类似

（1） $A\times(B\cup C)=(A\times B)\cup(A\times C)$

（2） $\left(\bigcup_{n=1}^\infty I_n\right)\times\left(\bigcup_{n=1}^\infty I'_n\right)=\bigcup_{i=1}^\infty\left(\bigcup_{j=1}^\infty I_i\times I'_j\right)$

******* （1）

对于任意 $<x,y>$ 有

\begin{aligned}
&<x,y>\in A\times(B\cup C)\\
{|\!\!\!=\!\!\!|}&x\in A\land y\in (B\cup C)\\
{|\!\!\!=\!\!\!|}&x\in A\land (y\in B\lor y\in C)\\
{|\!\!\!=\!\!\!|}&(x\in A\land y\in B)\lor(x\in A\land y\in C)\\
{|\!\!\!=\!\!\!|}&(<x,y>\in A\times B)\lor(<x,y>\in A\times C)\\
{|\!\!\!=\!\!\!|}&<x,y>\in(A\times B)\cup(A\times C)\\
\end{aligned}

******* （2）

对于任意 $<x,y>\in\left(\bigcup_{n=1}^\infty I_n\right)\times\left(\bigcup_{n=1}^\infty I'_n\right)$ 可得 $x\in\bigcup_{n=1}^\infty I_n\land y\in \bigcup_{n=1}^\infty I'_n$

即等价于存在 $\{i,j\}\subset\mathbb{N}$ 满足 $x\in I_i\land y\in I'_j$ 即等价于 $<x,y>\in I_i\times I'_j$

则有 $x\in\bigcup_{i=1}^\infty\left(\bigcup_{j=1}^\infty I_i\times I'_j\right)$ 则有 $\left(\bigcup_{n=1}^\infty I_n\right)\times\left(\bigcup_{n=1}^\infty I'_n\right)\subset\bigcup_{i=1}^\infty\left(\bigcup_{j=1}^\infty I_i\times I'_j\right)$

同理易证 $\left(\bigcup_{n=1}^\infty I_n\right)\times\left(\bigcup_{n=1}^\infty I'_n\right)\supset\bigcup_{i=1}^\infty\left(\bigcup_{j=1}^\infty I_i\times I'_j\right)$

则根据[[MK21][自反性]]可得 $\left(\bigcup_{n=1}^\infty I_n\right)\times\left(\bigcup_{n=1}^\infty I'_n\right)=\bigcup_{i=1}^\infty\left(\bigcup_{j=1}^\infty I_i\times I'_j\right)$

***** 有限集基数

若 $A_1,...,A_n$ 为非空集合，则有 $|A_1\times...\times A_n|=\prod_{i=1}^n|A_i|$

***** 有无限集基数

若 $A_N$ 为非空[[MK12][集合族]]，其中 $N$ 为[[MK44][至多可数集]]，则有其笛卡尔积 $\left|\prod_{i\in N}A_i\right|\geq\max(|A_i|),i=1,2,...,n$

****** 证明

不妨设 $A_k$ 为其中基数最大的集合，由于非空，故乘积必包含对于任意 $a\in A_k$ 展开

对于给定的 $a\in A$ 定义 $\overline{a}$ 为直积有序组中第 $k$ 位是 $a$ 的所有元素的集合

则根据[[MK10][选择公理]]可得存在选择函数 $f:\bigcup_{a\in A_k}\{\overline{a}\}\to \bigcup_{a\in A_k}\overline{a}$ 且有 $\bigcup_{a\in A_k}\overline{a}\subset A_1\times...\times A_n$

故定义函数 $\sigma:\bigcup_{a\in A_k}\left\{f\left(\{\overline{a}\}\right)\right\}\to A_k$ 由于对于任意 $a$ 均存在 $\overline{a}$ 则有 $f\left(\{\overline{a}\}\right)$ 则为[[MK198][满射]]

对于 $b\in A_k\land b\ne a$ 必定 $\overline{b}$ 中有序组第 $k$ 位是 $b$ ，则根据[[MK151][有序组]]定义以及[[MK5][外延公理]]显然有序组不想等。

故为[[MK195][单射]]，即 $\sigma$ 是双射。则根据[[MK3][基数]]定义 $A_k$ 与 $A_1\times...\times A_n$ 子集对等，故有 $|A_k|\leq|A_1\times...\times A_n|$

***** 基数保序

若 $|A_I|\leq|B_I|$ 其中 $I$ 为[[MK44][至多可数集]]，则有 $\left|\prod_{i\in I}A_i\right|\leq\left|\prod_{i\in I}B_i\right|$

****** 证明

由于 $|A_I|\leq|B_I|$ 则根据[[MK197][蕴含双射]]即[[MK3][基数]]定义可知存在单射 $\sigma_i:A_i\to B_i$

则对于任意 $<a_1,a_2,...>\in\prod_{i\in I}A_i$ 则存在 $<\sigma_1(a_1),\sigma_2(a_2),...>\in\prod_{i\in I}B_i$

故同理根据蕴含双射以及基数定义可得 $\left|\prod_{i\in I}A_i\right|\leq\left|\prod_{i\in I}B_i\right|$

***** 直积与补集<<MK344>>

若 $A\subset X,B\subset Y$ 其中 $X,Y$ 分别为 $A,B$ 的全集

则有 $X\times B^c\cup A^c\times Y=(A\times B)^c$

****** 证明

若 $<x,y>\in (A\times B)^c$ 等价于 $<x,y>\not\in A\times B$ 根据直积定义可得等价于 $x\not\in A\lor y\not\in B$

若 $<x,y>\in X\times B^c\cup A^c\times Y$ 则等价于 $(x\in X\land y\not\in B)\lor(x\not\in A\land y\in Y)$

由于 $X,Y$ 是全集，即必有 $x\in X\land y\in Y$ 故有条件等价于 $x\not\in A\lor y\not\in B$

***** 直积与差<<MK345>>

若 $A_1\subset X,A_2\subset X,B_1\subset Y,B_2\subset Y$ 其中 $X,Y$ 分别为 $A_1,A_2,B_1,B_2$ 的全集

则有 $(A_1\times B_1)-(A_2\times B_2)=A_1\times(B_1-B_2)\cap(A_1-A_2)\times B_1$

****** 证明

若 $<x,y>\in(A_1\times B_1)-(A_2\times B_2)$ 即等价于 $<x,y>\in A_1\times B_1\land<x,y>\not\in A_2\times B_2$

进一步等价于 $(x\in A_1\land y\in B_1)\land\lnot(x\in A_2\land y\in B_2)$

根据[[MK78][德摩根律]]、[[MK77][分配率]]以及[[MK75][交换律]]

\begin{aligned}
&(x\in A_1\land y\in B_1)\land\lnot(x\in A_2\land y\in B_2)\\
{|\!\!\!=\!\!\!|}&(x\in A_1\land y\in B_1)\land(x\not\in A_2\lor y\not\in B_2)\\
{|\!\!\!=\!\!\!|}&((x\in A_1\land y\in B_1)\land x\not\in A_2)\lor((x\in A_1\land y\in B_1)\land y\not\in B_2)\\
{|\!\!\!=\!\!\!|}&(x\in (A_1-A_2)\land y\in B_1)\lor(x\in A_1\land y\in(B_1-B_2))\\
{|\!\!\!=\!\!\!|}&<x,y>\in(A_1-A_2)\times B_1\cup A_1\times(B_1-B_2)
\end{aligned}

** 二元关系

*** 基础定义

**** 定义<<MK155>>

若 $R\subset A\times B$ 则称 $R$ 为集合 $A,B$ 上的二元关系

若 $<x,y>\in R$ 则记作 $xRy$ 其中 $<x,y>$ 为[[MK151][有序组]]

**** 特殊的关系

空关系： $\varnothing\subset A\times B$ 即 $R=\varnothing$

全关系<<MK156>>： $A\times B$

相等关系<<MK157>>： $E_A=\left\{<x,x>\big|x\in A\right\}$

**** 关系的相关概念

定义 $R\subset A\times B$ 则 $R$ 的：

定义域为 $Dom(R)=\left\{x\big|x\in A\land\exists y(<x,y>\in R)\right\}$

值域为 $Ran(R)=\left\{y\big|y\in B\land\exists x(<x,y>\in R)\right\}$

前域为 $A$

陪域为 $B$

**** 二元关系的矩阵表示<<MK158>>

若 $R\subset A\times B$ 且 $A=\{a_1,...,a_n\},B=\{b_1,...,b_m\}$

则定义关系矩阵 $M_{ij},1\leq i\leq n,1\leq j\leq m$ 其中：

$m_{ij}=0$ 当且仅当 $<a_i,b_j>\not\in R$ 即 $\lnot a_iRb_j$

$m_{ij}>0$ 当且仅当 $<a_i,b_j>\in R$ 即 $a_iRb_j$

*** 关系的运算

**** 关系基本运算

***** 定义

若 $R,S\subset A\times B$ 其中 $R,S$ 分别有关系矩阵 $R_{ij}=\{r_{ij}\},S_{ij}=\{s_{ij}\}$ 则：

****** 并 

$R\cup S=\left\{<x,y>\big|xRy\lor xSy\right\}$

关系矩阵为 $M=\{r_{ij}\lor s_{ij}\}$

****** 交 

$R\cap S=\left\{<x,y>\big|xRy\land xSy\right\}$

关系矩阵为 $M=\{r_{ij}\land s_{ij}\}$

****** 差 <<MK159>>

$R-S=\left\{<x,y>\big|xRy\land\lnot xSy\right\}$

关系矩阵为 $M=\{r_{ij}\land \lnot s_{ij}\}$

****** 补<<MK160>>

$\overline{R}=A\times B-R=\left\{<x,y>\big|\lnot xRy\right\}$

关系矩阵为 $M=\{\lnot r_{ij}\}$

****** 逆<<MK161>>

$R^{-1}=\left\{<y,x>\big|xR^{-1}y\right\}$

关系矩阵为 $M=R_{ij}^T$ 为 $R_{ij}$ 的转置

***** 性质

若 $R,S\subset A\times B$ 其中 $R,S$ 分别有关系矩阵 $R_{ij}=\{r_{ij}\},S_{ij}=\{s_{ij}\}$ 则：

****** 性质1

$(R^{-1})^{-1}=R$

******* 证明

根据[[MK161][逆]]的定义以及[[MK155][关系定义]]

\begin{aligned}
&<x,y>\in (R^{-1})^{-1}\\
{|\!\!\!=\!\!\!|}&<y,x>\in R^{-1}\\
{|\!\!\!=\!\!\!|}&<x,y>\in R\\
\end{aligned}

****** 性质2

$\overline{R^{-1}}=\left(\overline{R}\right)^{-1}$

******* 证明

根据[[MK158][矩阵表示]]，[[MK161][逆]]以及[[MK160][补]]的定义

\begin{aligned}
&<x,y>\in \overline{R^{-1}}\\
{|\!\!\!=\!\!\!|}&<x,y>\not\in R^{-1}\\
{|\!\!\!=\!\!\!|}&<y,x>\not\in R\\
{|\!\!\!=\!\!\!|}&<y,x>\in \overline{R}\\
{|\!\!\!=\!\!\!|}&<x,y>\in \left(\overline{R}\right)^{-1}\\
\end{aligned}

****** 性质3

\begin{aligned}
(R\cup S)^{-1}&=R^{-1}\cup S^{-1}\\
(R\cap S)^{-1}&=R^{-1}\cap S^{-1}\\
(R-S)^{-1}&=R^{-1}-S^{-1}\\
\end{aligned}

******* 证明

仅证 $(R-S)^{-1}=R^{-1}-S^{-1}$ 其余同理

根据[[MK158][矩阵表示]]，[[MK161][逆]]以及[[MK159][差]]的定义：

\begin{aligned}
&<x,y>\in (R-S)^{-1}\\
{|\!\!\!=\!\!\!|}&<y,x>\in R-S\\
{|\!\!\!=\!\!\!|}&<y,x>\in R\land <y,x>\not\in S\\
{|\!\!\!=\!\!\!|}&<x,y>\in R^{-1}\land <x,y>\not\in S^{-1}\\
{|\!\!\!=\!\!\!|}&<x,y>\in R^{-1}-S^{-1}\\
\end{aligned}

****** 性质4

$R\subset S{|\!\!\!=\!\!\!|}R^{-1}\subset S^{-1}$

******* 证明

根据[[MK161][逆]]的定义以及[[MK20][子集]]定义，对于任意 $<x,y>$

\begin{aligned}
&R\subset S\\
{|\!\!\!=\!\!\!|}&\forall <x,y>(<x,y>\in R\rightarrow<x,y>\in S)\\
{|\!\!\!=\!\!\!|}&\forall <y,x>(<x,y>\in R\rightarrow<x,y>\in S)\\
{|\!\!\!=\!\!\!|}&R^{-1}\subset S^{-1}\\
\end{aligned}

**** 关系复合运算

***** 定义<<MK162>>

若 $R\subset A\times B, S\subset B\times C$ 

则 $R,S$ 的合成关系 $R\cdot S$ 定义为 $R\cdot S=\left\{<x,z>\big|x\in A\land z\in C\land\exists y(y\in B\land xRy\land ySz)\right\}$

****** 推论<<MK163>>

$R\cdot S=\left\{<x,y>\big|\exists y(xRy\land ySz)\right\}$

******* 证明

由于 $xRy{|\!\!\!=\!\!\!|}<x,y>\subset R$ 又有 $R\subset A\times B$ 

故根据[[MK20][子集定义]]，[[MK155][二元关系]]以及[[MK14][描述法]]定义可得 $<x,y>\in R{|\!\!\!=}<x,y>\in A\times B{|\!\!\!=}x\in A\land y\in B$

同理可得 $ySz{|\!\!\!=}y\in B\land z\in C$ 故根据[[MK35][B不含x]] 

此时当 $\exists y(xRy\land ySz)=1$ 根据[[MK56][连词定义]]可得 $x\in A=1,z\in C=1$ 且 $\exists y(y\in B\land xRy\land ySz)=1$

故得 $x\in A\land z\in C\land\exists y(y\in B\land xRy\land ySz)=1$

当 $\exists y(xRy\land ySz)=0$ 时可得 $\exists y(y\in B\land xRy\land ySz)=0$ 故有 $x\in A\land z\in C\land\exists y(y\in B\land xRy\land ySz)=0$

故得 $x\in A\land z\in C\land\exists y(y\in B\land xRy\land ySz){|\!\!\!=\!\!\!|}\exists y(xRy\land ySz)$

故根据[[MK91][替换原理]]以及[[MK14][描述法]]定义 $R\cdot S=\left\{<x,y>\big|\exists y(xRy\land ySz)\right\}$

***** 矩阵乘法

若 $A=\{a_1,...a_{n_a}\},B=\{b_1,...b_{n_b}\},C=\{c_1,...c_{n_c}\}$ 均为有限集合

定义矩阵的乘法为 $M_{ij}=R_{i_rj_r}\cdot S_{i_sj_s}=\left\{\sum_{k=1}^{n_b}r_{ik}s_{kj}\right\}$

则有 $S\cdot R$ 的关系矩阵为 $M_{ij}$

****** 证明

故根据[[MK158][矩阵表示]]当 $m_{ij}>0$ 时必存在 $r_{ik}>0\land s_{kj}>0$ 即有 $a_iRb_k\land b_kSc_j$

且 $a_i\in A,b_k\in B,c_j\in C$ 组合条件条件既得 $m_{ij}>0\rightarrow a_i\in A\land c_j\in C\land\exists b_k(b_k\in B\land a_iRb_k\land b_kSc_j)$

即 $<a_i,c_j>\in R\cdot S$ 的[[MK162][定义]]

若 $m_{ij}=0$ 则不存在 $r_{ik}>0\land s_{kj}>0$ 即对于任意 $1\leq k\leq n_b$ 均有 $r_{ik}>0\land s_{kj}>0=0$

且 $a_i\in A,b_k\in B,c_j\in C$ 组合条件条件既得 $m_{ij}=0\rightarrow a_i\in A\land c_j\in C\land\lnot\exists b_k(b_k\in B\land a_iRb_k\land b_kSc_j)$

根据[[MK162][定义]]可知 $<a_i,c_j>\not\in R\cdot S$

故根据[[MK158][矩阵表示]] $M_{ij}$ 为 $R\cdot S$ 的关系矩阵

***** 性质

****** 合成与并

\begin{aligned}
R\cdot(S\cup T)&=(R\cdot S)\cup(R\cdot T)\\
(S\cup T)\cdot R&=(S\cdot R)\cup(T\cdot R)\\
\end{aligned}

******* 证明

仅证 $R\cdot(S\cup T)=(R\cdot S)\cup(R\cdot T)$ 其余同理

定义 $R\in A\times B,S\in B\times C,T\in B\times C$ 

根据[[MK162][定义]]，[[MK30][并运算]]，[[MK35][B不包含x]]，[[MK75][交换律]]，[[MK76][结合律]]，[[MK77][分配率]]，[[MK145][辖域变化]]以及[[MK91][替换原理]]对于任意 $<x,y>$

\begin{aligned}
&<x,y>\in R\cdot(S\cup T)\\
{|\!\!\!=\!\!\!|}&x\in A\land y\in C\land\exists z(z\in B\land xRz\land(zSy\lor zTy))\\
{|\!\!\!=\!\!\!|}&\exists z(x\in A\land y\in C\land z\in B\land xRz\land(zSy\lor zTy))\\
{|\!\!\!=\!\!\!|}&\exists z\left((x\in A\land y\in C\land z\in B\land xRz\land zSy)\lor(x\in A\land y\in C\land z\in B\land xRz\land zTy)\right)\\
{|\!\!\!=\!\!\!|}&\exists z(x\in A\land y\in C\land z\in B\land xRz\land zSy)\lor\exists z(x\in A\land y\in C\land z\in B\land xRz\land zTy)\\
{|\!\!\!=\!\!\!|}&\left(x\in A\land y\in C\land\exists z(z\in B\land xRz\land zSy)\right)\lor\left(x\in A\land y\in C\land\exists z(z\in B\land xRz\land zTy)\right)\\
{|\!\!\!=\!\!\!|}&<x,y>\in(R\cdot S)\cup(R\cdot T)\\
\end{aligned}

故 $\forall<x,y>(<x,y>\in R\cdot(S\cup T)\leftrightarrow<x,y>\in(R\cdot S)\cup(R\cdot T))=1$ 根据[[MK5][外延公理]]可得 $R\cdot(S\cup T)=(R\cdot S)\cup(R\cdot T)$

****** 合成与交

\begin{aligned}
R\cdot(S\cap T)&\subset(R\cdot S)\cap(R\cdot T)\\
(S\cap T)\cdot R&\subset(S\cdot R)\cap(T\cdot R)\\
\end{aligned}

******* 证明

仅证 $R\cdot(S\cap T)&\subset(R\cdot S)\cap(R\cdot T)$ 其余同理

定义 $R\in A\times B,S\in B\times C,T\in B\times C$ 

根据[[MK162][定义]]，[[MK30][并运算]]，[[MK35][B不包含x]]，[[MK75][交换律]]，[[MK76][结合律]]，[[MK77][分配率]]，[[MK145][辖域变化]]以及[[MK91][替换原理]]对于任意 $<x,y>$

\begin{aligned}
&<x,y>\in R\cdot(S\cap T)\\
{|\!\!\!=\!\!\!|}&x\in A\land y\in C\land\exists z(z\in B\land xRz\land(zSy\land zTy))\\
{|\!\!\!=\!\!\!|}&\exists z(x\in A\land y\in C\land z\in B\land xRz\land(zSy\land zTy))\\
{|\!\!\!=\!\!\!|}&\exists z\left((x\in A\land y\in C\land z\in B\land xRz\land zSy)\land(x\in A\land y\in C\land z\in B\land xRz\land zTy)\right)\\
{|\!\!\!=}&\exists z(x\in A\land y\in C\land z\in B\land xRz\land zSy)\land\exists z(x\in A\land y\in C\land z\in B\land xRz\land zTy)\\
{|\!\!\!=\!\!\!|}&\left(x\in A\land y\in C\land\exists z(z\in B\land xRz\land zSy)\right)\land\left(x\in A\land y\in C\land\exists z(z\in B\land xRz\land zTy)\right)\\
{|\!\!\!=\!\!\!|}&<x,y>\in(R\cdot S)\cap(R\cdot T)\\
\end{aligned}

故得 $\forall<x,y>(<x,y>\in R\cdot(S\cap T)\rightarrow<x,y>\in(R\cdot S)\cap(R\cdot T))=1$ 根据[[MK20][子集定义]]可得 $R\cdot(S\cap T)&\subset(R\cdot S)\cap(R\cdot T)$ 

****** 合成与逆

\begin{aligned}
(R\cdot S)^{-1}=S^{-1}\cdot R^{-1}\\
\end{aligned}

******* 证明

定义 $R\in A\times B,S\in B\times C,T\in B\times C$ 

根据[[MK162][定义]]以及[[MK161][逆]]运算，[[MK60][交换律]]，[[MK76][结合律]]对于任意 $<x,y>$

\begin{aligned}
&<x,y>\in(R\cdot S)^{-1}\\
{|\!\!\!=\!\!\!|}&<y,x>\in(R\cdot S)\\
{|\!\!\!=\!\!\!|}&y\in A\land x\in C\land\exists z(z\in B\land yRz\land zSx)\\
{|\!\!\!=\!\!\!|}&y\in A\land x\in C\land\exists z(z\in B\land <y,z>\in R\land <z,x>\in S)\\
{|\!\!\!=\!\!\!|}&y\in A\land x\in C\land\exists z(z\in B\land <z,y>\in R^{-1}\land <x,z>\in S^{-1})\\
{|\!\!\!=\!\!\!|}&y\in A\land x\in C\land\exists z(z\in B\land <x,z>\in S^{-1}\land <z,y>\in R^{-1})\\
{|\!\!\!=\!\!\!|}&<x,y>\in S^{-1}\cdot R^{-1}
\end{aligned}

根据[[MK5][外延公理]]可得 $(R\cdot S)^{-1}=S^{-1}\cdot R^{-1}$

****** 合成结合律<<MK164>>

\begin{aligned}
(R\cdot S)\cdot T=R\cdot(S\cdot T)\\
\end{aligned}

******* 证明

定义 $R\in A\times B,S\in B\times C,T\in C\times D$ 

根据[[MK163][推论]]，[[MK162][关系定义]]，[[MK147][量词交换]]，[[MK145][辖域变化]]，[[MK60][交换律]]，[[MK76][结合律]]以及[[MK91][替换原理]]对于任意 $<x,y>$

\begin{aligned}
&<x,y>\in(R\cdot S)\cdot T\\
{|\!\!\!=\!\!\!|}&\exists z(<x,z>\in (R\cdot S)\land<z,y>\in T)\\
{|\!\!\!=\!\!\!|}&\exists z(\exists w(<x,w>\in R\land <w,z>\in S)\land<z,y>\in T)\\
{|\!\!\!=\!\!\!|}&\exists z\exists w(<x,w>\in R\land <w,z>\in S\land<z,y>\in T)\\
{|\!\!\!=\!\!\!|}&\exists w\exists z(<x,w>\in R\land <w,z>\in S\land<z,y>\in T)\\
{|\!\!\!=\!\!\!|}&\exists w\exists z(<w,z>\in S\land<z,y>\in\land <x,w>\in R)\\
{|\!\!\!=\!\!\!|}&\exists w(\exists z(<w,z>\in S\land<z,y>\in)\land <x,w>\in R)\\
{|\!\!\!=\!\!\!|}&\exists w(<x,w>\in R\land \exists z(<w,z>\in S\land<z,y>\in T))\\
{|\!\!\!=\!\!\!|}&\exists w(<x,w>\in R\land <w,y>\in(S\cdot T))\\
{|\!\!\!=\!\!\!|}&<x,y>\in R\cdot(S\cdot T)\\
\end{aligned}

根据[[MK5][外延公理]]可得 $(R\cdot S)\cdot T=R\cdot(S\cdot T)$

****** 合成同一律

若 $R\subset A\times B$ 则有:

\begin{aligned}
&E_A\cdot R=R\\
&R\cdot E_B=R\\
\end{aligned}

**** 关系的幂运算

***** 定义<<MK165>>

若 $R\in A\times A$ 其幂运算定义为：

（1） $R^0=E_A$ 其中 $E_A$ 是[[MK157][相等关系]]

（2） $R^n=R^{n-1}\cdot R$ 即 $R^{n-1}$ 与 $R$ 的[[MK162][合成]]运算

***** 性质

****** 性质1

\begin{aligned}
R^n\cdot R^m=R^{n+m}
\end{aligned}

******* 证明

根据[[MK164][结合律]]可得 $R^n\cdot R^m=R^{n+m}$

****** 性质2

\begin{aligned}
(R^n)^m=R^{nm}
\end{aligned}

***** 幂关系有限定理<<MK166>>

若 $A$ 的基数为 $n$ 且 $R\in A\times A$ 则存在自然数 $0\leq i\leq j\leq 2^{n^2}$ 使得 $R^i=R^j$

****** 证明

由于基数为 $n$ 则可能的关系矩阵个数为 $2^{n^2}$ 个，故遍历 $2^{n^2}+1$ 次结果中必有相同。 

***** 幂运算收敛性

若 $A$ 的基数为 $n$ 且 $R\in A\times A$ 则 $\cup_{i=1}^\infty R^i=\cup_{i=1}^n R^i$ 此处为[[MK34][广义并]]

****** 证明

显然 $\cup_{i=1}^n R^i\subset \cup_{i=1}^\infty R^i$

根据[[MK39][交换律]]，[[MK40][结合律]]可得 $\cup_{i=1}^\infty R^i=\left(\cup_{i=1}^n R^i\right)\cup\left(\cup_{i=n+1}^\infty R^i\right)$ 显然 $\cup_{i=1}^n R^i\subset \cup_{i=1}^n R^i$

则对于任意 $k>n$ 的幂关系 $R^k$ ，必然存在 $<a,a_1>\in R\land...\land<a_{k-1},b>\in R$

则在 $a=a_0,a_1,...,a_{k-1},a_k=b$ 中有 $k+1$ 个元素，由于 $|A|=n$ 且 $k>n$ 故根据鸽笼原理至少存在两个元素相等

若 $a_i=a_j,0\leq i\leq j\leq k$ 则重新选取关系链  $<a,a_1>\in R\land...<a_{i-1},a_i>\in R\land<a_j,a_{j+1}>\in R\land...\land<a_{k-1},b>\in R$

由于 $a_i=a_j$ 根据[[MK162][复合定义]]以上关系亦可组成幂关系，其指数为 $R^{k_1}$ 其中 $k_1=k-{j-i}$ ，进一步有 $<a,b>=<a_0,b_k>\in R^{k_1}$

只要当 $k>n$ 即可根据以上步骤去除多余项，直至 $k\leq n$ 时，鸽笼原理不满足。

即对于任意 $<a,b>\in R^k$ 总能找到一个 $R^{k'}\land k'\leq n\rightarrow <a,b>\in R^{k'}$

综上说书 $\forall k>n\rightarrow R^k\subset\cup_{i=1}^nR^i$ 故可得 $\cup_{i=1}^\infty R^i=\cup_{i=1}^n R^i$ 

*** 关系性质

**** 定义<<MK167>>

若 $R\subset A\times A$ 则定义如下关系

自反关系<<MK168>>：   $\forall x(x\in A\rightarrow xRx)$ [[MK158][关系矩阵]]对角线为 $1$

反自反关系<<MK169>>： $\forall x(x\in A\rightarrow \lnot xRx)$ [[MK158][关系矩阵]]对角线为 $0$

对称关系<<MK170>>：   $\forall x\forall y(x\in A\land y\in A\land xRy\rightarrow yRx)$  [[MK158][关系矩阵]]为对称矩阵

反对称关系<<MK171>>： $\forall x\forall y(x\in A\land y\in A\land xRy\land yRx\rightarrow x=y)$

                    [[MK163][同理可证]]条件等价于 $\forall x\forall y(xRy\land yRx\rightarrow x=y)$

传递关系<<MK172>>：   $\forall x\forall y\forall z(\{x,y,z\}\subset A\land xRy\land yRz\rightarrow xRz)$ 

                    [[MK163][同理可证]]条件等价于 $\forall x\forall y\forall z(xRy\land yRz\rightarrow xRz)$

                    又根据[[MK128][量词顺序]] $\forall x\forall y\forall z(xRy\land yRz\rightarrow xRz){|\!\!\!=\!\!\!|}\forall x\forall z\forall y(xRy\land yRz\rightarrow xRz)$

                    进一步有 $\forall x\forall z\forall y(xRy\land yRz\rightarrow xRz)\Rightarrow\forall x\forall z(\exists y(xRy\land yRz)\rightarrow xRz)$

**** 定理

***** 定理1

$R$ 是[[MK168][自反关系]]当且仅当 $E_A\subset R$

****** 证明

******* 充分

若 $R$ [[MK168][自反]]，则有 $\forall x(x\in A\rightarrow xRx){|\!\!\!=\!\!\!|}\forall x(x\in A\rightarrow <x,x>\in R)$

根据[[MK157][定义]]对于任意 $<x,x>$ 若 $<x,x>\in E_A{|\!\!\!=\!\!\!|}x\in A{|\!\!\!=}<x,x>\in R$

故有 $E_A\subset R$

******* 必要

若 $E_A\subset R$ 则有 对于任意 $<x,x>$ 若 $x\in A{|\!\!\!=\!\!\!|}x\in E_A{|\!\!\!=}<x,x>\in R$

故有 $\forall x(x\in A\rightarrow xRx)$

***** 定理2

$R$ 是[[MK169][反自反]]当且仅当 $E_A\cap R=\varnothing$

****** 证明

充分：若 $R$ [[MK169][反自反]]，则有 $\forall x(x\in A\rightarrow \lnot xRx){|\!\!\!=\!\!\!|}\forall x(x\in A\rightarrow <x,x>\not\in R)$

此时若 $x\in A$ 则有 $<x,x>\in E_A\land <x,x>\not\in R$ ，若 $x\not\in A$ 则有 $<x,x>\not\in E$

故有 $E_A\cap R=\varnothing$ 。

必要证明类似。

***** 定理3

$R$ [[MK170][对称]]当且仅当 $R=R^{-1}$

****** 证明

******* 充分

根据[[MK170][定义]]以及[[MK161][逆运算]]可得对于任意 $<x,y>$

\begin{aligned}
&<x,y>\in R\\
{|\!\!\!=}&<y,x>\in R\\
{|\!\!\!=\!\!\!|}&<x,y>\in R^{-1}\\
\end{aligned}

且

\begin{aligned}
&<x,y>\in R^{-1}\\
{|\!\!\!=\!\!\!|}&<y,x>\in R\\
{|\!\!\!=\!\!\!|}&<y,x>\in R\\
\end{aligned}

根据[[MK20][自己定义]]可得 $R\subset R^{-1}\land R^{-1}\subset R$ ，根据[[MK21][定理]]可得 $R=R^{-1}$

******* 必要

根据[[MK20][子集定义]]可得对于任意 $<x,y>$

\begin{aligned}
&<x,y>\in R\\
{|\!\!\!=}&<x,y>\in R^{-1}\\
{|\!\!\!=\!\!\!|}&<y,x>\in R\\
\end{aligned}

根据[[MK170][定义]]可得 $R$ 对称

***** 定理4

$R$ [[MK171][反对称]]当且仅当 $R\cap R^{-1}\subset E_A$

****** 证明

******* 充分

$R$ [[MK171][反对称]]则有 $\forall x\forall y(xRy\land yRx\rightarrow x=y)$

对于任意 $<x,y>$

\begin{aligned}
&<x,y>\in R\cap R\sim\\
{|\!\!\!=\!\!\!|}&<y,x>\in R\land<x,y>\in R\sim\\
{|\!\!\!=\!\!\!|}&<y,x>\in R\land<y,x>\in R\\
{|\!\!\!=}&(x=y)\\
\end{aligned}

又由于 $<x,y>\in R$ 包含条件 $x\in A$ 故得 $<x,y>\in E_A$

根据[[MK20][子集定义]] $R\cap R\sim\subset E_A$

******* 必要

当 $R\cap R\sim\subset E_A$ 时，根据[[MK161][逆运算]]，[[MK31][交运算]]，[[MK20][子集定义]]以及[[MK91][替换原理]]对于任意 $<x,y>$

\begin{aligned}
&xRy\land yRx\\
{|\!\!\!=\!\!\!|}&<x,y>\in R\land <y,x>\in R\\
{|\!\!\!=\!\!\!|}&<x,y>\in R\land <x,y>\in R\sim\\
{|\!\!\!=\!\!\!|}&<x,y>\in R\cap R\sim\\
{|\!\!\!=}&<x,y>\in E_A\\
\end{aligned}

***** 定理5<<MK173>>

$R$ [[MK172][传递]]当且仅当 $R^2\subset R$

****** 证明

******* 充分

$R$ [[MK172][传递]]则 $\forall x\forall y\forall z(xRy\land yRz\rightarrow xRz)$

\begin{aligned}
&<x,z>\in R^2\\
{|\!\!\!=\!\!\!|}&<x,z>\in R\cdot R\\
{|\!\!\!=\!\!\!|}&\exists y(xRy\land yRz)\\
{|\!\!\!=}&\exists y(xRz)\\
{|\!\!\!=\!\!\!|}&xRz\\
\end{aligned}

故根据[[MK20][子集]]定义 $R^2\subset R$

******* 必要

若 $R^2\subset R$ 则根据[[MK20][子集]]定义对于任意 $x,z$ 有 $<x,z>\in R^2{|\!\!\!=}<x,z>\in R$

又根据[[MK162][合成定义]] $<x,z>\in R^2{|\!\!\!=\!\!\!|}&\exists y(xRy\land yRz)$

即对于任意 $<x,z>$ 有 $\exists y(xRy\land yRz){|\!\!\!=}<x,z>\in R$

即 $R$ [[MK172][传递]]

**** 运算封闭性

***** 逆运算

[[MK167][关系基本特性]]对于[[MK161][逆运算]]封闭，即若 $R$ 均拥有某项[[MK167][关系基本特性]]则 $R^{-1}$ 亦有。

***** 交运算

[[MK167][关系基本特性]]对于[[MK31][交运算]]封闭，即若 $R_1,R_2$ 均拥有某项[[MK167][关系基本特性]]则 $R_1\cap R_2$ 亦有。

***** 并运算<<MK174>>

[[MK168][自反]]、[[MK169][反自反]]、[[MK170][对称性]]对并运算封闭，即若 $R_1,R_2$ 均拥有某项上述基本特性则 $R_1\cup R_2$ 亦有。

***** 差运算

[[MK169][反自反]]、[[MK170][对称]]、[[MK171][反对称]]对差运算封闭，即若 $R_1,R_2$ 均拥有某项上述基本特性则 $R_1-R_2$ 亦有。

***** 补运算

[[MK170][对称性]]对补运算封闭，即若 $R_1$ 均拥有某项上述基本特性则 $R_1\sim$ 亦有。

***** 合成运算

[[MK168][自反]]对合成运算封闭，即若 $R_1,R_2$ 均拥有某项上述基本特性则 $R_1\cdot R_2$ 亦有

**** 闭包

***** 定义<<MK175>>

设 $R$ 是集合 $A$ 上的关系，存在一个集合 $R'$ 满足：

（1） $R'$ 是[[MK168][自反]]（或[[MK170][对称]]或[[MK172][传递]]的）

（2） $R\subset R'$

（2） 对于任意 $A$ 上的[[MK168][自反]]（或[[MK170][对称]]或[[MK172][传递]]）关系 $R''$ 均有 $R'\subset R''$ 

即 $R'$ 是 $A$ 上包含 $R$ 的最小上[[MK168][自反]]（或[[MK170][对称]]或[[MK172][传递]]）关系

则称 $R'$ 是 $R$ 的自反闭包（或对称闭包或传递闭包），记作 $r(R)$ （或者 $s(R)$ 或者 $t(R)$）

***** 求解

****** 自反闭包

若 $R$ 是 $A\times A$ 上的关系，则根据[[MK168][自反]]定义可得 $r(R)=R\cup E_A$ 其中 $E_A$ 为[[MK157][相等关系]]。

****** 对称闭包

若 $R$ 是 $A\times A$ 上的关系，则根据[[MK170][对称]]定义可得 $s(R)=R\cup R^{-1}$ 其中 $R^{-1}$ 为 $R$ 的[[MK161][逆]]。

****** 传递闭包

若 $R$ 是 $A\times A$ 上的关系，则根据[[MK172][传递]]定义可得 $t(R)=\cup_{i=1}^\infty R^i$ 其中 $R^i$ 为 $R$ 的 $i$ 次[[MK165][幂]]

若 $|A|=n$ 则有 $t(R)=\cup_{i=1}^n R^i$

******* 证明

根据定义有 $\forall x\forall y\forall z\big(\{x,y,z\}\subset A\land xRy\land yRz\rightarrow xRz\big)$ 

******** 证明 $t(R)\subset\cup_{i=1}^\infty R$

则根据[[MK165][幂]]运算定义，对于任意 $\{<x,y>,<y,z>\}\in \cup_{i=1}^\infty R^i$ 均有 $<x,z>\in\cup_{i=1}^\infty R^i$ ：

（1） 若 $\{<x,y>,<y,z>\}\in R^k$ 则 $<x,z>\in R^{k+1}$

（2） 若 $<x,y>\in R^j\land <y,z>\in R^k\land j<k$ 则必然有 $\{<x,y>,<y,z_1>,...,<y,z_{k-j}>,<z_{k-1},z>\}\in R^j$ 则同理根据[[MK162][复合运算]]定义 $<x,z_1>\in R^{j+1}$

      以此类推，必有 $<x,z_{k-1}>\in R^k$ 故亦有 $<x,z>\in R^{k+1}$

即 $\cup_{i=1}^\infty R$ 对称，且有 $R\subset \cup_{i=1}^\infty R$ 则根据[[MK175][定义]]可得 $t(R)\subset\cup_{i=1}^\infty R$

******** 证明 $\cup_{i=1}^\infty R\subset t(R)$

对于任意 $n$ 当 $n=1$ 时，显然有 $R^1\subset t(R)$

当 $R^n\subset t(R)$ 时，对于任意 $<x,y>\in R^{n+1}$ 均可推出 $\exists z\big(<x,z>\in R^n\land <z,y>\in R^n\big)$

固有 $\{<x,z><z,y>\}\subset t(R)$ 则有 $<x,y>\in t(R)$

结合 $n=1$ 可得对于任意 $n$ 均有 $R^n\subset t(R)$ 故有 $\cup_{i=1}^\infty R^i\subset t(R)$

******** 结论

综上所属，根据条件有 $\big(\cup_{i=1}^\infty R^i\subset t(R)\big)\land\big(t(R)\subset\cup_{i=1}^\infty R^i\big)$ 根据[[MK21][子集定理]]可得 $t(R)=\cup_{i=1}^\infty R^i$

** 特殊关系

*** 等价关系<<MK176>>

定义集合 $A$ 若：

（1） $R$ 是 $A$ 上的[[MK155][二元关系]]，即 $R\in A\times A$

（2） $R$ 具有[[MK168][自反性]]，[[MK170][对称性]]以及[[MK172][传递性]]，即 $xRx,xRy\rightarrow yRx, xRy\land xRz\rightarrow xRz$

**** 等价类<<MK177>>

若 $R$ 是 $A$ 上的[[MK176][等价关系]]，则对于每一个 $a\in A$ ，集合 $\left\{x\big|x\in A\land aRx\right\}$ 称为 $a$ 在关系 $R$ 上的等价类，记作 $[a]_R$ 

**** 定理1

若 $R$ 是 $A$ 上的[[MK176][等价关系]]，则任意 $\{a,b\}\subset A$ 有 $aRb\leftrightarrow[a]_R=[b]_R$

***** 证明

****** 充分

当 $aRb$ 时，若 $x\in[a]_R$ 则有 $xRa,aRb$ 根据[[MK172][传递性]]可得 $xRb$ 。又根据[[MK177][等价类定义]]可得 $x\in[b]_R$

同理可证若 $x\in[b]_R\rightarrow x\in[a]_R$ 根据[[MK80][等价等值式]]以及[[MK91][替换原理]]可得对于任意 $x$ 有 $x\in[b]_R\leftrightarrow x\in[a]_R=1$

又根据[[MK5][外延公理]]可得 $[a]_R=[b]_R$

****** 必要

根据[[MK168][自反性]] $aRa,bRb$ 必定成立，故有 $a\in[a]_R$

由于 $[a]_R=[b]_R$ 根据[[MK5][外延公理]]可得 $a\in[b]_R$ 故有 $aRb$

**** 定理2<<MK178>>

若 $R$ 是 $A$ 上的[[MK176][等价关系]]，则任意 $\{a,b\}\subset A$ 且 $[a]_R\ne[b]_R$ 时必有 $[a]_R\cap[b]_R=\varnothing$

***** 证明

当 $\{a,b\}\subset A$ 且 $[a]_R\ne[b]_R$ 若存在 $x\in[a]_R\land x\in[b]_R$ 则有 $\forall(y\in[a]_R\rightarrow yRx\rightarrow yRb\rightarrow y\in[b]_R)$

同理可证 $\forall y(y\in[b]_R\rightarrow y\in[a]_R)$ 故根据[[MK80][等价等值式]]以及[[MK91][替换原理]]可得对于任意 $y$ 有 $y\in[b]_R\leftrightarrow y\in[a]_R=1$

即根据[[MK5][外延公理]]可得 $[a]_R=[b]_R$ 与条件矛盾，故不存在 $x\in[a]_R\land x\in[b]_R$ 

即根据[[MK31][交运算]]定义 $[a]_R\cap[b]_R=\varnothing$

*** 划分

**** 定义<<MK179>>

定义非空集合 $A$ 和[[MK12][集合族]] $\pi$ 若满足：

（1） 不空 $\forall(B\in\pi\rightarrow B\ne\varnothing)$

（2） 不漏 $\cup\pi=A$ 此处为[[MK34][广义并]]运算

（3） 不交 $\forall B\forall B'(\{B,B'\}\in\pi\land B\ne B'\rightarrow B\cap B'=\varnothing)$

则称 $\pi$ 是集合 $A$ 的 *划分* ， $\pi$ 中的元素称为 *单元，块(blcok)或类(class)* 。 $\pi$ 亦称为[[MK184][商集]]

定义若 $A=\varnothing$ 则 $\pi=\varnothing$ 是其划分

**** 有理划分<<MK360>>

定义非空集合 $A$ 和其[[MK179][划分]] $\pi$ ，若 $\pi$ 是[[MK48][至多可数集]]，则称 $\pi$ 是 $A$ 的有理划分

**** 定理

***** 定理1<<MK180>>

若 $R$ 是 $A$ 上的[[MK176][等价关系]]且 $A\ne\varnothing$ 则 $A$ 上的[[MK177][等价类]]构成的集合族 $\pi$ 为 $A$ 的[[MK179][划分]]

****** 证明

根据[[MK168][自反性]]任意等价类 $a\in A$ 都有 $aRa$ ，则根据[[MK177][等价类]]定义可得 $a\in[a]_R$ 即不空

根据[[MK177][等价类]]定义若 $x\in A$ 则必有 $[x]_R$ 存在，且若 $x\in[a]_R$ 其中 $[a]_R$ 为等价类，则必有 $x\in A$

故根据[[MK34][广义并]]定义 $\forall x(x\in A\leftrightarrow \exists[x]_R(x\in[x]_R\land[x]_R\in\pi)\leftrightarrow x\in\cup\pi)$ 

进一步根据[[MK90][等价传递]]以及[[MK91][替换原理]]有 $\forall x(x\in A\leftrightarrow x\in\cup\pi)$

又根据[[MK5][外延公理]]可得 $A=\cup\pi$ 即不漏

根据[[MK178][定理2]]可得 $\forall B\forall B'(\{B,B'\}\in\pi\land B\ne B'\rightarrow B\cap B'=\varnothing)$ 即不交

故根据[[MK179][定义]]可得根据关系 $R$ 所构成的等价类集合族 $\pi$ 为 $A$ 的划分

***** 定理2<<MK181>>

若 $\pi$ 是 $A$ 上的一个[[MK179][划分]]，则存在对应的等价关系 $R$

****** 证明

若 $\pi$ 是 $A$ 上的一个[[MK179][划分]]，则定义关系 $R$ 即对于任意 $\{x,y\}\subset A$ 若存在 $\{x,y\}\subset S\in\pi$ 则有关系 $xRy$

下面证明 $R$ 是等价关系

（1） 自反性：由于 $S\in\pi$ 则根据[[MK179][划分]] $S$ 非空。故若 $x\in S$ 则必有 $xRx$

（2） 对称性：若 $\{x,y\}\subset S\in\pi$ 则根据 $R$ 定义，有 $xRy$

（3） 传递性：若 $xRy,yRz$ 则有 $\{x,y\}\subset S\in\pi\land\{y,z\}\subset S'\in\pi$ 根据[[MK179][定义]]划分必须不交，故 $x\in S\land x\in S'\rightarrow S=S'$ 即 $\{x,y,z\}\in S$ 故有 $xRz$

根据[[MK176][定义]]可得 $R$ 为等价关系。

***** 定理3

若集合 $A$ 非空，则[[MK179][划分]] $\pi$ 对应的等价关系为 $R$ 当且仅当 $R$ 对应的划分为 $\pi$

****** 证明

******* 必要

定义 $\pi$ 对应的等价关系是 $R$ ， $R$ 对应的划分为 $\pi'$

对于任意 $a\in A$ 根据[[MK179][划分]]不漏，存在 $B\in\pi$ 使得 $a\in B$ 同理存在 $a\in[a]_R\in\pi'$

对于任意 $b\in B$ 必有 $b\in B\rightarrow aRb\rightarrow b\in[a]_R$

同理对于任意 $b\in[a]_R\rightarrow aRb\rightarrow b\in B$

根据[[MK80][等价等值式]]以及[[MK91][替换原理]]可得对于任意 $b$ 均有 $b\in B\leftrightarrow b\in[a]_R$

又根据[[MK5][外延公理]]可得 $B=[a]_R$

******* 充分

若 $R$ 对应的划分为 $\pi$ ， $\pi$ 对应的等价关系为 $R'$

若 $xRy\rightarrow \{x,y\}\subset S\in\pi\rightarrow xR'y$

若 $xR'y\rightarrow \{x,y\}\subset S\in\pi\rightarrow xRy$

根据[[MK80][等价等值式]]以及[[MK91][替换原理]]可得对于任意 $x$ 均有 $xRy\leftrightarrow xR'y$ 

根据[[MK155][关系定义]]可得 $<x,y>\in R\leftrightarrow<x,y>\in R'$

又根据[[MK5][外延公理]]可得 $R=R'$

**** 划分细度

若集合 $A$ 上的[[MK179][划分]] $\pi_1,\pi_2$ 若 $\forall B_1\in\pi_1(\exists(B_2\in\pi_2\rightarrow B_1\subset B_2))$ 则称 $\pi_1$ 细于 $\pi_2$ 记作 $\pi_1\leq\pi_2$

**** 细度定理<<MK182>>

集合 $A$ 上的[[MK179][划分]] $\pi_1,\pi_2$ 对应的等价关系为 $R_1,R_2$ 则有 $R_1\subset R_2\leftrightarrow\pi_1\leq\pi_2$

***** 证明 

****** 充分

若 $R_1\subset R_2$ 对于任意 $\{a,b\}\subset A$ 当 $aR_1b$ 时便有 $aR_2b$ 故 $b\in[a]_{R_1}\land b\in[a]_{R_2}$

故有对于任意 $b$ 有 $b\in[a]_{R_1}\rightarrow b\in[a]_{R_2}$ 故根据[[MK20][子集]]的定义有 $[a]_{R_1}\subset[a]_{R_2}$

****** 必要

若 $\pi_1\leq\pi_2$ 故若 $\{x,y\}\subset S_1\in\pi_1$ 则存在 $\{x,y\}\subset S_1\subset S_2\in\pi_2$

故有对于任意 $xR_1y$ 均有 $xR_2y$ 即 $<x,y>\in R_1\rightarrow <x,y>\in R_2$

故根据[[MK20][子集]]的定义 $R_1\subset R_2$

***** 推论

[[MK157][相等关系]]是等价关系对应划分中最“细”的。

相应的最大的等价关系是[[MK156][全关系]]

**** 划分的运算

***** 积划分

$A$ 上的划分 $\pi_1,\pi_2$ 的积划分记作 $\pi_1\cdot\pi_2$ ，该划分满足：

（1） $\pi_1\cdot\pi_2\leq\pi_1\land\pi_1\cdot\pi_2\leq\pi_1$

（2） $\forall \pi(\pi\leq\pi_1\land\pi\leq\pi_1\rightarrow\pi\leq\pi_1\cdot\pi_2)$

****** 推论

若 $R_1,R_2$ 是 $\pi_1,\pi_2$ 对应的等价关系，则有 $\pi_1\cdot\pi_2$ 对应的等价关系是 $R_1\cap R_2$

******* 证明

由于 $R_1\cap R_2\subset R_1$ 根据[[MK182][细度定理]]可得 $\pi_1\cdot\pi_2\leq\pi_1$

同理可得 $\pi_1\cdot\pi_2\leq\pi_2$

若存在 $\pi\leq\pi_1\land\pi\leq\pi_2$ 根据[[MK181][定理2]]可得存在 $R$ 与 $\pi$ 对应

根据[[MK182][细度定理]]可得 $R\subset R_1\land R\subset R_2$ 根据[[MK31][交运算]]可得 $\forall x(x\in R\rightarrow x\in R_1\cap R_2)$

根据[[MK20][子集]]的定义有 $R\subset R_1\cap R_2$

***** 和划分

$A$ 上的划分 $\pi_1,\pi_2$ 的和划分记作 $\pi_1+\pi_2$ ，该划分满足：

（1） $\pi_1\leq\pi_1+\pi_2\land \pi_2\leq\pi_1+\pi_2$

（2） $\forall \pi(\pi_1\leq\pi\land\pi_2\leq\pi\rightarrow\pi_1+\pi_2\leq\pi)$

注：由于[[MK174][封闭性]]显示并运算对于[[MK172][传递性]]不封闭，故和划分不等价于集合并。

****** 传递闭包<<MK183>>

若 $R$ 是 $A$ 上的[[MK155][二元关系]]，则传递闭包 $R_t$ 满足：

（1） $R_t$ 具有传递性，即补足 $R$ 使得 $R\subset R_t$ 且 $\forall x\forall z(\exists y(xR_ty\land yR_tz)\rightarrow xR_tz)$

（2） 若存在 $R'$ 使得 $R\subset R'\land\forall x\forall z(\exists y(xR'y\land yR'z)\rightarrow xR'z)$ 则有 $R_t\subset R'$
 
****** 推论

若 $R_1,R_2$ 是 $\pi_1,\pi_2$ 对应的等价关系，则有 $\pi_1+\pi_2$ 对应的等价关系是 $(R_1\cup R_2)_t$ 即 $R_1\cup R_2$ 的传递闭包

******* 证明

根据[[MK30][并运算]]及[[MK183][传递闭包]]可得 $R_1\subset (R_1\cup R_2)_t\land R_2\subset (R_1\cup R_2)_t$ 根据[[MK182][细度定理]]可得 $\pi_1\leq\pi_1+\pi_2\land \pi_2\leq\pi_1+\pi_2$

若存在 $\pi$ 满足 $\pi_1\leq\pi\land\pi_2\leq\pi$ 根据[[MK181][定理2]]可得存在 $R$ 与 $\pi$ 对应，且 $R$ 具有[[MK172][传递性]]

根据[[MK182][细度定理]]可得 $R_1\subset R\land R_2\subset R$ 根据[[MK30][并运算]]以及[[MK183][传递闭包]]可得 $(R_1\cup R_2)_t\subset R$

根据[[MK182][细度定理]]可得 $\pi_1+\pi_2\leq\pi$

**** 商集<<MK184>>

$R$ 是 $A$ 上的[[MK176][等价关系]]，则称 $A$ 的划分 $\left\{[a]_R\big|a\in A\right\}$ 为 $A$ 的 $R$ 商集，记作 $A/R$

*** 偏序关系<<MK185>>

定义集合 $A$ 若：

（1） $R$ 是 $A$ 上的[[MK155][二元关系]]，即 $R\in A\times A$

（2） $R$ 具有[[MK168][自反性]]，[[MK171][反对称性]]以及[[MK172][传递性]]，即 $xRx,xRy\land yRx\rightarrow x=y, xRy\land xRz\rightarrow xRz$

则称 $R$ 为 $A$ 上的序关系，且 $A$ 称为有序集，记作 $<A,R>$

**** 可比与覆盖

定义 $R$ 为非空集合 $A$ 上的[[MK185][序]]关系，其中 $\{x,y,z\}\subset A$ 若：

（1） 存在 $xRy$ 或 $yRx$ 则称 $x,y$ 可比

（2） 存在 $xRy$ 且 $\lnot\exists z\big(z\in A\land xRz\land zRy\big)$

**** 元素

***** 元<<MK186>>

若 $<A,\leq>$ 是有序集，且 $B\subset A$ 则 $b$ 是：

$B$ 的最小元： $b\in B\land\forall x(x\in B\rightarrow b\leq x)$

$B$ 的最大元： $b\in B\land\forall x(x\in B\rightarrow x\leq b)$

$B$ 的极小元： $b\in B\land\lnot\exists x(x\in B\land x\ne b\land x\leq b)$ 

$B$ 的极大元： $b\in B\land\lnot\exists x(x\in B\land x\ne b\land b\leq x)$ 

****** 定理

（1） $B$ 的最大（小）元必为 $B$ 的极大（小）元

（2） 如果 $B$ 有最大（小）元，则它是唯一的

（3） 如果 $B$ 是有限集，则B的极大（小）元恒存在

（3） 最大（小）元未必存在，存在则唯一

（4） 极大（小）元对有限集必然存在，未必唯一

***** 界<<MK326>>

若 $<A,\leq>$ 是有序集，且 $B\subset A$ 则 $b$ 是：

$B$ 的上界： $b\in A\land\forall x(x\in B\rightarrow x\leq b)$ 

$B$ 的下界： $b\in A\land\forall x(x\in B\rightarrow b\leq x)$ 

$B$ 的上确界： $b$ 是上界的最小元 

$B$ 的下确界： $b$ 下界的最大元 

****** [[MK194][函数]]的界<<MK342>>

若 $<X,\leq>$ 是有序集，且 $Y\subset X$  

若 $I=\left\{f_a(x)\big|a\in A\right\}$ 是一个 $f:E\to Y$ 的[[MK194][函数]]的集合，其中 $A$ 为[[MK13][标志集]]则对于函数 $g:E\to X$ ：

是 $I$ 的上界： 则有对于任意 $x'\in E$ 均有 $g(x')$ 是 $\{f(x')\}$ 的[[MK326][上界]]

是 $I$ 的下界： 则有对于任意 $x'\in E$ 均有 $g(x')$ 是 $\{f(x')\}$ 的[[MK326][下界]]

是 $I$ 的上确界： 则有对于任意 $x'\in E$ 均有 $g(x')$ 是 $\{f(x')\}$ 的[[MK326][上确界]]

是 $I$ 的上确界： 则有对于任意 $x'\in E$ 均有 $g(x')$ 是 $\{f(x')\}$ 的[[MK326][下确界]]

****** 定理1

（1） 如果 $b$ 是 $B$ 的最大（小）元，则b是 $B$ 的上（下）确界

（2） 如果 $b$ 是 $B$ 的上（下）界，而且 $b\in B$ ，则 $b$ 一定是 $B$ 的最大（小）元

（3） 如果有上（下）确界，则上（下）确界是唯一的

（4） 上下界未必存在，存在时也未必唯一

（5） 有了上（下）界，也未必存在上（下）确界

******* 证明

只证（5），若存在 $\{c,d\}\in A$ 且两者无法比较，即 $\lnot(c\leq d)\land\lnot(d\leq c)$

若 $c,d$ 均为 $B$ 的上界，则不存在上确界。

****** 定理2<<MK339>>

（1） 若 $\forall b\in B\rightarrow b\leq c$ 则 $B$ 的上确界 $\sup\{B\}\leq c$

（2） 若 $\forall b\in B\rightarrow b\geq c$ 则 $B$ 的上确界 $\inf\{B\}\geq c$

******* 证明

仅证（1），（2）同理可证

假设 $\sup\{B\}>c$ 则根据定义 $c$ 是 $B$ 的上界

则 $\sup\{B\}$ 不是 $B$ 的最小上界，故不为上确界，矛盾

故假设不成立，则有 $\sup\{B\}\leq c$

****** 定理3<<MK338>>

若 $A\subset\mathbb{R}_e\land B\subset\mathbb{R}_e$ 其中 $\mathbb{R}_e$ 是[[~/OneDrive/实变函数/SBHS.org::MK143][广义实数]]，定义 $C=\left\{a+b\big|a\in A\land b\in B\right\}$

则有 $\sup\{C\}=\sup\{A\}+\sup\{B\}$

******* 证明

******** 当 $|\sup\{A\}|<\infty\land|\sup\{B\}|<\infty$ 时<<MK337>>

由于 $\forall a\in A\rightarrow a\leq\sup\{A\}$ 以及 $\forall b\in B\rightarrow b\leq\sup\{B\}$

故有 $\forall a\in A,\forall b\in B\rightarrow a+b\leq\sup\{A\}+\sup\{B\}$ 即 $\sup\{A\}+\sup\{B\}$ 是 $C$ 的上界

对于任意 $\epsilon\in\mathbb{R}^+$ 有 $\sup\{A\}-\frac{\epsilon}{2}$ 以及 $\sup\{B\}-\frac{\epsilon}{2}$

根据上确界定义可得存在 $a'\in A$ 满足 $a'>\sup\{A\}-\frac{\epsilon}{2}$ 以及 $b'\in B$ 满足 $b'>\sup\{B\}-\frac{\epsilon}{2}$

即对于任意 $\epsilon>0$ 存在 $a'+b'\in C$ 满足 $a'+b'>\sup\{A\} +\sup\{B\}$

综上所述 $\sup\{A\}+\sup\{B\}$ 是 $C$ 的最小上界，即 $\sup\{C\}=\sup\{A\}+\sup\{B\}$

******** 否则

由于 $A\subset\mathbb{R}_e\land B\subset\mathbb{R}_e$ 根据[[~/OneDrive/实变函数/SBHS.org::MK224][运算性质]]不能出现 $+\infty+(-\infty)$

则当 $\pm\infty+r$ 或者 $\pm(\infty+\infty)$ 时，显然 $\sup\{A\}+\sup\{B\}=\pm\infty$

[[MK337][同理]]易证 $\sup\{C\}=\sup\{A\}+\sup\{B\}$

****** 定理4<<MK340>>

若 $A\subset\mathbb{R}_e$ 其中 $\mathbb{R}_e$ 是[[~/OneDrive/实变函数/SBHS.org::MK143][广义实数]]，则定义 $B=\left\{c\cdot a\big|a\in A\right\}$ 其中 $c\in\mathbb{R}^+$

则有 $\sup\{B\}=c\cdot\sup\{A\}$ 以及 $\inf\{B\}=c\cdot\inf\{A\}$ 

******* 证明

仅证上确界，下确界类似易证

定义 $h_B=\sup\{B\}$ 根据以下证明可得 $\frac{h_B}{c}=\sup\{A\}$

故可得 $\sup\{B\}=c\cdot\sup\{A\}$

******** $\frac{h_B}{c}$ 是 $A$ 的上界

由于是[[MK326][上确界]]，故有 $\forall b\in B\rightarrow h_B\geq b$

进一步根据 $B$ 的定义有 $\forall a\in A\rightarrow\left(\exists b\in B\rightarrow b=c\cdot a\right)$

综上所述 $\forall a\in A\rightarrow h_B\geq c\cdot a\rightarrow\frac{h_B}{c}\geq a$ 即 $\frac{h_B}{c}$ 是 $A$ 的[[MK326][上界]]

******** $\frac{h_B}{c}$ 是 $A$ 上确界

假设 $\frac{h_B}{c}$ 不是 $A$ 的上确界，由于是上界，故存在 $h^*$ 满足 $\forall a\in A\rightarrow h^*\geq a$ 且 $\frac{h_B}{c}>h^*$

则根据 $B$ 的定义有 $\forall b\in B\rightarrow c\cdot h^*\geq c\cdot a$ 则 $c\cdot h^*$ 是 $B$ 的[[MK326][上界]]

则进一步有 $h_B>c\cdot h^*$ 与 $h_B$ 是 $B$ 的[[MK326][上确界]]矛盾

故假设不成立，则 $\frac{h_B}{c}$ 是 $A$ 的上确界

****** 定理6<<MK343>>

若 $A\subset\mathbb{R}_e$ 其中 $\mathbb{R}_e$ 是[[~/OneDrive/实变函数/SBHS.org::MK143][广义实数]]，则定义 $-A=\left\{-a\big|a\in A\right\}$ 其中 $c\in\mathbb{R}^-$

则有 $\sup\{-A\}=-\inf\{A\}$

******* 证明

定义 $\alpha=\sup\{-A\}$ 则有 $\forall a'\in-A\rightarrow a'\leq\alpha$ 且 $\forall\epsilon>0\rightarrow\left((\exists -a'\in-A)\rightarrow(\alpha-\epsilon<-a')\right)$

则根据[[~/OneDrive/实变函数/SBHS.org::MK265][推论3]]可得 $-\alpha\leq-a'$ 根据 $-A$ 定~/OneDrive/离散数学/Disc_Math.org义可得 $\forall a\in A\rightarrow -\alpha\leq a$

类似可证 $\forall\epsilon>0\rightarrow\left((\exists a'\in A)\rightarrow(a<-\alpha+\epsilon)\right)$

则显然可得 $-\alpha$ 是 $A$ 的[[MK326][下确界]]

****** 定理7<<MK361>>

若 $A\subset\mathbb{R}\land B\subset\mathbb{R}$ 且 $\forall a\in A,\forall b\in B\rightarrow a+b\leq c$

则有 $\sup(A)+\sup(C)\leq c$

******* 证明

根据[[MK326][定义]]可得 $\forall\epsilon>0,\exists a^*\in A\rightarrow a^*+\frac{\epsilon}{2}>\sup(A)$

同理 $\forall\epsilon>0,\exists b^*\in B\rightarrow b^*+\frac{\epsilon}{2}>\sup(B)$

故有 $\sup(A)+\sup(B)<a^*+b^*+\epsilon\leq c+\epsilon$

即对于任意 $\epsilon>0$ 均有 $\sup(A)+\sup(B)<c+\epsilon$ 假设 $\sup(A)+\sup(B)>c$

则取 $\epsilon=\sup(A)+\sup(B)-c$ 则有 $0<0$ 显然与[[~/OneDrive/实变函数/SBHS.org::MK5][三岐性]]矛盾

故假设不成立，即有 $\sup(A)+\sup(C)\leq c$

***** 链<<MK386>>

若 $<A,R>$ 是有序集，且 $B\subset A$ 若：

$B$ 是链： $\forall x\forall y(\{x,y\}\subset B\rightarrow xRy\lor yRx)$

$B$ 是反链<<MK187>>： $\forall x\forall y(\{x,y\}\subset B\rightarrow \lnot(xRy)\land\lnot(yRx))$

****** 定理

若 $<A,R>$ 是有序集，且 $B\subset A$ 若 $A$ 中最长的链 $T$ 基数为 $n$ 则 $A$ 可划分为 $n$ 个单元，

每个单元都是一个[[MK187][反链]]

***** 前段<<MK385>>

若 $<S,\leq>$ 为[[MK193][全序集]]，任意 $T$ 满足：

（1） $T\subset S$

（2） $\forall (u,v)\subset S\land u\leq v$ 若 $v\in T$ 则有 $u\in T$

即对于给定的 $v\in S\rightarrow T=\left\{u\big|u\in S,u\leq v\right\}$ ，则称 $T$ 为 $S$ 的前段

当 $T\ne S$ 时称 $T$ 为 $S$ 的真前段

****** 推论<<MK382>>

设 $<S,\leq>$ 为[[MK193][全序集]]，若 $T=\{a\}$ 其中 $a$ 是 $S$ 的[[MK186][最小元]]，则 $T$ 为 $S$ 的前段

******* 证明

定义 $T=\{a\}$ 由于[[MK193][全序集]]，故满足[[MK168][自反性]]即有 $a\leq a$ 又由于 $a$ 是 $S$ 的最小元

故 $\forall c\in S\rightarrow a\leq c$

****** 定理1<<MK459>>

若 $<X,\leq>$ 是 $<Y,\leq>$ 的[[MK385][前段]]，则 $X$ 中有[[MK196][最小元]] $x$ 的充要条件是 $Y$ 中亦有[[MK196][最小元]] $x$

******* 证明

******** 充分

若 $X$ 中有[[MK196][最小元]] $x$ ，由于是前段，故有 $X\subset Y$ 假设存在 $y\in Y$ 满足 $y\leq x$

则根据[[MK385][前段]]定义有 $y\in X$ ，则 $x$ 不为最小元，与题目定义矛盾，故假设不成立

由于是[[MK385][前段]]，则 $<Y,\leq>$ 为[[MK193][全序集]]，则对于任意 $y\in Y$ 均有 $x\leq y\lor y\leq x$

由于假设不成立，故 $y\not\leq x$ 即有 $x\leq y$ ，故 $x$ 亦为 $Y$ 的[[MK196][最小元]]
 
******** 必要

若 $Y$ 中有[[MK196][最小元]] $x$ ，则由于 $X\subset Y$ 显然 $x$ 亦为 $X$ 的[[MK196][最小元]]

****** 定理2<<MK460>>

若 $<X,\leq>$ 是 $<Y,\leq>$ 的[[MK385][前段]]且 $U\cap X\ne\varnothing$ 则有 $<X\cap U,\leq>$ 是 $<Y\cap U,\leq>$ 的[[MK385][前段]]

******* 证明

由于是前段，故有 $X\subset Y$ 则显然有 $X\cap U\subset Y\cap U$

对于任意 $\{u,v\}\subset Y\cap U$ 且 $v\in X\cap U\land u\leq v$

则由于 $v\in X\cap U$ 有 $v\in X$ ，由于 $\{u,v\}\subset Y\cap U$ 则有 $u\in Y$ 以及 $u\in U$

由于 $u\leq v$ 以及 $<X,\leq>$ 是 $<Y,\leq>$ 的[[MK385][前段]]可得 $u\in X$ 进而 $u\in X\cap U$

综上所述，对于任意 $\{u,v\}\subset Y\cap U$ 且 $v\in X\cap U\land u\leq v$ 均有 $u\in X\cap U$

即 $<X\cap U,\leq>$ 是 $<Y\cap U,\leq>$ 的[[MK385][前段]]

**** 基于偏序的序关系

***** 全序关系<<MK193>>

若[[MK185][偏序集]] $(P,\leq)$ 中任意两个元素 $(a,b)\subset P$ 至少成立 $a\leq b,b\leq a$ 中的一个

则称 $<P,\leq>$ 为全序集

***** 良序关系<<MK384>>

集合 $S$ 上的二元关系 $\leq$ 满足：

（1） $<S,\leq>$ 为[[MK193][全序集]]

（2） 任意非空子集 $T\subset S$ 都有[[MK186][最小元]]

满足此定义的集合与偏序关系称为良序集，记作 $<S,\leq>$

****** 定理<<MK458>>

良序集的子集亦为良序集

******* 证明

若 $<S,\leq>$ 是[[MK384][良序集]]，有 $L\subset S$

则对于任意 $\{a,b\}\subset L$ 均有 $\{a,b\}\subset S$ 故有 $a\leq b\lor b\leq a$ 则 $<L,\leq>$ 为[[MK193][全序集]]

对于任意 $K\subset L$ 均有 $K\subset S$ 故 $K$ 中有最小元，故 $<L,\leq>$ 是[[MK384][良序集]]

**** 相关定理

***** 定理1<<MK389>>

若[[MK185][偏序集]] $<P,\leq>$ 中存在[[MK384][良序集]] $<S,\leq>$ 满足 $S\subset P$ 且有[[MK326][上界]] $b\in P,b\not\in S$

则有 $S\cup \{b\}$ 亦为良序集

****** 证明

由于 $<S,\leq>$ 是[[MK384][良序集]]，故 $<S,\leq>$ 为[[MK193][全序集]] $\forall \{u,v\}\subset S\Rightarrow u\leq v\lor v\leq u$

根据[[MK326][上界]]定义有 $\forall a\in S\Rightarrow a\leq b$ 故显然 $<S\cup\{b\},\leq>$ 仍为[[MK193][全序集]]

则对于任意 $U'\subset S\cup\{b\}$ 取 $U=U'\cap S$ 由于 $S$ 良序集，故对于任意子集 $U\subset S$ 存在[[MK196][最小元]] $p$

若 $a\in U'\land a\ne p$ ，若 $a\ne b$ 则 $a\in U$ 若 $a=b$ 则由于是上界，故有 $p\leq b$

即 $p$ 是 $U'$ 的[[MK196][最小元]]综上所述 $S\cup\{b\}$ 亦为良序集

***** 定理2<<MK383>>

对于任意[[MK193][偏序集]] $<P,\leq>$ 定义集合 $C$ 如下 

（1） $\forall S\in C$ 满足 $S\subset P$ 且 $<S,\leq>$ 是[[MK384][良序集]]

（2） $\forall \{X,Y\}\subset C$ 满足 $X$ 是 $Y$ 的[[MK385][前段]]或 $Y$ 是 $X$ 的[[MK385][前段]]

则有 $<\bigcup_{X\in C} X,\leq>$ 也是[[MK384][良序集]]

****** 证明

******* 并集为全序集

首先证明是全序集，设 $(x,y)\subset\bigcup_{Z\in C} Z$ 则必有 $x\in X\in C,y\in Y\in C$ 

则必满足 $X$ 是 $Y$ 的[[MK385][前段]]，或 $Y$ 是 $X$ 的[[MK385][前段]]其一，这里假设 $X$ 是 $Y$ 的前段

则有 $X\subset Y$ 故得 $\{x,y\}\subset Y$ 由于 $<Y,\leq>$ 是[[MK384][良序集]]，故必为[[MK193][全序集]]

故必满足 $x\leq y,y\leq x$ 其一，故 $\bigcup_{Z\in C} Z$ 为[[MK193][全序集]]

******* 任意子集都有[[MK196][最小元]]

对于任意 $U\subset\bigcup_{Z\in C} Z$ 任取 $u_0\in U$ 则存在一个 $S_0\in C$ 使得 $u_0\in S_0$

定义 $T_0=S_0\cap U$ 则有 $T_0\subset S_0$ 故 $T_0$ 存在[[MK196][最小元]]，记作 $u^*$

对于任意 $u_1\in U$ 同理必有 $u_1\in S_1$ 定义 $T_1=S_1\cap U$

根据 $C$ 的定义，必有 $S_0,S_1$ 中某个必为另一个的[[MK385][前段]]

假设 $S_0$ 为 $S_1$ 的[[MK385][前段]]，则根据[[MK460][定理]]可得 $T_0$ 是 $T_1$ 的[[MK385][前段]]

故若 $u_1\leq u_0$ 则有 $u_1\in T_0$ ，进一步有 $u^*\leq u_1$ 若 $u_0\leq u_1$ 则根据[[MK172][传递性]] $u^*\leq u_0\leq u$

反之若 $S_1$ 为 $S_0$ 的[[MK385][前段]]，则同理可证 $T_1=U\cap S_1$ 是 $T_0=U\cap S_0$ 的[[MK385][前段]]

根据[[MK459][定理]]可得 $T_1$ 中的最小元亦为 $u^*$ ，故必有 $u^*\leq u_1$

综上所述，对于任意 $U\subset\bigcup_{Z\in C} Z$ 均存在 $u^*\in U$ 满足对于任意 $u_1\in U$ 均有 $u^*\leq u_1$

***** 佐恩引理<<MK390>>

若非空偏序集 $<P,\leq>$ 的每条[[MK386][链]]都有[[MK326][上界]]，则 $P$ 中存在[[MK186][极大元]]

****** 证明

******* 反证假设<<MK387>>

对于非空偏序集 $<P,\leq>$ 假设命题不成立，即全序子集有上界，但 $P$ 中不存在[[MK186][极大元]]，即满足

（1） 对于任意[[MK193][全序集]] $<S,\leq>$ 满足 $S\subset P$ 均有上界，即 $\exists b\in P,\forall a\in S\Rightarrow a\leq b$

（2） $\forall x\in P,\exists b\in P\Rightarrow x\leq b$

其中（1）是给定条件，（2）是假设。于是对于任意给定元素 $p\in P$ 做以下推导从而推出矛盾

******* 定义集合 $B(S)$

定义 $S\subset P$ 是 $P$ 的[[MK193][全序集]]，则根[[MK387][据命题（1）]]必有 $p\in P$ 是 $S$ 的上界，即 $\forall a\in S\Rightarrow a\leq p$

对于任意全序子集 $<S,\leq>$ 定义集合 $B(S)=\left\{p\bit|p\in P-S\land\forall a\in S\Rightarrow a\leq p\right\}$

根据[[MK387][命题（2）]]必有 $p'\in P\Rightarrow p\leq p'$ 则根据[[MK172][传递性]] $\forall a\in S\Rightarrow a\leq p\leq p'$

又由于 $p$ 是 $S$ 的上界，故必有 $p'\not\in S$ 即 $p'\in B(S)$ 故 $B(S)\ne\varnothing$

******* 定义函数 $\phi(S)$

对于的[[MK193][全序子集]] $<S,\leq>$ 有对应的集合 $B(S)$ 必为非空集合

故由于[[MK10][选择公理]]可知存在选择函数 $\psi(B(S))\in B(S)$ 则定义 $\phi(S)=\psi(B(S))$ 显然满足 $\phi(S)\in B(S)$

根据 $B(S)$ 的定义有 $\forall s\in S\rightarrow s\leq\phi(S)$

******* 定义集合 $C$ <<MK388>>

对于任意给定的元素 $p_0\in P$ ，定义集合 $C$ ，其中的元素是所有满足以下条件的 $S\subset P$ 

（1） $S$ 是[[MK384][良序集]]

（2） [[MK186][最小元]]为 $p_0$

（3） 若 $T\subset S$ 是[[MK193][全序子集]]的非空[[MK385][真前段]]，则 $S-T$ 的[[MK186][最小元]]为 $\phi(T)$

首先推断 $C\ne\varnothing$ ，定义 $\{p_1\}=\phi(\{p_0\}),\phi(\{p_0,p_1\})=p_2$ 定义 $S_3=\{p_0,p_1,p_2\}$ 显然 $<S,\leq>$ 是[[MK384][良序集]]

且最小元为 $p$ ，$S$ 的真前段有且仅有 $\{p_0\},\{p_0,p_1\}$ 显然 $S-T$ 的最小元为 $\phi(T)$ ，故满足条件。

显然对于任意 $S_n=\{p_0,...,p_n\}$ 若 $S_n\in C$ 则定义 $S_{n+1}=\{p_0,...,p_n,\phi(S_n)\}$ 易证 $S_{n+1}\in C$

则根据数学归纳法，对于任意 $S_n,n\geq3$ 均有 $S_n\in C$

******* 证明 $C$ 中任意两个元素其中一个为另一个的前段

若 $S,S'\in P$ 定义 $R$ 为最大的 $S,S'$ 的共有[[MK385][前段]]，由[[MK388][ $C$ 的定义]]可得 $p_0\in S\cap S'$

根据[[MK382][推论]]可得 $\{p_0\}$ 是 $S,S'$ 的公共前段，故 $R\ne\varnothing$ 。若 $R$ 为真前段，则有 $\phi(R)\in S-R,\phi(R)\in S'-R$

且 $\phi(R)$ 为 $S-R,S'-R$ 的[[MK26][最小元素]]，则 $R\cup \phi(R)$ 亦为 $S,S'$ 的共有[[MK29][前段]]，与 $R$ 定义冲突。

故 $R$ 必定等于其中一个，即 $S$ 是 $S'$ 的前段，或者 $S'$ 是 $S$ 的前段必成立其一。

******* 定义并集 $U$

定义 $U$ 为所有 $C$ 中所有元素的并集，根据以下三步证明可知 $U$ 亦满足 $C$ 的定义，故 $U\in C$

******** 证明良序

根据[[MK383][定理2]]可得 $<U,\leq>$ 亦是[[MK384][良序集]]

******** 证明最小元是 $p_0$

对于任意 $x\in U$ 根据定义必有 $S\subset U$ 满足 $x\in S\land S\in C$

由于对于任意 $S\in C$ 均有 $p_0$ 是 $S$ 的最小元，则有 $p_0\leq x$

******** 证明若 $T\subset U$ 是非空[[MK385][真前段]]，则 $U-T$ 的[[MK186][最小元]]为 $\phi(T)$

若 $T$ 为 $U$ 的非空[[MK385][真前段]]，则 $U-T$ 非空，则对于某个 $u\in U-T$ 必然存在 $S\in C\Rightarrow u\in S$

由于 $U$ 良序，故必为全序，故对于任意 $t\in T$ 必存在 $t$ 与 $u$ 的偏序关系

由于前段的定义以及 $u\not\in T$ 故得 $t\leq u$

且由于 $\forall t\in T\subset U$ 则必有 $\exists S'\in C\Rightarrow t\in S'$ 根据 $C$ 的定义 $S,S'$ 其中一个必为另一个的[[MK29][前段]]

无论哪种情况，必有 $t\in S$ 故有 $\forall t\in T\rightarrow t\in S$ 故有 $T\subset S$

另外若 $\forall (a,b)\subset S$ 若满足 $a\leq b,b\in T$ 则根据 $T$ 为 $U$ 的[[MK29][前段]]有 $a\leq b$ 故 $a\in T$

故 $T$ 满足 $T\subset S$ 及 $\forall (a,b)\subset S,a\leq b,b\in T\Rightarrow a\in T$ 

故 $T$ 亦为 $S$ 的[[MK29][前段]]，故 $S-T$ 的[[MK26][最小元素]]为 $\phi(T)$

且根据定义 $\forall S\in C\land T\subset S$ 其 $S-T$ 的最小元素为 $\phi(T)$

根据 $U$ 的定义可得 $U-T$ 的最小元素亦为 $\phi(T)$

******* 推导矛盾

由于 $U$ 是良序，故为全序。则根据条件 $U$ 有上界，且 $P$ 无[[MK186][极大元]]则 $\phi(U)$ 必不为空集，定义 $\{b\}=\phi(U)$

由于 $<U,\leq>$ 是全续集，及选择函数定义有 $\forall u\in U,u\leq b$ 且 $b\not\in U$ 故：

（1） 根据[[MK389][定理1]]可得 $<U\cup\{b\},\leq>$ 亦为良序集

（2） 亦有 $\forall u\in U\cup\{b\}\Rightarrow p_0\leq u$

（3） 若 $T\subset U\cup \{b\}$ 为非空[[MK385][真前段]]，则 $U-T$ 的[[MK186][最小元]]为 $\phi(T)$

故 $U\cup\phi(U)$ 亦为满足条件 $C$ 的元素，这与 $U$ 的定义矛盾，故[[MK387][假设]]不成立，即 $<P,\leq>$ 中有最大元

*** 拟序关系<<MK188>>

定义集合 $A$ 若：

（1） $R$ 是 $A$ 上的[[MK155][二元关系]]，即 $R\subset A\times A$

（2） $R$ 具有[[MK169][反自反性]]、[[MK171][反对称性]]以及[[MK172][传递性]]，即 $\lnot xRx,xRy\land yRx\rightarrow x=y, xRy\land xRz\rightarrow xRz$

则称 $R$ 为 $A$ 上的拟序关系，且 $A$ 称为有拟序集，记作 $<A,R>$

**** 推论

非空集合 $A$ 上的拟序关系 $R$ 必然有[[MK171][反对称性]]

***** 证明

假设 $\{x,y\}\subset A$ 有 $xRy,yRx$ 且有 $x\ne y$ ，即不满足反对称性

则根据[[MK172][传递性]]有 $xRy\land yRx\rightarrow xRx$ 与[[MK169][反自反性]]矛盾。

故满足反对称性。

**** 元<<MK189>>

若 $<A,<>$ 是拟序集，且 $B\subset A$ 则 $b$ 是：

$B$ 的最小元： $b\in B\land\forall x(x\in B\rightarrow b< x)$

$B$ 的最大元： $b\in B\land\forall x(x\in B\rightarrow x<b)$

$B$ 的极小元： $b\in B\land\lnot\exists x(x\in B\land x< b)$ 

$B$ 的极大元： $b\in B\land\lnot\exists x(x\in B\land b<x)$ 

***** 定理<<MK190>>

（1） $B$ 的最大（小）元必为 $B$ 的极大（小）元

（2） 如果 $B$ 有最大（小）元，则它是唯一的

（3） 如果 $B$ 是有限集，则B的极大（小）元恒存在

（3） 最大（小）元未必存在，存在则唯一

（4） 极大（小）元对有限集必然存在，未必唯一

**** 排列<<MK191>>

若 $<A,<>$ 是拟序集，存在有序组 $<a_1,...,a_n>$ 满足：

（1） $|A|=n<\infty$

（2） $a_i<a_{i+1}$

（3） $a_i\in A$

则定义 $a_1<...<a_n$ 为 $A$ 基于 $<$ 排列

***** 定理<<MK192>>

对于拟序集 $<A,\prec>$ ：

（1） 每一个 $a_i\in A$ 排列 $a_1<...<a_n$ 正好出现一次

（2） 排列唯一

****** 证明

根据定义 $A$ 有基于 $\prec$ 的排列 $\delta_1\prec...\prec\delta_k$ 即有有序组 $r=<\delta_1,...,\delta_k>$ 满足 $\delta_i\prec\delta_{i+1}$

******* （1）

由于是[[MK188][拟序关系]]，则对于任意 $i\ne j\land i<j$ 根据 $\delta_i\prec...\prec\delta_j$ 以及[[MK172][传递性]]有 $\delta_i\prec\delta_j$

则根据[[MK169][反自反性]]有 $\delta_i\ne\delta_j$ 同理有 $\delta'_i\ne\delta'_j$ 由于 $k=|A|=|r|$ 

故根据鸽笼原理，每一个 $A$ 中的元素在 $r$ 上正好出现一次

******* （2）

根据定义 $A$ 有基于 $\prec$ 的排列 $\delta_1\prec...\prec\delta_k$ 即有有序组 $r=<\delta_1,...,\delta_k>$ 满足 $\delta_i\prec\delta_{i+1}$

假设存在有序组 $r'=<\delta'_1,...,\delta'_k>\ne r$ 亦满足 $\delta'_i\prec\delta'_{i+1}$ 则至少存在一个 $\delta_i\ne\delta'_i$ 假设 $\delta_k\ne\delta'_k$

根据（1）每一个 $A$ 中的元素在 $r,r'$ 上正好出现一次

故必有 $\delta'_{k'}$ 与 $\delta'_k$ 互换位置，则在 $r$ 中若有 $\delta’_k\prec...\prec\delta'_{k'}$ 则在 $r'$ 中有 $\delta’_{k‘}\prec...\prec\delta'_{k}$

进一步根据传递性有 $\delta’_k\prec\delta'_{k'}$ 以及 $\delta’_{k'}\prec\delta'_{k}$ 与[[MK171][反对称性]]矛盾，则假设不成立

即不存在 $r'$

** 序数

集合 $X$ 满足：

（1） $\forall a\in X\rightarrow a\subset X$ 即是[[MK461][传递集]]

（2） 任意 $u\in X\land v\in X$ 有 $u\in v, v\in u, u=v$ 三者有且仅有一个成立

（3） 任意 $Y\subset X\land Y\ne\varnothing$ 均有 $z\in Y$ 满足 $z\cap Y=\varnothing$

则称 $X$ 为序数

$z\in Y\rightarrow z\in X\rightarrow z\subset X\rightarrow z\cap X=z$ 

** 函数（映射）

*** 相关定义

**** 函数（映射）定义<<MK194>>

如果 $X,Y$ 为集合 $f\subset X\times Y$ 是[[MK155][二元关系]]，若：

（1） $\forall x(x\in X\rightarrow\exists y(<x,y>\in f))$ 

（2） $\forall y_1\forall y_2(<x,y_1>\in f\land <x,y_2>\in f\rightarrow y_1=y_2)$

则称 $f$ 是 $X$ 到 $Y$ 上的函数

当 $X=X_1\times...\times X_n$ 时 $f$ 称为 $n$ 元函数

记作 $f:X\rightarrow Y$ 特别的当 $<x,y>\in f$ 时可表示为 $y=f(x)$ 此时 $x$ 成为自变量 $y$ 成为因变量

基于上述定义，进一步对于任意 $Z\subset X$ 定义 $f(Z)=\left\{f(x)\big|x\in Z\right\}$

***** 推论1

若 $X,Y$ 的[[MK3][基数]]为 $|X|=m,|Y|=n$ 则可能的函数个数为 $n^m$

****** 证明

定义 $f:X\rightarrow Y$ ，则定义，对于任意一个 $x\in X$ 均有唯一的关系 $<x,y>\in f$

故必然有且仅有 $|X|$ 个元素属于 $f$ ，每个元素可从 $Y$ 中选择一个元素作为对应。

故若 $|X|=m,|Y|=n$ ，则最终有 $n^m$

***** 推论2

若集合 $X=X_1\times...\times X_n,\ Y=Y_1\times...\times Y_m$ 则同理可定义多元函数 $f\in X\times Y$ 满足：

（1） $\forall x(x\in X\rightarrow\exists y(<x,y>\in f))$ 

（2） $\forall y_1\forall y_2(<x,y_1>\in f\land <x,y_2>\in f\rightarrow y_1=y_2)$

此时可记作 $f(x_1,...,x_n)=[y_1,...,y_m]$

**** 函数的相等

若 $f:A\rightarrow B,g:C\rightarrow D$ 是两个函数，若：

（1） $A=C\land B=D$

（2） $\forall x(x\in A\rightarrow f(x)=g(x))$

则称两函数相等 $f=g$ 

**** 函数的包含

若 $f:A\rightarrow B,g:C\rightarrow D$ 是两个函数，若：

（1） $A\subset C\land B=D$

（2） $\forall x(x\in A\rightarrow f(x)=g(x))$

则称两函数相等 $f\subset g$ 

**** 子集的映像（值域）

***** 定义

若 $f:A\rightarrow B,A\subset B$ 则将 $f(A)$ 称作 $A$ 的映像，定义为 $f(A)=\left\{y\big|x\in A\land y=f(x)\right\}$

***** 性质

\begin{aligned}
f(A\cup B)&=f(A)\cup f(B)\\
f(A\cap B)&\subset f(A)\cap f(B)\\
f(A)-f(B)&\subset f(A-B)\\
\end{aligned}

****** 证明

仅证 $f'(A\cup B)=f'(A)\cup f'(B)$ 

根据[[MK76][结合律]]，[[MK30][并运算]]以及[[MK91][替换原理]]，对于任意 $y$

\begin{aligned}
&y\in f'(A\cup B)\\
{|\!\!\!=\!\!\!|}&x\in A\cup B\land y=f(x)\\
{|\!\!\!=\!\!\!|}&(x\in A\lor x\in B)\land y=f(x)\\
{|\!\!\!=\!\!\!|}&(x\in A\land y=f(x))\lor(x\in B\land y=f(x))\\
{|\!\!\!=\!\!\!|}&y\in f'(A)\lor y\in f'(B)\\
{|\!\!\!=\!\!\!|}&y\in f'(A)\cup f'(B)\\
\end{aligned}

故根据[[MK5][外延公理]]可得 $f'(A\cup B)=f'(A)\cup f'(B)$ 

*** 特殊的函数类型

**** 单射<<MK195>>

若 $f$ 是 $X$ 到 $Y$ 上的函数，对于任意 $\{x_1,x_2\}\subset X\land x_1\ne x_2$ 均有 $f(x_1)\ne f(x_2)$ 则称 $f$ 为单射函数

***** 传递性<<MK196>>

若 $N,A,B$ 为集合，存在单射函数 $\Phi:N\rightarrow B$ 和 $\Psi:B\rightarrow A$ 则[[MK202][复合函数]] $P:A\rightarrow B$ 亦为单射函数

****** 证明

根据[[MK202][函数合成]]，合成映射 $P:N\rightarrow B\rightarrow A$ 亦为[[MK194][函数]]

根据定义：

（1） 对于任意 $\{x_1,x_2\}\subset N\land x_1\ne x_2$ 均有 $\Phi(x_1)\ne \Phi(x_2)$ 且 $\{\Phi(x_1),\Phi(x_1)\}\subset B$

（2） 对于任意 $\{\Phi(x_1),\Phi(x_2)\}\subset B\land \Phi(x_1)\ne\Phi(x_2)$ 均有 $\Psi(\Phi(x_1))\ne\Psi(\Phi(x_2))$ 

     且 $\{\Psi(\Phi(x_1)),\Psi(\Phi(x_2))\}\subset A$ 

故对于任意 $\{x_1,x_2\}\subset N$ 均有 $\Psi(\Phi(x_1))\ne\Psi(\Phi(x_2))$ 且 $\{\Psi(\Phi(x_1)),\Psi(\Phi(x_2))\}\subset A$ 

故 $P$ 亦为单射函数

***** 蕴含双射<<MK197>>

若 $f$ 是 $X$ 到 $Y$ 上的单射函数的充要条件是存在 $S\subset Y$ 使得 $f:X\to S$ 为双射

****** 证明

******* 充分

由于 $f$ 是[[MK194][函数]]，故对于任意 $x\in X$ 均有 $f(x)\in Y$

则根据[[MK9][分离公理模式]]定义集合 $S=\left\{y\big|\exists x\in X\rightarrow f(x)\in Y\right\}$

则由定义可知 $S$ 对于函数 $f:X\to S$ 满足[[MK198][满射]]，故其为[[MK200][双射]]

******* 必要

显然。

**** 满射<<MK198>>

若 $f$ 是 $X$ 到 $Y$ 上的函数满足 $\forall y(y\in Y\rightarrow\exists x(x\in X\land y=f(x)))$ 则称为满射函数

***** 传递性<<MK199>>

若 $N,A,B$ 为集合，存在满射函数 $\Phi:N\rightarrow B$ 和 $\Psi:B\rightarrow A$ 则[[MK202][复合函数]] $P:A\rightarrow B$ 亦为满射函数

****** 证明

根据[[MK202][函数合成]]，合成映射 $P:N\rightarrow B\rightarrow A$ 亦为[[MK194][函数]]

根据定义：

（1） 对于任意 $y_1\in B$ 均有 $x\in N\land \Phi(x)=y$

（2） 对于任意 $y_2\in A$ 均有 $y_1\in B\land\Psi(y_1)=y_2$ 

故对于任意 $y_2\in A$ 均有 $x\in N\land \Psi(\Phi(x))=y_2$ 

故 $P$ 亦为满射函数

**** 双射<<MK200>>

若 $f$ 是 $X$ 到 $Y$ 上的函数，且 $f$ 既是[[MK195][单射函数]]又是[[MK198][满射函数]]，则称为双射函数，即一一对应。

***** 传递性<<MK201>>

若 $N,A,B$ 为集合，存在双射函数 $\Phi:A\rightarrow N$ 和 $\Psi:N\rightarrow B$ 则[[MK202][复合函数]] $P=\Phi\cdot\Psi:A\rightarrow B$ 亦为双射函数

****** 证明

根据[[MK196][单射传递性]]和[[MK199][满射传递性]]可得双射亦传递

***** 并双射<<MK350>>

定义 $\phi_i:A_i\to B_i$ 是双射函数，则 $\phi=\bigcup_{i=1}^\infty\phi_i$ 以为双射函数

****** 证明

对于任意 $\{x,y\}\subset\bigcup_{i=1}^\infty A_i$ 根据[[MK34][广义并定义]]必有 $x\in A_i,y\in A_j$

则根据 $\{A_n\}$ 互不相交有 $x\ne y$ ，则有 $\phi(x)\in B_i,\phi(y)\in B_j$

若 $i\ne j$ 则根据 $\{B_n\}$ 互不相 有 $\phi(x)\ne\phi(y)$

若 $i=j\land x\ne y$ 则根据 $\phi_i$ 是双射可得 $\phi_i(x)\ne\phi_i(y)$ 故 $\phi$ 是[[MK195][单射]]

又由于对于任意 $y\in\bigcup_{i=1}^\infty B_i$ 有 $y\in B_i$ 则由于 $\phi_i$ 是双射，故存在 $x\in A_i$ 满足 $\phi_i(x)=y$

即 $\phi$ 是[[MK198][满射]]，则 $\phi$ 是[[MK200][双射]]

***** 子双射<<MK351>>

定义 $\phi:A\to B$ 是双射函数，对于任意 $C\subset A$ 定义 $\phi'=\left\{<x,y>\big|<x,y>\in\phi\land x\in C\right\}$

则有 $\phi'$ 仍为双射函数

****** 证明

假设 $\phi'$ 不是[[MK198][满射]]，则存在 $y\in\phi(C)$ 使得 $\forall x\in C\rightarrow \phi'(x)\ne y$

又由于 $\phi$ 是双射，则存在 $x\in A$ 使得 $\phi(x)=y$ 若 $x\not\in C$ 则与 $\phi'$ 定义矛盾

故假设不成里 $\phi'$ 是满射

假设 $\phi'$ 不是[[MK195][单射]]，则存在 $\{x_1,x_2\}\subset C$ 使得 $\phi'(x_1)=\phi'(x_2)=y$

则根据 $\phi'$ 定义则有 $\phi(x_1)=\phi(x_2)=y$ 与 $\phi$ 是双射矛盾，假设不成立

综上所术 $\phi'$ 亦为双射

***** 相分离<<MK356>>

定义 $\phi:A\to B$ 是双射函数，若 $A=\bigcup_{i=1}^\infty A_i$ 且 $A_i$ 互不相交

则有 $B=\bigcup_{i=1}^\infty\phi(A_i)$

****** 证明

对于任意 $b\in\bigcup_{i=1}^\infty\phi(A_i)$ 可得 $b\in\phi(A_i)$ 即存在 $a\in A_i\rightarrow \phi(a)=b\in B$

则 $B\subset\bigcup_{i=1}^\infty\phi(A_i)$ 又由于任意 $a\in A$ 均有 $\phi(a)\in B$ 故有 $\bigcup_{i=1}^\infty\phi(A_i)\subset B$

故根据[[MK21][自反性]]可得 $B=\bigcup_{i=1}^\infty\phi(A_i)$

*** 函数的计算

**** 函数的复合<<MK202>>

若 $f:X\rightarrow Y,g:Y\rightarrow Z$ 是两个函数，则其[[MK162][合成关系]] $f\cdot g:X\to Z$ 亦为函数

当 $<x,z>\in f\cdot g$ 时记作 $z=g(f(x))$

***** 证明

对于任意 $x\in X$ 根据[[MK194][函数定义]]有对应的 $y\in Y$ 使得 $<x,y>\in f$ 同理有 $<y,z>\in g$ 故有 $<x,z>\in f\cdot g$

即 $\forall x(x\in X\rightarrow\exists z(<x,z>\in f\cdot g))$

若 $z_1,z_2$ 满足 $\{<x,z_1>,<x,z_2>\}\subset f\cdot g$ 则根据[[MK162][合成关系]]定义存在 $\{<x,y_1>,<x,y_2>\}\subset Y$

根据[[MK194][函数定义]]有 $y_1=y_2$ 同理亦有 $z_1=z_2$ 即 $\forall z_1\forall z_2(<x,z_1>\in f\cdot g\land <x,z_2>\in f\cdot g\rightarrow z_1=z_2)$

故 $f\cdot z$ 亦为函数

**** 函数求逆<<MK203>>

若 $f$ 是 $X$ 到 $Y$ 上的函数， $f$ 的[[MK161][逆]]记作 $f^{-1}$

则 $f^{-1}$ 为[[MK194][函数]]的充要条件为 $f$ 是[[MK200][双射函数]]，此时 $f^{-1}$ 称为 $f$ 的逆函数

***** 证明

****** 充分

若 $f$ 是双射函数，则一一对应，故逆函数存在

****** 必要

若 $f$ 存在逆函数，则若 $f$ 不是[[MK198][满射]]，则存在 $y\in Y$ 使得 $\forall x(<x,y>\not\in f)$

即 $\exists y(\forall x(<y,x>\not\in f^{-1}))$ 则不满足[[MK194][函数定义]]中第一条

若 $f$ 不是[[MK195][单射]]，则存在 $x_1\ne x_2$ 使得 $<x_1,y>\in f\land<x_2,y>\in f$

则有 $<y,x_1>\in f\sim\land<y,x_2>\in f\sim\land x_1\ne x_2$ 则不满足[[MK194][函数定义]]中第二条

故 $f$ 必为[[MK200][双射函数]]，否则 $f\sim$ 不是函数

***** 双射性质

****** 性质1<<MK204>>

\begin{aligned}
\left(f^{-1}\right)^{-1}&=f\\
f^{-1}\cdot f&=E_X\\
f\cdot f^{-1}&=E_Y\\
(g\cdot f)^{-1}&=f^{-1}\cdot g^{-1}\\
\end{aligned}

******* 证明

仅证 $(f\cdot g)^{-1}=g^{-1}\cdot f^{-1}$ 定义 $f:X\rightarrow Y,g:Y\rightarrow Z$ 是两个[[MK200][双射函数]]

根据[[MK203][逆函数定义]]，[[MK75][交换律]]以及[[MK91][替换原理]]可得对于任意 $<z,x>\in (f\cdot g)^{-1}$ 均有

\begin{aligned}
&<z,x>\in(f\cdot g)^{-1}\\
{|\!\!\!=\!\!\!|}&<z,x>\in(f\cdot g)\sim\\
{|\!\!\!=\!\!\!|}&<x,z>\in(f\cdot g)\\
{|\!\!\!=\!\!\!|}&x\in X\land z\in Z\land\exists y(y\in Y\land <x,y>\in f\land <y,z>\in g)\\
{|\!\!\!=\!\!\!|}&z\in Z\land x\in X\land\exists y(y\in Y\land <x,y>\in f\sim \land <y,z>\in g\sim)\\
{|\!\!\!=\!\!\!|}&z\in Z\land x\in X\land\exists y(y\in Y\land <x,y>\in f^{-1} \land <y,z>\in g^{-1})\\
{|\!\!\!=\!\!\!|}&<z,y>\in f^{-1}\cdot g^{-1}\\
\end{aligned}

即 $\forall z\forall x\left(<z,x>\in(g\cdot f)^{-1}{|\!\!\!=\!\!\!|}<z,x>\in f^{-1}\cdot g^{-1}\right)$ 由于函数是[[MK155][二元关系]]，故仅包含 $<a,b>$ 项

故即任意 $\forall L\left(L\in(f\cdot g)^{-1}{|\!\!\!=\!\!\!|}L\in f^{-1}\cdot g^{-1}\right)$ ，则根据[[MK5][外延公理]]可得 $(g\cdot f)^{-1}=f^{-1}\cdot g^{-1}$

****** 性质2<<MK205>>

[[MK200][双射函数]]的逆函数亦为双射

******* 证明

略

***** 非双射定义

****** 左逆<<MK206>>

若 $f:X\rightarrow Y,g:Y\rightarrow X$ 是两个函数且 $f\cdot g=E_X$ 则称 $g$ 是 $f$ 的左逆函数

****** 右逆<<MK207>>

若 $f:X\rightarrow Y,g:Y\rightarrow X$ 是两个函数且 $g\cdot f=E_Y$ 则称 $g$ 是 $f$ 的右逆函数

***** 非双射性质

$f$ 有[[MK206][左逆函数]]当且仅当 $f$ 是[[MK195][单射]]

$f$ 有[[MK207][右逆函数]]当且仅当 $f$ 是[[MK198][满射]]

$f$ 有逆函数当且仅当 $f$ 有[[MK206][左逆函数]] $g$ 和[[MK207][右逆函数]] $h$ ，且 $g=h$

****** 证明

仅证 $f$ 有[[MK207][右逆函数]]当且仅当 $f$ 是[[MK198][满射]]

******* 充分

若 $f$ 有[[MK207][右逆函数]]，则存在 $g:Y\rightarrow X$ 使得 $f\cdot g=E_Y$ 即对于任意 $y\in Y$ 均有 $<y,y>\in f\cdot g$

进一步，即对于任意 $y\in Y$ 均存在唯一 $x\in X$ 使得 $<y,x>\in g\land <x,y>\in f$

故 $\forall y(y\in Y\rightarrow\exists x(x\in X\land y=f(x)))$ 即 $f$ 是[[MK198][满射]]

******* 必要

若 $f$ 是[[MK198][满射]]则构造如下[[MK194][函数]] $g(y)=\begin{cases}x\\x_0\end{cases}$ 其中：

（1） $x$ 是指仅有唯一的 $x$ 使得 $f(x)=y$ 成立 

（2） $x_0$ 是指（1）不成立时，任意一个 $x_0$ 使得 $f(x_0)=y$ 成立

根据[[MK198][满射]]定义 $\forall y(y\in Y\rightarrow\exists x(x\in X\land y=f(x)))$ 故可得对于任意 $y$ 均有上述情况之一

故 $f(x)=y$  $g\cdot f(y)=f(g(y))=y$，故 $g\cdot f=E_Y$

* 命题逻辑

** 命题与命题表达式

*** 符号

**** 逻辑符号（逻辑连词）<<MK56>>

表[[MK55][命题符号]]的逻辑关系，为 $\{(,),\lnot,\to\}$ 具体如下：

***** 否定<<MK57>>

定义符号为 $\lnot$ ，[[MK52][真值]]表：

\begin{tabular}{|l|l|} 
\hline
p & \lnot p\\
\hline
1&0\\
0&1\\
\hline
\end{tabular}

***** 蕴含<<MK60>>

定义符号为 $\to$ ，[[MK52][真值]]表：

\begin{tabular}{|l|l|l|} 
\hline
p & p & p \rightarrow p\\
\hline
0&0&1\\
0&1&1\\
1&0&0\\
1&1&1\\
\hline
\end{tabular}

***** 推导连词<<MK434>>

推导连词可由[[MK57][否定]]与[[MK60][蕴含]]推导所得，故不影响之后定理的证明

****** 合取<<MK58>>

定义符号为 $\land$ ，[[MK52][真值]]表：

\begin{tabular}{|l|l|l|} 
\hline
p & p & p \land p\\
\hline
0&0&0\\
0&1&0\\
1&0&0\\
1&1&1\\
\hline
\end{tabular}

为方便书写，定义连续合取 $(\phi_1\land...\land\phi_n)=(\phi_1\land(\phi_2\land...\land\phi_n))$

******* 推导过程

对于[[MK51][表达式]] $\{s_1,s_2\}\subset\mathcal{L}_0$ 定义表达式 $z=(\lnot(s_1\to(\lnot s_2)))$

则根据[[MK52][表达式真值]]有 $\bar{v}(z)=H_{\lnot}(H_{\to}(H_{\lnot}(\bar{v}(s_1)),H_{\lnot}(\bar{v}(s_2))))$ 根据[[MK403][逻辑函数]]定义可得 $\bar{v}(z)$ 与合取真值相同

****** 析取<<MK59>>

定义符号为 $\lor$ ，[[MK52][真值]]表：

\begin{tabular}{|l|l|l|} 
\hline
p & p & p \lor p\\
\hline
0&0&0\\
0&1&1\\
1&0&1\\
1&1&1\\
\hline
\end{tabular}

为方便书写，定义连续析取 $(\phi_1\lor...\lor\phi_n)=(\phi_1\lor(\phi_2\lor...\lor\phi_n))$

******* 推导过程

对于[[MK51][表达式]] $\{s_1,s_2\}\subset\mathcal{L}_0$ 定义表达式 $z=((\lnot s_1)\to s_2)$

则根据[[MK52][表达式真值]]有 $\bar{v}(z)=H_{\to}(H_{\lnot}(\bar{v}(s_1)),\bar{v}(s_2))$ 根据[[MK403][逻辑函数]]定义可得 $\bar{v}(z)$ 与析取真值相同

****** 双向蕴含<<MK61>>

定义符号为 $\leftrightarrow$ ，[[MK52][真值]]表：

\begin{tabular}{|l|l|l|} 
\hline
p & p & p \leftrightarrow p\\
\hline
0&0&1\\
0&1&0\\
1&0&0\\
1&1&1\\
\hline
\end{tabular}

******* 推导过程

对于[[MK51][表达式]] $\{s_1,s_2\}\subset\mathcal{L}_0$ 定义表达式 $z=((s_1\to s_2)\land(s_2\to s_1))$ 其中 $\land$ 为[[MK58][合取]]

则根据[[MK52][表达式真值]]有 $\bar{v}(z)=H_{\land}(H_{\to}(s_1\to s_2),H_{\to}(s_2\to s_1))$ 根据[[MK403][逻辑函数]]定义可得 $\bar{v}(z)$ 与双向蕴含真值相同

其中 $H_{\land}$ 为合取的[[MK402][逻辑函数]]

***** 逻辑函数<<MK402>>

[[MK57][否定]]函数 $H_{\lnot}:\{T,F\}\to\{T,F\}$ 满足 $H_{\lnot}(T)=F\land H_{\lnot}(F)=T$

[[MK60][蕴含]]函数 $H_{\to}:\{T,F\}\times\{T,F\}\to\{T,F\}$ 满足 $H_{\to}(T,F)=F$

       以及 $H_{\to}(T,T)=H_{\to}(F,F)=H_{\to}(F,T)=T$

[[MK58][合取]]函数 $H_{\land}:\{T,F\}\times\{T,F\}\to\{T,F\}$ 满足 $H_{\land}(T,T)=T$ 以及 $H(T,F)_{\land}=H_{\land}(F,F)=H_{\land}(F,T)=F$

[[MK59][析取]]函数 $H_{\lor}:\{T,F\}\times\{T,F\}\to\{T,F\}$ 满足 $H_{\lor}(T,T)=T$ 以及 $H(T,F)_{\lor}=H_{\lor}(F,F)=H_{\lor}(F,T)=F$

[[MK61][双向蕴含]]函数 $H_{\leftrightarrow}:\{T,F\}\times\{T,F\}\to\{T,F\}$ 满足 $H_{\leftrightarrow}(T,T)=H_{\leftrightarrow}(F,F)=T$

           以及 $H_{\leftrightarrow}(F,T)=H_{\leftrightarrow}(T,F)=T$

**** 原子命题<<MK55>>

[[MK57][逻辑符号]]的操作变量，无法用其他原子命题或逻辑符号的组合表示

为[[MK42][有限集]]，例如 $A=\left\{a_i\big|i\in I\land I\subset\mathbb{N}\right\}$

*** 基本符号集<<MK392>>

定义 $\Sigma=\{\lnot,\to\}\cup A$ 其中 $A$ 为[[MK55][命题符号]]集合

则基本符号集定义为 $\Sigma^*=\bigcup_{i\in\mathbb{N}}\Sigma^i$ 其中 $\Sigma^i$ 是[[MK153][笛卡尔积]]的幂

对于任意 $s=<s_1,...,s_n>\in\Sigma^*$ 根据[[MK151][有序组]]可简化表述为 $s=s_1...s_n$

进一步定义 $s[i]=s_i$ 为有序组 $s$ 上第 $i$ 个元素

**** 性质<<MK416>>

基本符号集 $\Gamma^*$ 是[[MK44][可数集]]

***** 证明

由于[[MK55][原子命题]]是[[MK42][有限集]]，故可得对于任意 $n\in\mathbb{N}$ 有 $\Sigma^i$ 亦为有限集

则根据[[MK49][定理1]]可得 $\Sigma^*=\bigcup_{i\in\mathbb{N}}\Sigma^i$ 是[[MK48][之多可数集]]，显然 $\Sigma^*$ 不是有限集

故可得 $\Sigma^*$ 是可数集

*** 准语言<<MK393>>

对于任意 $L\subset\Sigma^*$ 其中 $\Sigma^*$ 是[[MK392][基本符号基]]，若满足：

（1） $\forall a_i\in A$ 有 $a_i\in L$

（2） $\forall s\in L$ 有 $(\lnot s)=<(,\lnot,s,)>\in L$

（3） $\forall \{s_1,s_2\}\subset L$ 有 $(s_1\to s_2)=<(,s_1,\to,s_2,)>\in L$

则 $L$ 为 $\Sigma$ 的准语言，以符号 $L_0$ 表示，进一步定义 $\Sigma$ 的所有准语言集合为 $\mathcal{L}$

*** 命题语言<<MK394>>

若 $\mathcal{L}_0$ 满足对于任意 $L\in\mathcal{L}$ 均有 $\mathcal{L}_0\subset\mathcal{L}$ 则 $\mathcal{L}_0$ 是命题语言

即所有[[MK393][准语言]]的[[MK30][并]]，以符号 $\mathcal{L}=\bigcap\mathcal{L}_0$ 表示

**** 定理<<MK395>>

$\mathcal{L}_0$ 是 $\Sigma$ 上最小的[[MK393][准语言]]，即 $\mathcal{L}_0=\bigcap_{L\in\mathcal{L}} L$

***** 证明

****** 是准语言

对于任意 $x\in\mathcal{L}$ 均有 $L\in\mathcal{L}_0\rightarrow x\in L$ ，又由于对于任意 $L\in\mathcal{L}_0$ 有 $L$ 是[[MK393][准语言]]，则：

（1） $\forall a_i\in A$ 有 $a_i\in L$ 即有 $a_i\in\mathcal{L}$

（2） $\forall s\in\mathcal{L}$ 有 $s\in L$ ，进一步有 $(\lnot s)\in L$ ，最终有 $(\lnot s)\in\mathcal{L}$

（3） $\forall \{s_1,s_2\}\subset\mathcal{L}$ 有 $\{s_1,s_2\}\subset L$ ，则有 $(s_1\to s_2)\in L$ 即 $(s_1\to s_2)\in\mathcal{L{$   

综上所述 $\mathcal{L}$ 是准语言

****** 是最小准语言

若存在 $L\subset\Sigma^*$ 比 $\mathcal{L}$ 小，即存在 $x\in L$ 满足 $x\not\in\mathcal{L}$ 显然与 $\mathcal{L}$ 定义矛盾

*** 命题表达式<<MK51>>

对于任意 $s\in\mathcal{L}_0$ 称 $s$ 是 $\Sigma$ 上的命题表达式

根据[[MK392][基本符号集]]，对于任意 $s=<s_1,...,s_n>\in\Sigma^*$ 可简化表述为 $s=s_1...s_n$ ，且 $s[i]=s_i$ 为有序组 $s$ 上第 $i$ 个元素

进一步定义 $|s|=|<s_1,...,s_n>|=n$ 为命题表达式的长度

**** 相等<<MK399>>

对于任意 $\{s_1,s_2\}\subset\mathcal{L}_0$ 若满足 $|s_1|=|s_2|\land\forall i<|s_1|\rightarrow s_1[i]=s_2[i]$

则称表达式 $s_1,s_2$ 相等

**** 定理1（可读性）<<MK397>>

任意命题表达式 $s\in\mathcal{L}$ 以下三项中有且仅有一项成立：

（1） 存在 $a_i\in A$ 满足 $s=a_i$ ，其中 $A$ 是[[MK55][命题符号]]

（2） 存在 $\phi\in\mathcal{L}$ 满足 $s=(\lnot \phi)$

（3） 存在 $\{\phi_1,\phi_2\}\subset\mathcal{L}_0$ 满足 $s=(\phi_1\to\phi_2)$

***** 证明

****** 必在三种情况中<<MK396>>

假设存在 $s\in\mathcal{L}_0$ 满足不在三种情况中，则根据[[MK393][准语言定义]]可得 $\mathcal{L}_0-\{s\}$ 亦为准语言

显然与[[MK395][定理]]矛盾，故假设不成立

****** 三种情况互斥

满足条件（1）时 $s[1]=a_i$ 对于任意 $s'$ 满足条件（2）或（3）根据定义必有 $s'[1]=($

满足条件（2）时 $s[2]=\lnot$ 对于任意 $s'$ 满足条件（1）有 $|s'|=1$ 显然不满足，对于任意 $s'=(\phi_1\to\phi_2)$

可得 $\phi_1\in\mathcal{L}_0$ 即 $s[2]=\phi_1[1]$ 根据[[MK396][之前证明]]可得 $\phi_1$ 必在三种情况中，故 $\phi_1[1]$ 仅可能为 $($ 或 $a_i$

综上所述当 $s$ 满足（2）时与其他两种情况互斥

满足条件（3）是由于上述证明可得 $s$ 不可能满足条件（1）（2）

**** 定理2（前缀引理）<<MK399>>

对于任意 $s\in\mathcal{L}_0$ 设 $s=<\sigma_1,...,\sigma_n>$ 其中 $\sigma_i\in\Sigma$ 定义 $s_k=<\sigma_1,...,\sigma_k>,k<n$

则有 $s_k\not\in\mathcal{L}_0$

***** 证明

根据[[MK397][可读性]]有下列情况，分别证明后可得结论

****** $s=a_i$

显然后缀为 $\varnothing$ ，根据[[MK395][定理]]易证 $\varnothing\not\in\mathcal{L}_0$

****** $s=(\lnot\phi)$ 或 $s=(\phi_1\to\phi_2)$

由于是前缀且 $s[1]=($ 则显然 $s_k\ne a_i$ 。又根据[[MK426][定理5]]可得任意 $s_k$ 均有 $s_k[1],s_k[|s_k|]$ 之间 $(,)$ 个数不相等

又根据[[MK426][定理5]]可得任意 $s'\in\mathcal{L}_0$ 不为 $a_i$ 形式的均有 $s'[0],s'[|s'|]$ 之间的 $(,)$ 个数一致

故可得 $s_k\not\in\mathcal{L}_0$

**** 定理3（后缀引理）<<MK430>>

对于任意 $s\in\mathcal{L}_0$ 设 $s=<\sigma_1,...,\sigma_n>$ 其中 $\sigma_i\in\Sigma$ 定义 $s_k=<\sigma_{k},...,\sigma_n>,1<k\leq n$

则有 $s_k\not\in\mathcal{L}_0$

***** 证明

根据[[MK397][可读性]]有下列情况，分别证明后可得结论

****** $s=a_i$

显然后缀为 $\varnothing$ ，根据[[MK395][定理]]易证 $\varnothing\not\in\mathcal{L}_0$

****** $s=(\lnot\phi)$ 或 $s=(\phi_1\to\phi_2)$

由于是后缀且 $s[|s|]=)$ 则显然 $s_k\ne a_i$ 。又根据[[MK426][定理5]]可得任意 $s_k$ 均有 $s_k[0],s_k[|s_k|]$ 之间 $(,)$ 个数不相等

又根据[[MK426][定理5]]可得任意 $s'\in\mathcal{L}_0$ 不为 $a_i$ 形式的均有 $s'[0],s'[|s'|]$ 之间的 $(,)$ 个数一致

故可得 $s_k\not\in\mathcal{L}_0$

**** 定理4（唯一可读性）<<MK402>>

任意命题表达式 $s\in\mathcal{L}_0$ 以下三项中有且仅有一项成立：

（1） 存在唯一的 $a_i\in A$ 满足 $s=a_i$ ，其中 $A$ 是[[MK55][命题符号]]

（2） 存在唯一的 $\phi\in\mathcal{L}$ 满足 $s=(\lnot \phi)$

（3） 存在唯一一组 $\{\phi_1,\phi_2\}\subset\mathcal{L}_0$ 满足 $s=(\phi_1\to\phi_2)$

***** 证明

对于任意 $s\in\mathcal{L}_0$ 时，根据[[MK397][可读性]]定理可得：

（1） 若 $s=a_i$ 显然成立

（2） 若 $s=(\lnot\phi)$ 若存在 $\phi'\ne\phi$ 满足 $s=(\lnot\phi')$ 则根据[[MK399][相等]]定义必有 $\phi'[i]\ne\phi[i]$ 或 $|\phi|\ne|\phi'|$

     若 $|\phi|\ne|\phi'|$ 则显然有 $|(\lnot\phi)|\ne|(\lnot\phi')|$ 显然 $s=(\lnot\phi')$ 不成立

     若 $|\phi|=|\phi'|\land\phi'[i]\ne\phi[i]$ 则有 $s[i+2]=\phi'(i)=\phi[i]$ 显然矛盾，故不成立

（3） 若 $s=(\phi_1\to\phi_2)$ 若存在 $\{\psi_1,\psi_2\}\subset\mathcal{L}_0$ 满足 $s=(\psi_1\to\psi_2)\land(\psi_1\ne\phi_1\lor\psi_2\ne\phi_2)$ 则

     a. 若 $|\phi_1|+|\phi_2|\ne|\psi_1|+|\psi_2|$ 则有 $|(\psi_1\to\psi_2)|\ne|(\phi_1\to\phi_2)|$ 显然不成立

     b. 若 $|\phi_1|=|\phi_2|\land|\psi_1|=|\psi_2|$ 则必有 $\phi_1[i]\ne\psi_1[i]\lor\phi_2[i]\ne\psi_2[i]$

        即有 $s[1+i]\ne s[1+i]\lor s[2+|\phi_2|+i]\nes[2+|\phi_2|+i]$ 显然不可能

     c. 若 $|\phi_1|+|\phi_2|=|\psi_1|+|\psi_2|$ 且 b 不成立，则必有 $\psi_1,\phi_1$ 其中一个是另一个的真前缀

        根据[[MK399][前缀引理]]可得若成立，则必有 $\phi_1\not\in\mathcal{L}_0\lor\psi_1\not\in\mathcal{L}_0$ 显然与[[MK397][可读性]]矛盾

综上所述，对于任意 $s\in\mathcal{L}_0$ 唯一可读性定理成立

**** 定理5<<MK426>>

任意命题表达式 $s\in\mathcal{L}_0$ 根据[[MK397][可读性]]若有形式 $(\lnot\phi)$ 或 $(\phi_1\to\phi_2)$ 则：

（1） $s[1]=($ 和 $s[|s|]=)$ 之间的 $($ 和 $)$ 个数相等

（2） 任意 $s[i],i\ne|s|$ 与 $s[1]$ 之间的 $($ 的个数大于 $)$ 的个数

（3） 任意 $s[i],i\ne1$ 与 $s[|s|]$ 之间的 $($ 的个数小于 $)$ 的个数

***** 证明

根据以下证明，以及任意 $s\in\mathcal{L}_0$ 均有 $|s|<\infty$ 基于数学归纳法证得

****** $|s|$ 最短形式<<MK429>>

当 $\phi,\phi_1,\phi_2$ 是 $(\lnot a_i)$ 或 $(a_i\to a_j)$ 的形式时，则易证 $s=(\lnot\phi)$ 或 $s=(\phi_1\to\phi_2)$

时显然结论（1）（2）（3）均成立

****** 归纳假设

假设对于任意 $s\in\mathcal{L}_0$ 若 $|s|<n$ 则命题成立，满足（1）（2）（3）

****** 长度为 $n$ 时

对于任意 $s\in\mathcal{L}_0$ 若 $|s|=n$ 且 $s$ 不为最短形式时，显然 $|\phi|<n$ 故根据归纳假设 $\phi$ 命题成立

且 $\phi\ne a_i$ ，则有：

由于满足（1）故 $\phi[1],\phi[|\phi|]$ 之间的 $(,)$ 个数相等，设均为 $n$ ，又由于 $\phi[1]=(,\phi[|\phi|]=)$

故 $s[1]=($ 和 $s[|s|]=)$ 之间的 $($ 和 $)$ 个数均为 $n+1$ 即相等

由于满足（2）且显然任意 $s[i]=)\land i\ne|s|$ 均在 $\phi$ 中

若 $i=|s|-1$ 即 $s[i]\to\phi[|\phi|]$ ，则由于（1） $\phi[0],\phi[|\phi|]$ 之间的 $(,)$ 均为 $n$ 显然 $s[0],s[i]$ 之间 $($ 个数比 $)$ 多 $1$

若上述不成立，则根据（2） $\phi[1]$ 之间 $($ 个数大于 $)$ 设为 $m>n$ 显然 $s[1],s[i]$ 之间 $($ 个数为 $m+1$ ， $)$ 仍为 $n$

显然 $m+1>n$ 则命题成立。同理可证（3）
 
*** 子表达式<<MK101>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\phi\in\mathcal{L}_0$ 若对于 $\psi\in\mathcal{L}_0$ 存在 $1\leq n\leq|\phi|$ 满足对于任意 $1\leq i\leq|\psi|$ 均有 $\psi[i]=\phi[n+i]$

则称 $\psi$ 是 $\phi$ 的子表达式

**** 定理1<<MK431>>

任意命题表达式 $s\in\mathcal{L}_0$ 有 $|s|>1$

（1） 任意 $s[i]=($ 有且仅有唯一 $s[j]=),j>i$ 满足 $<s[i],...,s[j]>\in\mathcal{L}_0$ 

（2） 任意 $s[i]=)$ 有且仅有唯一 $s[j]=(,j<i$ 满足 $<s[i],...,s[j]>\in\mathcal{L}_0$ 

***** 证明

根据以下证明，以及任意 $s\in\mathcal{L}_0$ 均有 $|s|<\infty$ 基于数学归纳法证得

****** 一对括号

根据[[MK402][唯一可读]]仅有 $s=(\lnot a_i)$ 或 $s=(a_i\to a_j)$ 两种形式，显然此时（1）（2）满足

****** 归纳假设

对于任意 $s\in\mathcal{L}_0$ 且括号对数小于 $n$ 的命题（1）（2）均成立

****** $n$ 对括号

根据[[MK402][唯一可读]]有且仅有 $s=(\lnot\phi)$ 或 $s=(\phi_1\to \phi_2)$ 两种形式

*******  $s=(\lnot\phi)$ 时

对于任意 $s[i]=($ 若 $i=1$ 则根据[[MK399][前缀引理]]有 $s[|s|]=)$ 满足条件（1）

若 $i>1$ 则 $s[i]$ 在 $\phi$ 中，显然 $\phi$ 中括号对数为 $n-1$ 根据归纳假设 $\phi$ 中有唯一 $)$ 满足条件（1）

此时唯一不在 $\phi$ 中，且在 $s[i]$ 之后的 $)$ 为 $s[|s|]$ 显然根据[[MK430][后缀引理]]可得 $<s[i],...,s[|s|]>\not\in\mathcal{L}_0$

综上所述，对于任意 $s[i]=($ 满足条件（1）

*******  $s=(\phi_1\to \phi_2)$ 时

对于任意 $s[i]=($ 若 $i=1$ 则根据[[MK399][前缀引理]]有 $s[|s|]=)$ 满足条件（1）

若 $i>1$ 且 $s[i]$ 在 $\phi_1$ 中，由于 $\phi_1$ 中括号对数显然小于 $n$ 故根据归纳假设在 $\phi_1$ 中有唯一与之对应的 $)$

假设存在 $s[j],j>i$ 满足 $<s[i],...,s[j]>\in\mathcal{L}$ 则根据以下证明可得假设不成立

******** 若 $s[j]$ 在 $\phi_2$ 中

则同样根据归纳假设对于 $\phi_1[|\phi_1|]=)$ 在 $\phi_1$ 中有唯一的 $\phi_1[1]=($ 与之对应满足条件

此时若 $i>2$ 即 $s[i]$ 在 $\phi_1[1]$ 右边，则 $\phi_1[|\phi_1|]$ 在 $<s[i],...,s[j]>$ 中不存在与之对应的 $($ 满足条件（2）

与归纳假设矛盾。

此时若 $i=2$ ，则对于 $\phi_2[1]=($ 来说，若 $s[i]$ 不为 $\phi_2[|\phi_2|]=)$ 同理可证与条件（1）矛盾

若 $s[j]$ 为 $\phi_2[|\phi_2|]=)$ 则显然 $<s[i],...,s[j]>=\phi_1\to\phi_2\in\mathcal{L}_0$ 与[[MK402][唯一可读性]]矛盾

******** 若 $s[j]=s[|s|]$

则根据[[MK430][后缀引理]]可得 $<s[i],...,s[|s|]>\not\in\mathcal{L}_0$ 与假设矛盾

**** 定理2<<MK432>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\phi\in\mathcal{L}_0$ 以及 $\psi$ 是 $\phi$ 的子表达式，则

（1） 若 $\psi\ne\phi$ 则 $\phi$ 必为 $\phi=(\lnot s_0)$ 或 $\phi=(s_1\to s_2)$ 的形式

（2） 若 $\phi=(\lnot s_0)$ 且 $\psi\ne s_0$ 则 $\psi$ 是 $s_0$ 的子表达式；

     若 $\phi=(s_1\to s_2)$ 且 $\psi\ne s_1\land\psi\ne s_2$ 则有 $\psi$ 是 $s_1$ 的子表达式或 $\psi$ 是 $s_2$ 的子表达式
     
***** 证明

****** 证明（1）

若 $\psi\ne\phi$ 根据[[MK402][唯一可读性]]三种必成立其一，若 $\phi=a_i$ 显然无法拆分，故必不成立

****** 证明（2）

******* $\phi=(\lnot s_0),s_0\in\mathcal{L}_0$ 形式

根据[[MK399][前缀引理]]以及[[MK430][后缀引理]]可得 $\psi$ 不包含 $\phi[1]$ 以及 $\phi[|\phi|]$ ，故 $\psi$ 必为 $\lnot s_0$ 的子串

根据[[MK402][唯一可读性]]以及 $s_0\in\mathcal{L}_0$ 可得对于任意 $\psi\in\mathcal{L}_0$ 均有 $\psi[1]\ne\lnot$ 故可得 $\psi$ 必为 $s_0$ 的子串

******* $\phi=(s_1\to s_2),\{s_1,s_2\}\subset\mathcal{L}_0$ 形式

根据[[MK399][前缀引理]]以及[[MK430][后缀引理]]可得 $\psi$ 不包含 $\phi[1]$ 以及 $\phi[|\phi|]$ ，故 $\psi$ 必为 $s_1\to s_2$ 的子串

显然当且仅当 $\psi[1]$ 在 $s_1$ 中且 $\psi[|\psi|]$ 在 $s_2$ 中时 $\psi$ 不是 $s_1$ 或 $s_2$ 的子表达式，假设成立

显然此时 $|\psi|>1$ 根据[[MK426][定理5]]可得 $\psi[1]=($ 以及 $\psi[|\psi|]=)$ 设 $\psi[1]$ 在 $\phi,s_1$ 中的对应位置为 $\phi[i]$ 以及 $s_1[i']$

根据[[MK431][定理1]] $s_1[i']$ 在 $s_1$ 中有且仅有唯一 $s_1[j'],j'>i'$ 满足 $<s_1[i],...,s_1[j']>\in\mathcal{L}_0$

设 $s_1[j']$ 在 $\phi$ 中对应位置为 $\phi[j_1]$ ，即有 $<\phi[i],...,\phi[j_1]>\in\mathcal{L}_0$

定义 $\psi[|\psi|]$ 在 $\phi$ 中的对应位置为 $\phi[j_2]$ 且在 $s_2$ 中，显然 $s_2$ 在 $s_1$ 右边故有 $j_2>i$ 且 $<\phi[i],...,\phi[j_2]>\in\mathcal{L}_0$

又由于 $\phi[j_1]$ 位于 $s_1$ 中，故有 $j_1\ne j_2$ 。

由于 $\phi\in\mathcal{L}_0$ 故根据[[MK431][定理1]]可得有且仅有唯一 $\phi[j],j>i$ 满足 $<\phi[i],...,\phi[j]>\in\mathcal{L}$ 与上述结论矛盾

故假设不成立，不存在子表达式 $\psi$ 满足 $\psi[1]$ 在 $s_1$ 中且 $\psi[|\psi|]$ 在 $s_2$ 中

即子表达式 $\psi$ 要么存在与 $s_1$ 中，要么存在于 $s_2$ 中

** 真假赋值<<MK401>>

一个关于[[MK394][命题语言]] $\mathcal{L}_0$ 的真假赋值，定义为[[MK194][函数]] $v:A\to\{T,F\}$ 其中 $A$ 是[[MK55][原子命题]]

定义 $\mathcal{L}_0$ 的所有真假赋值集合为 $V(\mathcal{L}_0)$

*** 扩展函数<<MK52>>

[[MK394][命题语言]] $\mathcal{L}_0$ 及其[[MK401][真假赋值]] $v$ ，则有 $\bar{v}$ 定义为

（1） $v(a_i)=\bar{v}(a_i)$

（2） $\bar{v}(<(,\lnot,\phi,)>)=H_{\lnot}(\bar{v}(\phi))$ 其中 $\phi\in\mathcal{L}_0$ 且 $H_{\lnot}$ 是[[MK402][逻辑函数]]

（3） $\varphi(<(,\phi_1,\to,\phi_2,)>)=H_{\to}(\bar{v}(\phi_1),\bar{v}(\phi_2))$ 其中 $\{\phi_1,\phi_2\}\subset\mathcal{L}_0$ 且 $H_{\to}$ 是[[MK402][逻辑函数]]

则 $\bar{v}$ 被定义为表达式真值

**** 定理1（唯一扩张性）<<MK404>>

$\bar{v}$ 是 $\mathcal{L}_0$ 到 $\{T,F\}$ 的[[MK194][函数]]，且定义域为 $\mathcal{L}_0$

***** 证明<<MK403>>

根据[[MK402][唯一可读性]]可得对于任意 $s\in\mathcal{L}_0$ 均有条件中的三种形式，故显然 $\bar{v}$ 定义域为 $\mathcal{L}_0$

显然当 $|s|=1$ 时必有 $s=a_i$ 此时 $\bar{v}(s)=v(s)$ 且 $v$ 是[[MK194][函数]]，故 $\bar{v}(s)$ 真值唯一

定义 *归纳假设* 当 $|s|=n$ 时对于任意 $|s'|<n\land s'\in\mathcal{L}_0$ 均有函数 $\bar{v}(s')$ 满足定理条件

当 $s=(\lnot\phi)$ 时有 $|\phi|<n$ 故有 $\bar{v}(\phi)$ 唯一，又根据唯一可读性可得 $\phi$ 唯一，故有 $\bar{v}(s)$ 唯一

同理可证当 $s=(\phi_1\to\phi_2)$ 时亦有 $\bar{v}(s)$ 唯一

则根据任意 $s\in\mathcal{L}_0$ 均有 $|s|<\infty$ 以及数学归纳法可得对于任意 $s\in\mathcal{L}_0$ ：

（1） 均存在 $\bar{v}(s)$

（2） $\bar{v}(s)$ 唯一

即 $\bar{v}$ 是 $\mathcal{L}_0$ 到 $\{T,F\}$ 的[[MK194][函数]]

***** 推论1（排中律）<<MK53>>

[[MK394][命题语言]] $\mathcal{L}_0$ 的[[MK401][真假赋值]] $v$ 及其[[MK52][表达式真值]] $\bar{v}$ 对任意 $s\in\mathcal{L}_0$ 的值唯一

即 $\bar{v}(s)$ 非真即假

****** 证明

根据[[MK404][定理1]]可得 $\bar{v}$ 是[[MK194][函数]]，则结果唯一

***** 推论2

素数有无限个

****** 证明

命题为素数有无限个，若命题正确，则素数有有限个。假设 $a_1,...,a_n$ 为所有素数，显然 $2$ 是质数，故 $n\geq 2$

定义 $x=\prod_{i=1}^n a_i+1$ 则有 $x$ 被任意 $a_i$ 除均余 $1$ 。若 $x$ 是素数，则假设不成立。

若 $x$ 不是素数，由于 $x>1$ ,则 $x$ 可分解成质数的乘积，由于 $a_1,..,a_n$ 均不是其质因子

故存在其他质数可以整除 $x$ 假设亦不成立

综上所述命题为素数有无限个命题为假，根据排中律素数有无限个证明命题为真。

**** 定理2（局部确定性）

设 $s\in\mathcal{L}_0$ 是[[MK394][命题语言]]，假设 $a_1,...,a_m$ 是 $s$ 中出现的所有[[MK55][原子命题]]

则若[[MK401][真假赋值]] $u,v$ 满足 $u(a_i)=v(a_i),1\leq i\leq m$ 则有 $u(s)=v(s)$

***** 证明

当 $|s|=1$ 时显然成立，当 $|s|=n>1$ 时根据[[MK402][唯一可读性]]可用[[MK403][类似归纳法]]证明

*** 可满足性<<MK406>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有[[MK401][真假赋值]] $v$ 及其[[MK52][扩展函数]] $\bar{v}$ 若：

（1） 对于任意 $s\in\mathcal{L}_0$ 有 $\bar{v}(s)=T$ 则称 $v$ 满足 $s$ 或 $s$ 被 $v$ 满足

（2） 对于任意 $S\subset\mathcal{L}_0$ 若有 $\forall s\in S\rightarrow \bar{v}(s)=T$ 则称则称 $v$ 满足 $S$ 或 $S$ 被 $v$ 满足

则对于集合 $S\subset\mathcal{L}_0$ 若存在真假赋值 $v$ 满足 $S$ ，则称 $S$ 是可满足的

**** 重言式（永真式）<<MK70>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $s\in\mathcal{L}_0$ 满足 $\forall v\in V(\mathcal{L}_0)\rightarrow \bar{v}=T$ 其中 $v\in V(\mathcal{L}_0)$ 是[[MK401][真假赋值]] $\bar{v}$ 是其[[MK52][表达式真值]]

则称 $s$ 是重言式，例 $(\phi\to\phi)$

**** 矛盾式（永假式）

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $s\in\mathcal{L}_0$ 满足 $\forall v\in V(\mathcal{L}_0)\rightarrow \bar{v}=F$ 其中 $v\in V(\mathcal{L}_0)$ 是[[MK401][真假赋值]] $\bar{v}$ 是其[[MK52][表达式真值]]

则称 $s$ 是矛盾式，例 $(\lnot(\phi\to\phi))$

*** 逻辑结论<<MK86>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $s\in\mathcal{L}_0$ 以及 $S\subset\mathcal{L}_0$

若满足对于任意[[MK401][真假赋值]] $v\in V(\mathcal{L}_0)$ 若有 $v$ [[MK406][满足]] $S$ 则有 $v$ 满足 $s$

则称 $s$ 是 $S$ 的逻辑结论，记作 $S\vDash s$ 。其中 $v\in V(\mathcal{L}_0)$ 是[[MK401][真假赋值]]

**** 逻辑结论举例<<MK87>>

***** I1

\begin{aligned}
\{A\}\vDash A\lor B
\end{aligned}

***** 简化规则<<MK88>>

\begin{aligned}
\{(A\land B)\}\vDash A\\
\{(A\land B)\}\vDash B\\
\end{aligned}

***** 添加规则

\begin{aligned}
\{A\}&\vDash A\lor B\\
\{B\}&\vDash A\lor B\\
\end{aligned}

***** 二难推论

\begin{aligned}
\{(A\lor B)\land(A\rightarrow C)\land(B\rightarrow C)\}\vDash C\\
\end{aligned}

***** 假言推理

\begin{aligned}
\{(A\land (A\rightarrow B))\}\vDash B\\
\end{aligned}

****** 证明

\begin{tabular}{|l|l|l|l|l|l|} 
\hline
A & B & A\rightarrow B & A\land (A\rightarrow B)\\
\hline
0&0&1&0\\
1&0&0&0\\
0&1&1&0\\
1&1&1&1\\
\hline
\end{tabular}

故当 $\bar{v}((A\land (A\rightarrow B)))=T$ 时必有 $\bar{v}(B)=T$

***** 否定后件

\begin{aligned}
\{((A\rightarrow B)\land (\lnot B))\}\vDash(\lnot A)\\
\end{aligned}

****** 证明

\begin{tabular}{|l|l|l|l|l|l|l|l|} 
\hline
A & B & A\rightarrow B & \lnot B & (A\rightarrow B)\land \lnot B & \lnot A\\
\hline
0&0&1&1&1&1\\
1&0&0&1&0&0\\
0&1&1&0&0&1\\
1&1&1&0&0&0\\
\hline
\end{tabular}

故当 $\bar{v}(((A\rightarrow B)\land (0\lnot B)))=T$ 时必有 $\bar{v}((\lnot A))=T$

***** 选言三段论

\begin{aligned}
\{((\lnot A)\land(A\lor B))\}&\vDash B\\
\end{aligned}

****** 证明

\begin{tabular}{|l|l|l|l|l|l|l|} 
\hline
A & B & \lnot A & A \lor B & \lnot A\land (A\lor B)\\
\hline
0&0&1&0&0\\
1&0&0&1&0\\
0&1&1&1&1\\
1&1&0&1&0\\
\hline
\end{tabular}

故当 $\bar{v}(((\lnot A)\land(A\lor B)))=T$ 时必有 $\bar{v}(B)=T$

***** 假言三段论（蕴含的传递性）<<MK89>>

\begin{aligned}
\{((A\rightarrow B)\land(B\rightarrow C))\}&\vDash(A\rightarrow C)\\
\end{aligned}

****** 证明

\begin{tabular}{|l|l|l|l|l|l|l|l|} 
\hline
A & B & C & A\rightarrow B & B\rightarrow C & (A\rightarrow B)\land(B\rightarrow C) & A\rightarrow C\\
\hline
0&0&0&1&1&1&1\\
1&0&0&0&1&0&0\\
0&1&0&1&0&0&1\\
0&0&1&1&1&1&1\\
1&1&0&1&0&0&0\\
1&0&1&0&1&0&1\\
0&1&1&1&1&1&1\\
1&1&1&1&1&1&1\\
\hline
\end{tabular}

故当 $\bar{v}(((A\rightarrow B)\land(B\rightarrow C)))=T$ 时必有 $\bar{v}((A\rightarrow C))=T$

***** I7

\begin{aligned}
\{((A\rightarrow B)\land(C\rightarrow D))\}\vDash((A\land C)\rightarrow (B\land D))\\
\end{aligned}

****** 证明

\begin{tabular}{|l|l|l|l|l|l|l|l|l|l|l|} 
\hline
A & B & C & D & A\rightarrow B & C\rightarrow D & (A\rightarrow B)\land(C\rightarrow D) & A\land C & B\land D & (A\land C)\rightarrow (B\land D)\\
\hline
0&0&0&0&1&1&1&0&0&1\\
1&0&0&0&0&1&0&0&0&1\\
0&1&0&0&1&1&1&0&0&1\\
0&0&1&0&1&0&0&0&0&1\\
0&0&0&1&1&1&1&0&0&1\\
1&1&0&0&1&1&1&0&0&1\\
1&0&1&0&0&0&0&1&0&0\\
1&0&0&1&0&1&0&0&0&1\\
0&1&1&0&1&0&0&0&0&1\\
0&1&0&1&1&1&1&0&1&1\\
0&0&1&1&1&1&1&0&0&1\\
1&1&1&0&1&0&0&1&0&0\\
1&1&0&1&1&1&1&0&1&1\\
1&0&1&1&0&1&0&1&0&1\\
0&1&1&1&1&1&1&0&1&1\\
1&1&1&1&1&1&1&1&1&1\\
\hline
\end{tabular}

故当 $\bar{v}(((A\rightarrow B)\land(C\rightarrow D)))=T$ 时必有 $\bar{v}(((A\land C)\rightarrow (B\land D)))=T$

***** I8（双向蕴含传递）

\begin{aligned}
\{((A\leftrightarrow B)\land(B\leftrightarrow C))\}\vDash(A\leftrightarrow C)\\
\end{aligned}

****** 证明

\begin{tabular}{|l|l|l|l|l|l|l|l|} 
\hline
A & B & C & A\leftrightarrow B & B\leftrightarrow C & (A\leftrightarrow B)\land(B\leftrightarrow C) & A\leftrightarrow C\\
\hline
0&0&0&1&1&1&1\\
1&0&0&0&1&0&0\\
0&1&0&0&0&0&1\\
0&0&1&1&0&0&0\\
1&1&0&1&0&0&0\\
1&0&1&0&0&0&1\\
0&1&1&0&1&0&0\\
1&1&1&1&1&1&1\\
\hline
\end{tabular}

故当 $\bar{v}(((A\leftrightarrow B)\land(B\leftrightarrow C)))=T$ 时必有 $\bar{v}((A\leftrightarrow C))=T$

*** 逻辑等价<<MK71>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\phi\in\mathcal{L}_0,\psi\in\mathcal{L}_0$ 若对于任意[[MK52][扩展函数]]，若有 $\bar{v}(\phi),\bar{v}(\psi)$ 有意义，则 $\bar{v}(\phi)=\bar{v}(\psi)$

则称[[MK51][命题表达式]] $\phi,\psi$ 逻辑等价，记作 $\phi\sim\psi$

**** 定理

***** 定理1<<MK90>>

[[MK394][命题语言]] $\mathcal{L}_0$ 的逻辑等价是[[MK176][等价关系]]

****** 证明

显然对于任意 $\varphi\in\mathcal{L}_0,\phi\in\mathcal{L}_0,\psi\in\mathcal{L}_0$ 以及任意 $\bar{v}(\varphi),\bar{v}(\phi),\bar{v}(\psi)$ 有意义的[[MK52][扩展函数]] $\bar{v}$ 有

（1） $\bar{v}(\phi)=\bar{v}(\phi)$ 即 $\phi\sim\phi$ [[MK168][自反性]]

（2） 若 $\bar{v}(\phi)=\bar{v}(\psi)$ 则 $\bar{v}(\psi)=\bar{v}(\phi)$ 即 $\phi\sim\psi\rightarrow\psi\sim\phi$ [[MK170][对称性]]

（3） 若 $\bar{v}(\varphi)=\bar{v}(\phi),\bar{v}(\phi)=\bar{v}(\psi)$ 则 $\varphi\sim\phi\land\phi\sim\psi\rightarrow\varphi\sim\psi$ 即[[MK172][传递性]]

***** 等价替换定理<<MK91>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\phi\in\mathcal{L}_0$ 存在 $\eta\in\mathcal{L}_0$ 是 $\phi$ 的[[MK101][子表达式]]，若存在 $\psi\sim\eta,\psi\in\mathcal{L}_0$

则定义 $\phi'$ 是 $\phi$ 将 $\eta$ 替换为 $\psi$ 后的符号串，则有 $\phi'\in\mathcal{L}_0$ 以及 $\phi\sim\phi'$

****** 证明

对于任意 $\phi$ 满足 $\eta$ 是 $\phi$ 的子表达式且 $\eta\sim\psi$ ，根据[[MK402][唯一可读性]]以及[[MK432][定理2]]易证依次展开 $\phi$ 可寻找子表达式 $\eta$

又由于 $|\phi|<\infty$ 故展开次数 $n<\infty$ 则根据以下证明以及数学归纳法可得结论

******* 一次展开<<MK433>>

对于任意 $\phi$ 满足 $\eta$ 是 $\phi$ 的子表达式，根据[[MK402][唯一可读性]]，若满足如下情况

（1） $\phi=\eta$ 显然对于任意[[MK52][扩展函数]]均有 $\bar{v}(\phi)=\bar{v}(\eta)=\bar{v}(\psi)$ 

（2） $\phi=(\lnot\eta)$ 则对于任意[[MK52][扩展函数]]均有 $\bar{v}(\phi)=H_\lnot(\bar{v}(eta))=H_\lnot(\bar{v}(\psi))$

（3） $\phi=(\eta\to\tau)$ 则对于任意[[MK52][扩展函数]]均有 $\bar{v}(\phi)=H_\to(\bar{v}(eta),\bar{v}(\tau))=H_\lnot(\bar{v}(\psi),\bar{v}(\tau))$

（4） $\phi=(\eta\to\phi),\phi=(\eta\to\eta)$ 与（3）同理 

综上所述，上述命题表达式 $\phi$ 替换的 $\phi'$ 后对于任意扩展函数均有 $\bar{v}(\phi)=\bar{v}(\phi')$ ，即 $\phi\sim\phi'$

******* 归纳假设

对于任意 $\phi$ 满足 $\eta$ 是 $\phi$ 的子表达式，且到达 $\eta$ 需要的展开次数小于 $n$ ，则定理成立

******* 任意情况

对于任意 $\phi\in\mathcal{L}_0$ 满足 $\eta$ 是 $\phi$ 的子表达式，到达 $\eta$ 需要的展开次数为 $n>1$

根据[[MK402][唯一可读性]]可得 $\phi=a_i$ 时显然成立，当 $\phi=(\lnot\tau)$ 或 $\phi=(\tau_1\to\tau_2)$ 时

由于展开次数 $n>1$ 可得 $\eta\ne\tau\land\eta\ne\tau_1\land\eta\ne\tau_2$ ，则根据[[MK432][定理2]]可得 $\eta$ 必为 $\tau_1,\tau_2,\tau$ 的[[MK101][子表达式]]

显然 $\tau_1,\tau_2,\tau$ 到 $\eta$ 的展开次数为 $n-1$ 定义替换 $\eta$ 后的表达式为 $\tau_1',\tau_2',\tau'$

根据归纳假设对于任意扩展函数 $\bar{v}(\tau)=\bar{v}(\tau'),\bar{v}(\tau_1)=\bar{v}(\tau_1'),\bar{v}(\tau_2)=\bar{v}(\tau_2')$

又[[MK433][同理可证]] $\phi'=(\lnot\tau')$ 或 $\phi'=(\tau'_1\to\tau'_2)$ 均有 $\bar{v}(\phi)=\bar{v}(\phi')$ ，即 $\phi\sim\phi'$

**** 逻辑等价式举例<<MK72>>

***** 双重否定<<MK73>>

$\lnot\lnot A{|\!\!\!=\!\!\!|}A$

***** 幂等律<<MK74>>

$A\lor A{|\!\!\!=\!\!\!|}A,A\land A{|\!\!\!=\!\!\!|}A$

***** 交换律<<MK75>>

\begin{aligned}
A\lor B&{|\!\!\!=\!\!\!|}B\lor A\\
A\land B&{|\!\!\!=\!\!\!|}B\land A
\end{aligned}

***** 结合律<<MK76>>

\begin{aligned}
(A\lor B)\lor C&{|\!\!\!=\!\!\!|}A\lor (B\lor C)\\
(A\land B)\land C&{|\!\!\!=\!\!\!|}A\land (B\land C)
\end{aligned}

****** 证明

或[[MK52][真值]]表

\begin{tabular}{|l|l|l|l|l|l|l|} 
\hline
A & B & C & A\lor B & (A\lor B)\lor C & B\lor C & A\lor (B\lor C)\\
\hline
0&0&0&0&0&0&0\\
1&0&0&1&1&0&1\\
0&1&0&1&1&1&1\\
0&0&1&0&1&1&1\\
1&1&0&1&1&1&1\\
1&0&1&1&1&1&1\\
0&1&1&1&1&1&1\\
1&1&1&1&1&1&1\\
\hline
\end{tabular}

与[[MK52][真值]]表

\begin{tabular}{|l|l|l|l|l|l|l|} 
\hline
A & B & C & A\land B & (A\land B)\land C & B\land C & A\land (B\land C)\\
\hline
0&0&0&0&0&0&0\\
1&0&0&0&0&0&0\\
0&1&0&0&0&0&0\\
0&0&1&0&0&0&0\\
1&1&0&1&0&0&0\\
1&0&1&0&0&0&0\\
0&1&1&0&0&1&0\\
1&1&1&1&1&1&1\\
\hline
\end{tabular}

***** 分配率<<MK77>>

\begin{aligned}
A\lor (B\land C)&{|\!\!\!=\!\!\!|}(A\lor B)\land (A\lor C)\\
A\land (B\lor C)&{|\!\!\!=\!\!\!|}(A\land B)\lor (A\land C)
\end{aligned}

****** 证明

\begin{tabular}{|l|l|l|l|l|l|l|l|} 
\hline
A & B & C & A\lor B & A\lor C & B\land C & A\lor (B\land C) & (A\lor B)\land (A\lor C)\\
\hline
0&0&0&0&0&0&0&0\\
1&0&0&1&1&0&1&1\\
0&1&0&1&0&0&0&0\\
0&0&1&0&1&0&0&0\\
1&1&0&1&1&0&1&1\\
1&0&1&1&1&0&1&1\\
0&1&1&1&1&1&1&1\\
1&1&1&1&1&1&1&1\\
\hline
\end{tabular}

\begin{tabular}{|l|l|l|l|l|l|l|l|} 
\hline
A & B & C & A\land B & A\land C & B\lor C & A\land (B\lor C) & (A\land B)\lor (A\land C)\\
\hline
0&0&0&0&0&0&0&0\\
1&0&0&0&0&0&0&0\\
0&1&0&0&0&1&0&0\\
0&0&1&0&0&1&0&0\\
1&1&0&1&0&1&1&1\\
1&0&1&0&1&1&1&1\\
0&1&1&0&0&1&0&0\\
1&1&1&1&1&1&1&1\\
\hline
\end{tabular}

***** 德摩根律<<MK78>>

\begin{aligned}
\lnot (A\lor B)&{|\!\!\!=\!\!\!|}\lnot A\land\lnot B\\
\lnot (A\land B)&{|\!\!\!=\!\!\!|}\lnot A\lor\lnot B\\
\end{aligned}

****** 证明

\begin{tabular}{|l|l|l|l|l|l|l|l|} 
\hline
A & B & \lnot A & \lnot B & A\lor B & \lnot (A\lor B) & \lnot A\land\lnot B\\
\hline
0&0&1&1&0&1&1\\
1&0&0&1&1&0&0\\
0&1&1&0&1&0&0\\
1&1&0&0&1&0&0\\
\hline
\end{tabular}

\begin{tabular}{|l|l|l|l|l|l|l|l|} 
\hline
A & B & \lnot A & \lnot B & A\land B & \lnot (A\land B) & \lnot A\lor\lnot B\\
\hline
0&0&1&1&0&1&1\\
1&0&0&1&0&1&1\\
0&1&1&0&0&1&1\\
1&1&0&0&1&0&0\\
\hline
\end{tabular}

***** 吸收律

\begin{aligned}
A\land (A\lor B)&{|\!\!\!=\!\!\!|}A\\
A\lor (A\land B)&{|\!\!\!=\!\!\!|}A\\
\end{aligned} 

****** 证明

        \begin{tabular}{|l|l|l|l|l|} 
\hline
A & B & A \land B & A\lor(A\land B)\\
\hline
0&0&0&0\\
1&0&0&1\\
0&1&0&0\\
1&1&1&1\\
\hline
\end{tabular}

\begin{tabular}{|l|l|l|l|l|} 
\hline
A & B & A \lor B & A\land(A\lor B)\\
\hline
0&0&0&0\\
1&0&1&1\\
0&1&1&0\\
1&1&1&1\\
\hline
\end{tabular}

***** 蕴含等式<<MK79>>

\begin{aligned}
A\rightarrow B&{|\!\!\!=\!\!\!|}\lnot A\lor B
\end{aligned}

****** 证明 

\begin{tabular}{|l|l|l|l|l|l|} 
\hline
A & B & \lnot A & \lnot A\lor B & A\rightarrow B\\
\hline
0&0&1&1&1\\
1&0&0&0&0\\
0&1&1&1&1\\
1&1&0&1&1\\
\hline
\end{tabular}

***** 等价等值式<<MK80>>

\begin{aligned}
A\leftrightarrow B&{|\!\!\!=\!\!\!|}(B\rightarrow A)\land (A\rightarrow B){|\!\!\!=\!\!\!|}(\lnot A\lor B)\land(\lnot B\lor A)
\end{aligned}

****** 证明

\begin{tabular}{|l|l|l|l|l|l|l|l|} 
\hline
A & B & \lnot A & \lnot B & \lnot A \lor B & \lnot B\lor A & (\lnot A\lor B)\land(\lnot B\lor A) & A\leftrightarrow B\\
\hline
0&0&1&1&1&1&1&1\\
1&0&0&1&0&1&0&0\\
0&1&1&0&1&0&0&0\\
1&1&0&0&1&1&1&1\\
\hline
\end{tabular}

***** 零率<<MK81>>

\begin{aligned}
A\lor 1&{|\!\!\!=\!\!\!|}1\\
A\land 0&{|\!\!\!=\!\!\!|}0
\end{aligned}

***** 同一律

\begin{aligned}
A\land 1&{|\!\!\!=\!\!\!|}A\\
A\lor 0&{|\!\!\!=\!\!\!|}A
\end{aligned}

***** 排中律<<MK82>>

\begin{aligned}
A\lor \lnot A&{|\!\!\!=\!\!\!|}1\\
\end{aligned}

***** 矛盾律<<MK83>>

\begin{aligned}
A\land \lnot A&{|\!\!\!=\!\!\!|}0\\
\end{aligned}

***** 蕴含关系

\begin{aligned}
(A\land B) \rightarrow C&{|\!\!\!=\!\!\!|}A\rightarrow (B \rightarrow C)\\
\end{aligned}

****** 证明

\begin{tabular}{|l|l|l|l|l|l|l|} 
\hline
A & B & C & A\land B & B\rightarrow C & (A\land B) \rightarrow C & A\rightarrow (B \rightarrow C)\\
\hline
0&0&0&0&1&1&1\\
1&0&0&0&1&1&1\\
0&1&0&0&0&1&1\\
0&0&1&0&1&1&1\\
1&1&0&1&0&0&0\\
1&0&1&0&1&1&1\\
0&1&1&0&1&1&1\\
1&1&1&1&1&1&1\\
\hline
\end{tabular}

***** 假言易位（逆否命题）<<MK84>>

\begin{aligned}
A\rightarrow B&{|\!\!\!=\!\!\!|}\lnot B\rightarrow \lnot A\\
\end{aligned}

****** 证明

\begin{tabular}{|l|l|l|l|l|l|l|} 
\hline
A & B & \lnot A & \lnot B & A\rightarrow B & \lnot B\rightarrow \lnot A\\
\hline
0&0&1&1&1&1\\
1&0&0&1&1&1\\
0&1&1&0&0&0\\
1&1&0&0&1&1\\
\hline
\end{tabular}

***** 归谬论

\begin{aligned}
(A\rightarrow B)\land(A\rightarrow\lnot B)&{|\!\!\!=\!\!\!|}\lnot A\\
\end{aligned}

****** 证明

\begin{tabular}{|l|l|l|l|l|l|l|} 
\hline
A & B & A\rightarrow B & \lnot B & A\rightarrow \lnot B & (A\rightarrow B)\land(A\rightarrow\lnot B) & \lnot A\\
\hline
0&0&1&1&1&1&1\\
1&0&0&1&1&0&0\\
0&1&1&0&1&1&1\\
1&1&1&0&0&0&0\\
\hline
\end{tabular}

***** 等价等值式2<<MK85>>

\begin{aligned}
A\leftrightarrow B&{|\!\!\!=\!\!\!|}(A\land B)\lor(\lnot A\land\lnot B)\
\end{aligned}

****** 证明

\begin{tabular}{|l|l|l|l|l|l|l|l|} 
\hline
A & B & A\land B & \lnot A & \lnot B & \lnot A \land \lnot B & (A\land B)\lor(\lnot A\land\lnot B) & A\leftrightarrow B\\
\hline
0&0&0&1&1&1&1&1\\
1&0&0&0&1&0&0&0\\
0&1&0&1&0&0&0&0\\
1&1&1&0&0&0&1&1\\
\hline
\end{tabular}

***** 等价否定式

\begin{aligned}
A\leftrightarrow B&{|\!\!\!=\!\!\!|}\lnot B\leftrightarrow \lnot A\\
\end{aligned}

** 布尔函数（真值函数）<<MK407>>

所有[[MK194][函数]] $v:\{T,F\}^n\to\{T,F\}$ 均被成为真值函数（布尔函数），其中 $\{T,F\}$ 是[[MK153][笛卡尔幂]]

*** 定理1（诱导）<<MK357>>

[[MK394][命题语言]] $\mathcal{L}_0$ 对于任意 $s\in\mathcal{L}_0$ 设其[[MK55][原子命题]]均在[[MK151][有序组]] $<a_1,...,a_{n}>$ 中，

则 $s$ 可诱导[[MK407][布尔函数]] $f_s:\{T,F\}^n\to\{T,F\}$ 满足对于任意 $\sigma\in\{T,F\}^n$ 有 $f_s\left(v_\sigma(a_1),...,v_\sigma(a_{n-1})\right)=\bar{v}_\sigma(s)$

其中 $\bar{v}_\sigma$ 是[[MK401][真假赋值]] $v_\sigma(a_i)=\begin{cases}\sigma[i]&i\leq n\\T&i> n\end{cases}$ 的[[MK52][扩展函数]]， $\sigma[i]$ 是[[MK151][有序组]]位选
**** 证明

对于任意 $\sigma\in\{T,F\}^n$ 定义[[MK401][真假赋值]] $v_\sigma(a_i)=\begin{cases}\sigma[i]&i\leq n\\T&i> n\end{cases}$ 及其[[MK52][扩展函数]] $\bar{v}_\sigma$

故可定义 $f_s\left(v_\sigma(a_1),...,v_\sigma(a_{n-1})\right)=\bar{v}_\sigma(s)$

*** 定理2（可表示性）

[[MK407][布尔函数]] $f:\{T,F\}^n\to\{T,F\}$ 若[[MK394][命题语言]] $\mathcal{L}_0$ 有[[MK55][原子命题]] $|A|\geq n$

则存在一个[[MK51][命题表达式]] $s\in\mathcal{L}_0$ 及其[[MK357][诱导]]的布尔函数 $f_s$ ，满足对于任意 $\sigma\in\{T,F\}^n$ 均有 $f(\sigma)=f_s(\sigma)$

**** 证明

由于 $\{T,F\}$ 有穷集，故可得 $\{T,F\}^n$ 亦为有穷集，故设 $\left\{\sigma\big|\sigma\in\{T,F\}^n\land f(\sigma)=T\right\}=\{\sigma_1,...,\sigma_m\}$

则对于 $\sigma_i$ 定义表达式 $\theta_{i,j}=\begin{cases}a_j&\sigma_i[j]=T\\(\lnot)a_j&\sigma_i[j]=F\end{cases}$ 进而定义[[MK59][连续合取]]表达式 $\phi_{\sigma_i}=(\theta_{i,1}\land...\land\theta_{i,n})$

进一步定义[[MK59][连续析取]]表达式 $\psi=(\phi_{\sigma_1}\lor...\lor\phi_{\sigma_m})$ 进而定义改表达式[[MK357][诱导]]的函数 $f_\psi$

则对于任意 $\sigma_i$ 满足 $f(\sigma_i)=T$ 定义[[MK401][真假赋值]] $v_{\sigma_i}(a_j)=\begin{cases}\sigma[j]&j\leq n\\T&j> n\end{cases}$ 及其[[MK52][扩展函数]] $\bar{v}_{\sigma_i}$ 

根据 $\theta_{i,j},\phi_{\sigma_i},\bar{v}_{\sigma_i}$ 定义易证 $\bar{v}_{\sigma_i}(\phi_i)=T$ 进一步根据[[MK59][析取定义]]可得 $f_{\psi}(\sigma_i)=\bar{v}_{\sigma_i}(\psi)=T$

对于任意 $\sigma_i$ 满足 $f(\sigma_i)=F$ 根据 $\theta_{i,j},\phi_{\sigma_i},\bar{v}_{\sigma_i}$ 定义易证 $\bar{v}_{\sigma_i}(\phi_j)=F$

又根据析取定义可得 $f_{\psi}(\sigma_i)=\bar{v}_{\sigma_i}(\psi)=F$

综上所述，对于任意 $\sigma\in\{T,F\}^n$ 有 $f(\sigma)=f_\psi(\sigma)$

** 证明与定理<<MK104>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有子集 $\Gamma\subset\mathcal{L}_0$ 以及[[MK51][命题表达式]]的有限[[MK151][有序组]] $s=<\phi_1,...,\phi_n>$ 若对于任意 $\phi_i$ 必有以下之一成立：

（1） $\phi_i\in\Gamma$ ；或者

（2） $\phi_i$ 是[[MK398][逻辑公理]]；或者

（3） 存在 $1\leq j_1\leq j_2\leq i$ 满足 $\phi_{j_2}=(\phi_{j_1}\to\phi_i)$

则称序列 $s$ 是集合 $\Gamma$ 的 *证明*

进一步对于 $\phi\in\mathcal{L}_0$ 存在 $s$ 满足 $s[|s|]=\phi$ 则称 $\phi$ 是 $\Gamma$ 的 *定理* ，记作 $\Gamma\vdash\phi$ 

*** 逻辑公理<<MK398>>

[[MK51][命题表达式]]集合 $\phi_1\in\mathcal{L}_0\land\phi_2\in\mathcal{L}_0\land\phi_3\in\mathcal{L}_0$ 其中 $\mathcal{L}_0$ 是[[MK394][命题语言]]

定义以下[[MK70][重言式]]为逻辑公理，注： $\phi_1,\phi_2,\phi_3$ 可以相等

（1） 蕴含分配 $((\phi_1\to(\phi_2\to\phi_3))\to((\phi_1\to\phi_2)\to(\phi_1\to\phi_3)))$

（2） 自蕴含 $(\phi_1\to\phi_1)$

（3） 第一宽容 $(\phi_1\to(\phi_2\to\phi_1))$

（4） 第二宽容 $(\phi_1\to((\lnot\phi_1)\to\phi_2))$

（5） 第一归谬 $(((\lnot\phi_1)\to\phi_1)\to\phi_1)$

（6） 第三宽容 $((\lnot\phi_1)\to(\phi_1\to\phi_2))$

（7） 合取 $(\phi_1\to((\lnot\phi_2)\to(\lnot(\phi_1\to\phi_2))))$

**** 推论1<<MK408>>

[[MK394][命题语言]] $\mathcal{L}_0$ 对于任意 $\Gamma\subset\mathcal{L}_0$ 若 $\phi$ 是逻辑公理，则有 $\Gamma\vdash\phi$

***** 证明

根据[[MK104][证明]]定义可得 $<\phi>$ 是 $\Gamma$ 的证明，即 $\Gamma\vdash\phi$

**** 推论2<<MK417>>

[[MK394][命题语言]] $\mathcal{L}_0$ 对于任意 $\Gamma\subset\mathcal{L}_0$ 以及任意 $\phi\in\mathcal{L}_0\land\phi_1\in\mathcal{L}_0\land\phi_2\in\mathcal{L}_0\land\phi_3\in\mathcal{L}_0$ 均有

（1） $\Gamma\vdash((\phi_1\to\phi_2)\to((\phi_3\to\phi_1)\to(\phi_3\to\phi_2)))$

（2） $\Gamma\vdash((\phi_1\to(\phi_2\to\phi_3))\to(\phi_2\to(\phi_1\to\phi_3)))$

（3） $\Gamma\vdash((\phi_3\to\phi_1)\to((\phi_1\to\phi_2)\to(\phi_3\to\phi_2)))$

（4） $\Gamma\vdash((\lnot(\lnot\phi))\to\phi)$

（5） $\Gamma\vdash((\phi\to(\lnot\phi))\to(\lnot\phi))$ 

（6） $\Gamma\vdash(\phi\to(\lnot(\lnot\phi)))$

***** 证明

根据[[MK408][推论1]]有以下证明步骤

1. 根据[[MK398][第一宽容]] $\Gamma\vdash((\phi_1\to\phi_2)\to(\phi_3\to(\phi_1\to\phi_2)))$

2. 根据第1步 $\Gamma\cup\{(\phi_1\to\phi_2)\}\vdash(\phi_3\to(\phi_1\to\phi_2)))$

3. 根据蕴含分配 $\Gamma\vdash((\phi_3\to(\phi_1\to\phi_2))\to((\phi_3\to\phi_1)\to(\phi_3\to\phi_2)))$

4. 根据第2步以及导出引理显然有 $\Gamma\cup\{(\phi_1\to\phi_2)\}\vdash((\phi_3\to\phi_1)\to(\phi_3\to\phi_2))$

5. 根据[[MK409][演绎引理]] $\Gamma\vdash((\phi_1\to\phi_2)\to((\phi_3\to\phi_1)\to(\phi_3\to\phi_2)))$ 即（1）证得

6. 根据蕴含分配 $\Gamma\vdash((\phi_1\to(\phi_2\to\phi_3))\to((\phi_1\to\phi_2)\to(\phi_1\to\phi_3)))$

7. 根据上一步 $\Gamma\cup\{(\phi_1\to(\phi_2\to\phi_3))\}\vdash((\phi_1\to\phi_2)\to(\phi_1\to\phi_3))$

8. 根据第一宽容 $\Gamma\vdash(((\phi_1\to\phi_2)\to(\phi_1\to\phi_3))\to(\phi_2\to((\phi_1\to\phi_2)\to(\phi_1\to\phi_3))))$

9. 根据第7，8步以及导出引理 $\Gamma\cup\{(\phi_1\to(\phi_2\to\phi_3))\}\vdash(\phi_2\to((\phi_1\to\phi_2)\to(\phi_1\to\phi_3)))$

10. 根据蕴含分配 $\Gamma\vdash((\phi_2\to((\phi_1\to\phi_2)\to(\phi_1\to\phi_3)))\to((\phi_2\to(\phi_1\to\phi_2))\to(\phi_2\to(\phi_1\to\phi_3))))$

11. 根据第10，11步以及演绎引理 $\Gamma\cup\{(\phi_1\to(\phi_2\to\phi_3))\}\vdash((\phi_2\to(\phi_1\to\phi_2))\to(\phi_2\to(\phi_1\to\phi_3)))$

12. 根据第一宽容 $\Gamma\vdash(\phi_2\to(\phi_1\to\phi_2))$

13. 根据第11，12步以及演绎引理 $\Gamma\cup\{(\phi_1\to(\phi_2\to\phi_3))\}\vdash(\phi_2\to(\phi_1\to\phi_3))$

14. 根据上一步以及导出引理 $\Gamma\vdash((\phi_1\to(\phi_2\to\phi_3))\to(\phi_2\to(\phi_1\to\phi_3)))$ 即（2）证得

15. 根据（2）有 $\Gamma\vdash(((\phi_1\to\phi_2)\to((\phi_3\to\phi_1)\to(\phi_3\to\phi_2)))\to((\phi_3\to\phi_1)\to((\phi_1\to\phi_2)\to(\phi_3\to\phi_2))))$

16. 根据（1），上一步以及导出引理 $\Gamma\vdash((\phi_3\to\phi_1)\to((\phi_1\to\phi_2)\to(\phi_3\to\phi_2)))$ 即（3）证得

17. 根据[[MK398][第三宽容]] $\Gamma\vdash((\lnot(\lnot\phi))\to((\lnot\phi)\to\phi))$

18. 根据第一归谬 $\Gamma\vdash(((\lnot\phi)\to\phi)\to\phi)$

19. 根据第一宽容 $\Gamma\vdash((((\lnot\phi)\to\phi)\to\phi)\to((\lnot(\lnot\phi))\to(((\lnot\phi)\to\phi)\to\phi)))$

20. 根据[[MK405][导出引理]] $\Gamma\vdash((\lnot(\lnot\phi))\to(((\lnot\phi)\to\phi)\to\phi))$

21. 根据蕴含分批 $\Gamma\vdash(((\lnot(\lnot\phi))\to((\lnot\phi)\to\phi))\to((\lnot(\lnot\phi))\to\phi))$

22. 根据第17，21步以及导出引理 $\Gamma\vdash((\lnot(\lnot\phi))\to\phi)$ 即（4）证得

23. 根据（3）有 $\Gamma\vdash(((\lnot(\lnot\phi))\to\phi)\to((\phi\to(\lnot\phi))\to((\lnot(\lnot\phi))\to(\lnot\phi))))$

24. 根据（4）以及导出引理 $\Gamma\vdash((\phi\to(\lnot\phi))\to((\lnot(\lnot\phi))\to(\lnot\phi)))$

25. 根据（3） $\Gamma\vdash(((\phi\to(\lnot\phi))\to((\lnot(\lnot\phi))\to(\lnot\phi)))\to((((\lnot(\lnot\phi))\to(\lnot\phi))\to(\lnot\phi))\to((\phi\to(\lnot\phi))\to(\lnot\phi))))$

26. 根据上一步以及导出引理 $\Gamma\vdash((((\lnot(\lnot\phi))\to(\lnot\phi))\to(\lnot\phi))\to((\phi\to(\lnot\phi))\to(\lnot\phi)))$

27. 根据第一归谬 $\Gamma\vdash(((\lnot(\lnot\phi))\to(\lnot\phi))\to(\lnot\phi))$

28. 根据第27，28步以及导出引理 $\Gamma\vdash((\phi\to(\lnot\phi))\to(\lnot\phi))$ 即（5）证得

29. 根据第二宽容 $\Gamma\vdash(\phi\to((\lnot\phi)\to(\lnot(\lnot\phi))))$

30. 根据（5） $\Gamma\vdash(((\lnot\phi)\to(\lnot(\lnot\phi)))\to(\lnot(\lnot\phi)))$

31. 根据第一宽容 $\Gamma\vdash((((\lnot\phi)\to(\lnot(\lnot\phi)))\to(\lnot(\lnot\phi)))\to(\phi\to(((\lnot\phi)\to(\lnot(\lnot\phi)))\to(\lnot(\lnot\phi)))))$

32. 根据第30，31步以及导出引理 $\Gamma\vdash(\phi\to(((\lnot\phi)\to(\lnot(\lnot\phi)))\to(\lnot(\lnot\phi))))$

33. 根据蕴含分配 $\Gamma\vdash((\phi\to(((\lnot\phi)\to(\lnot(\lnot\phi)))\to(\lnot(\lnot\phi))))\to((\phi\to((\lnot\phi)\to(\lnot(\lnot\phi))))\to(\phi\to(\lnot(\lnot\phi)))))$

34. 根据第32，33步以及导出引理 $\Gamma\vdash((\phi\to((\lnot\phi)\to(\lnot(\lnot\phi))))\to(\phi\to(\lnot(\lnot\phi))))$

35. 根据第29，34步以及导出引理 $\Gamma\vdash(\phi\to(\lnot(\lnot\phi)))$

*** 导出引理<<MK405>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\Gamma\subset\mathcal{L}_0,\phi\in\mathcal{L}_0,\psi\in\mathcal{L}_0$ 若 $\psi,(\psi\to\phi)$ 均为 $\Gamma$ 的[[MK398][定理]]，即 $\Gamma\vdash\psi,\Gamma\vdash(\psi\to\phi)$

则 $\phi$ 亦为 $\Gamma$ 的定理，即 $\Gamma\vdash\phi$

**** 证明

根据[[MK104][定理]]定义，存在 $s_1=<\theta_1,...,\theta_n,\psi>,s_2=<\eta_1,...,\eta_m,(\psi\to\phi)>$ 是 $\Gamma$ 的[[MK104][证明]]

易证 $s=<\theta_1,...,\theta_n,\psi,\eta_1,...,\eta_m,(\psi\to\phi)>$ 亦为 $\Gamma$ 的证明

进一步有 $s=<\theta_1,...,\theta_n,\psi,\eta_1,...,\eta_m,(\psi\to\phi),\phi>$ 亦为 $\Gamma$ 的证明，故 $\Gamma\vdash\phi$ 

*** 演绎引理<<MK409>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\Gamma\subset\mathcal{L}_0,\phi\in\mathcal{L}_0,\psi\in\mathcal{L}_0$ 若有[[MK104][证明]] $\Gamma\cup\{\psi\}\vdash\phi$ 则有证明 $\Gamma\vdash(\psi\to\phi)$

**** 证明

根据定义有 $\Gamma\cup\{\psi\}$ 的证明 $s=<\psi_1,...,\psi_n>$ 其中 $\psi_n=\phi$

对于 $\psi_1$ 若 $\psi_1\in\{\psi\}$ 则有 $\psi_1=\psi$ ，故 $(\psi\to\psi_1)=(\psi\to\psi)$ 是[[MK398][自蕴含公理]]

即 $s=<(\psi\to\psi_1)>$ 是 $\Gamma$ 的证明。若 $\psi_1\in\Gamma$ 或 $\psi_1$ 是逻辑公理，

则有 $\Gamma$ 的证明 $<\psi_1,(\psi_1\to(\psi\to\psi_1)),(\psi\to\psi_1)>$ 其中第二条是[[MK398][第一宽容公理]]。即有 $\Gamma\vdash(\psi\to\psi_1)$

当 $1\leq i\leq n$ 时，假设对于任意 $1\leq j\leq i$ 均有 $\Gamma\vdash\phi_j$ 则

若 $\psi_i\in\Gamma\cup\{\psi\}$ 或 $\psi_i$ 是逻辑公理时，与 $\psi_1$ 同理可证 $\Gamma\vdash(\psi\to\psi_i)$

若存在 $1\leq j_1\leq j_2<i$ 满足 $\psi_{j_2}=(\psi_{j_1}\to\psi_i)$ 则根据假设有 $\Gamma\vdash(\psi\to\psi_{j_2})=(\psi\to(\psi_{j_1}\to\psi_i))$

则根据[[MK398][蕴含分配公理]] $\Gamma\vdash((\psi\to(\psi_{j_1}\to\psi_i))\to((\psi\to\psi_{j_1})\to(\psi\to\psi_i)))$

根据[[MK405][导出引理]]可得 $\Gamma\vdash((\psi\to\psi_{j_1})\to(\psi\to\psi_i))$ 又根据假设有 $\Gamma\vdash(\psi\to\psi_{j_1})$

同理根据导出引理 $\Gamma\vdash(\psi\to\psi_i)$

综上所述，根据数学归纳法，对于任意 $\psi_i$ 均有 $\Gamma\vdash(\psi\to\psi_i)$ 由于 $\psi_n=\phi$ 即有 $\Gamma\vdash(\psi\to\phi)$

*** 引理<<MK422>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\Gamma\subset\mathcal{L}_0$ 若有 $\Gamma'\subset\Gamma$ 满足 $\Gamma'\vdash\phi$ 则有 $\Gamma\vdash\phi$ ，其中 $\phi\in\mathcal{L}_0$

**** 证明

若 $\Gamma'\vdash\phi$ 则有 $\Gamma'$ 的[[MK104][证明]] $<\phi_1,...,\phi_n>$ 满足 $\phi_n=\phi$

根据数学归纳法易证 $<\phi_1,...,\phi_n>$ 亦为 $\Gamma$ 的证明，即有 $\Gamma\vdash\phi$ 

** 命题逻辑性质

*** 一致性<<MK107>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\Gamma\subset\mathcal{L}_0$ 则：

（1） $\Gamma$ 是不一致的充要条件是，存在 $\phi\in\mathcal{L}_0$ 满足 $\Gamma\vdash\phi$ 以及 $\Gamma\vdash(\lnot\phi)$

（2） $\Gamma$ 是一致的充要条件是，不存在 $\phi\in\mathcal{L}_0$ 满足 $\Gamma\vdash\phi$ 以及 $\Gamma\vdash(\lnot\phi)$

**** 极大一致性<<MK413>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\Gamma\subset\mathcal{L}_0$ 是[[MK107][一致的]]，若对于任意 $\phi\in\mathcal{L}_0$ 均有若 $\Gamma\cup\{\phi\}$ 仍为一致则有 $\phi\in\Gamma$

则称 $\Gamma$ 有极大一致性

**** 定理1<<MK410>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\Gamma\subset\mathcal{L}_0$ 则 $\Gamma$ 不一致的充要条件是对于任意 $\phi\in\mathcal{L}_0$ 均有 $\Gamma\vdash\phi$

即任意[[MK51][命题表达式]]均为 $\Gamma$ 的[[MK104][定理]]

***** 证明

****** 必要

根据[[MK393][准语言]]以及[[MK394][命题语言]]定义易证若 $\phi\in\mathcal{L}_0$ 则 $(\lnot\phi)\in\mathcal{L}_0$

又由于任意 $\phi\in\mathcal{L}_0$ 均有 $\Gamma\vdash\phi$ 故有 $\Gamma\vdash(\lnot\phi)$ 即 $\Gamma$ [[MK107][不一致]]

****** 充分

由于 $\Gamma\vdash\phi$ 以及 $\Gamma\vdash(\lnot\phi)$ 则对于任意 $\psi\in\mathcal{L}_0$ 根据[[MK398][第三宽容公理]] $\Gamma\vdash((\lnot\phi)\to(\phi\to\psi))$

则根据[[MK405][导出引理]]有 $\Gamma\vdash(\phi\to\psi)$ 同理亦有 $\Gamma\vdash\psi$

**** 定理2<<MK414>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\Gamma\subset\mathcal{L}_0$ 是[[MK107][一致的]]，则对于任意 $\phi\in\mathcal{L}_0$ 可得 $\Gamma\cup\{\phi\},\Gamma\cup\{(\lnot\phi)\}$ 至少有一个是一致的

***** 证明

假设 $\Gamma\cup\{(\lnot\phi)\},\Gamma\cup\{\phi\}$ 均为非一致，则根据[[MK410][定理1]]可得 $\Gamma\cup\{(\lnot\phi)\}\vdash\phi$ 又根据[[MK412][冗余假设]]可得 $\Gamma\vdash\phi$

又由于 $\Gamma\cup\{\phi\}$ 非一致，同理可证 $\forall\psi\in\mathcal{L}_0\rightarrow\Gamma\cup\{\phi\}\vdash\psi$ 根据[[MK409][演绎引理]] $\Gamma\vdash(\phi\to\psi)$

结合上述两个条件可得 $\forall\psi\in\mathcal{L}_0\rightarrow\Gamma\vdash\psi$ 根据[[MK410][定理1]]可得 $\Gamma$ 不一致

与条件 $\Gamma$ 一致矛盾，故可得假设不成立，即 $\Gamma\cup\{(\lnot\phi)\},\Gamma\cup\{\phi\}$ 至少有一个是一致的

则满足上述条件

**** 定理3<<MK415>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\Gamma\subset\mathcal{L}_0$ 是[[MK413][极大一致]]的，则有以下命题成立：

（1） 对于任意 $\phi\in\mathcal{L}_0$ 有 $\phi\in\Gamma$ 和 $(\lnot\phi)\in\Gamma$ 二者有且仅有一项成立

（2） 对于任意 $\phi\in\mathcal{L}_0$ 以及 $\Gamma\vdash\phi$ 有 $\phi\in\Gamma$

（3） 对于任意 $\phi_1\in\mathcal{L}_0\land\phi_2\in\mathcal{L}_0$ 则 $(\phi_1\to\phi_2)\in\Gamma$ 的充要条件是 $\phi_1\not\in\Gamma$ 或 $\phi_2\in\Gamma$

***** 证明

****** 证明（1）

根据[[MK414][定理2]]可得 $\Gamma\cup\{\phi\},\Gamma\cup\{(\lnot\phi)\}$ 至少有一个是一致的，进一步根据[[MK413][定义]]可得（1）

****** 证明（2）

假设 $\phi\not\in\Gamma$ 则根据[[MK413][定义]]有 $\Gamma\cup\{\phi\}$ [[MK107][不一致]]，则根据结论（1）可得 $(\lnot\phi)\in\Gamma$

则根据[[104][证明]]易得 $\Gamma\vdash(\lnot\phi)$ 又根据条件有 $\Gamma\vdash\phi$ 可得 $\Gamma$ 不一致，与条件矛盾

****** 证明（3）

******* 充分

若 $(\phi_1\to\phi_2)\in\Gamma$ 则假设 $\phi_1\in\Gamma$ 且 $\phi_2\not\in\Gamma$ 则根据[[MK398][合取公理]] $\Gamma\vdash(\phi_1\to((\lnot\phi_2)\to(\lnot(\phi_1\to\phi_2))))$

根据[[MK405][导出引理]] $\Gamma\vdash((\lnot\phi_2)\to(\lnot(\phi_1\to\phi_2)))$ 又根据（1）以及 $\phi_2\not\in\Gamma$ 有 $(\lnot\phi_2)\in\Gamma$

同理 $\Gamma\vdash(\lnot(\phi_1\to\phi_2))$ 又由于 $(\phi_1\to\phi_2)\in\Gamma$ 根据[[MK104][定理定义]]有 $\Gamma\vdash(\phi_1\to\phi_2)$

即 $\Gamma$ [[MK107][不一致]]，与条件矛盾，故假设不成立，则有 $\phi_1\not\in\Gamma$ 或 $\phi_2\in\Gamma$

******* 必要

若 $\phi_1\not\in\Gamma$ 成立，则根据（1）有 $(\lnot\phi_1)\in\Gamma$ 即根据[[104][证明]]易得 $\Gamma\vdash(\lnot\phi_1)$

又根据[[MK398][第三宽容公理]]有 $\Gamma\vdash((\lnot\phi_1)\to(\phi_1\to\phi_2))$ 故根据[[MK405][导出引理]] $\Gamma\vdash(\phi_1\to\phi_2)$

根据（2）有 $(\phi_1\to\phi_2)\in\Gamma$

若 $\phi_2\in\Gamma$ 成立，则有 $\Gamma\vdash\phi_2$ ，根据[[MK398][第一宽容公理]]有 $\Gamma\vdash(\phi_2\to(\phi_1\to\phi_2))$

即根据导出引理以及（2）同理可证 $(\phi_1\to\phi_2)\in\Gamma$

若同时成立，则同理由 $\phi_2\in\Gamma$ 

**** 定理4<<MK424>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\Gamma\subset\mathcal{L}_0$ 是[[MK413][极大一致]]的，则 $\Gamma$ 一定是[[MK406][可满足]]的

***** 证明

定义[[MK401][真假赋值]] $v_\Gamma(a)=\begin{cases}T&a\in A\cap\Gamma\\F&a\not\in A\cap\Gamma\end{cases}$ 其中 $A$ 是[[MK55][原子命题]]集合，对应的[[MK52][扩展函数]]定义为 $\bar{v}_\Gamma$

定义 $\Gamma_n=\left\{\phi\big|\phi\in\Gamma\land|\phi|=n\right\}$ 则对于任意 $\phi\in\mathcal{L}_0\land|\phi|=n$ 时显然有 $\phi\in A$

故显然对于任意 $\phi\in\Gamma_1$ 有 $\bar{v}_\Gamma(\phi)=T$ ，对于任意 $\phi\not\in\Gamma_1$ 有 $\bar{v}_\Gamma(\phi)=F$ 

对于任意 $n\in\mathbb{N}\land n>1$ 假设有对于任意 $\phi\in\mathcal{L}_0,1\leq i<n$

均有 $\forall\phi\in\Gamma_i\rightarrow\bar{v}_\Gamma=T$ 以及 $\forall\phi\not\in\Gamma_i\rightarrow\bar{v}_\Gamma=F$ 

根据[[MK402][唯一可读性]]对于任意 $\phi\in\mathcal{L}_0\land|\phi|=n$ 有且仅有 $\phi=(\lnot\psi),\phi=(\psi_1\to\psi_2)$

其中 $\psi\in\mathcal{L}_0\land\psi_1\in\mathcal{L}_0\land\psi_2\in\mathcal{L}_0$ 且显然 $\max(|\psi|,|\psi_1|,|\psi_2|)<|\phi|$

假设 $\phi=(\lnot\psi)$ 则根据[[MK415][定理3]]（1）可知 $\psi\in\Gamma$ 和 $(\lnot\psi)\in\Gamma$ 有且仅有一项成立

故当 $\phi=(\lnot\psi)\in\Gamma$ 时必有 $\psi\not\in\Gamma$ 根据前提假设有 $\bar{v}_\Gamma(\phi)=H_\lnot(\bar{v}(\psi))=T$

故当 $\phi=(\lnot\psi)\not\in\Gamma$ 时必有 $\psi\in\Gamma$ 根据前提假设有 $\bar{v}_\Gamma(\phi)=H_\lnot(\bar{v}(\psi))=F$

假设 $\phi=(\psi_1\to\psi_2)$ 则根据[[MK415][定理3]]可得 $\phi\in\Gamma$ 的充要条件为 $\psi_1\not\in\Gamma$ 或 $\psi_2\in\Gamma$

故当 $\phi=(\psi_1\to\psi_2)\in\Gamma$ 时根据[[MK402][逻辑函数]]易证 $\bar{v}_\Gamma(\phi)=H_\to(\bar{v}(\psi_1),\bar{v}(\psi_2))=T$

故当 $\phi=(\psi_1\to\psi_2)\not\in\Gamma$ 时有 $\psi_1\in\Gamma\land\psi_2\not\in\Gamma$ 根据前提假设 $\bar{v}_\Gamma(\psi_1)=T\land\bar{v}_\Gamma(\psi_2)=F$

故根据[[MK402][逻辑函数]]易证 $\bar{v}_\Gamma(\phi)=H_\to(\bar{v}(\psi_1),\bar{v}(\psi_2))=F$

根据[[MK392][基本符号集]]可得 $\forall\phi\in\mathcal{L}_0\rightarrow|\phi|<\infty$ 故根据数学归纳法可得对于任意 $\phi\in\mathcal{L}_0$

均有 $\forall\phi\in\Gamma_i\rightarrow\bar{v}_\Gamma=T$ 以及 $\forall\phi\not\in\Gamma_i\rightarrow\bar{v}_\Gamma=F$ ，显然 $\bar{v}_\Gamma$ 满足 $\Gamma$

**** 定理5<<MK425>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\Gamma\subset\mathcal{L}_0$ 是[[MK107][一致的]]，则存在 $\Gamma^*\subset\mathcal{L}_0$ 满足：

（1） $\Gamma\subset\Gamma^*$

（2） $\Gamma^*$ 是[[MK413][极大一致]]的

***** 证明

根据[[MK416][性质]]以及[[MK394][命题语言]]定义易证 $\mathcal{L}_0$ 是[[MK44][可数集]]，则定义 $\mathcal{L}_0=\left\{\phi_n\big|n\in\mathbb{N}\right\}$

定义 $f:\mathcal{L}_0\to\mathbb{N}$ 是[[MK27][等势函数]]，即对于任意 $\psi\in\mathcal{L}_0$ 有 $\phi_{f(\psi)}=\psi$，定义 $\Gamma_0=\Gamma$ 给定 $\Gamma_n$ 定义 $\Gamma_{n+1}$ ：

（1） 若 $\Gamma_n\cup\{\phi_n\}$ [[MK107][一致]]，则 $\Gamma_{n+1}=\Gamma_n\cup\{\phi_n\}$

（2） 若 $\Gamma_n\cup\{(\lnot\phi_n)\}$ [[MK107][一致]]，则 $\Gamma_{n+1}=\Gamma_n\cup\{(\lnot\phi_n)\}$

根据[[MK414][定理2]]可得上面两条至少成立一条，故进一步定义 $\Gamma^*=\bigcup_{n\in\mathbb{N}}\Gamma_n$

****** 证明 $\Gamma_n$ 一致<<MK421>>

对于任意 $\Gamma_{n+1}$ 已知 $\Gamma_n$ 一致，则对于 $\phi_n\in\mathcal{L}_0$ 根据[[MK414][定理2]]可得 $\Gamma\cup\{\phi_n\},\Gamma\cup\{(\lnot\phi_n)\}$ 至少有一个是一致的

即根据定义 $\Gamma_{n+1}$ 是一致的。由于 $\Gamma_0$ 是一致的，故根据数学归纳法可得 $\Gamma_n$ 亦是一致的

****** 证明 $\Gamma^*$ 一致

******* $\Gamma^*$ 的[[MK104][证明]]均有 $\Gamma_n$ 包含<<MK420>>

对于任意 $\Gamma^*$ 的[[MK104][证明]] $<\mu_1,...,\mu_u>$ 中的任意 $\mu_i$ 

当 $i=1$ 时必有 $\mu_1$ 是公理或 $\mu_1\in\Gamma^*$

若是公理，则有 $\Gamma_{f(\mu_1)}\cup\{\phi_{f(\mu_1)}\}$ 是一致的，若 $\mu_1\in\Gamma^*$ 则存在 $n\in\mathbb{N}$ 满足 $\mu_1\in\Gamma_n$

当 $1<i\leq u$ 假设对于任意 $1\leq j< i$ 均满足存在 $\Gamma_{n_j}$ 使得 $\mu_j\in\Gamma_{n_j}$ 

则定义 $n=\max(n_{j_1},...,n_{j_{i-1}})$ 显然有 $\mu_j\in\Gamma_n$ 则证明 $<\mu_1,...,\mu_{i-1},\mu_i>$ 有 $\Gamma_n\vdash\mu_i$

此时若 $f(\mu_i)\leq n$ 则有 $\{\mu_1,...,\mu_i\}\subset\Gamma_n$ 反之根据定义有 $u\leq v\rightarrow\Gamma_u\subset\Gamma_v$ 易证 $\{\mu_1,...,\mu_{i-1}\}\subset\Gamma_{f(\mu_i)}$ 

根据[[MK419][定理7]]有 $\Gamma_{f(\mu_i)}\cup\{\mu_i\}$ 是一致的，故有 $\Gamma_{f(\mu_i)+1}=\Gamma_{f(\mu_i)}\cup\{\mu_i\}$ 即 $\{\mu_1,...,\mu_i\}\subset\Gamma_{f(\mu_i)+1}$ 

综上所述，故根据数学归纳法对于任意 $\mu_i$ 在 $<\mu_1,...,\mu_u>$ 中均存在 $\Gamma_n$ 满足 $\mu_i\in\Gamma_n$

又由于所有证明均为有限有序组

故对于任意 $\Gamma^*$ 的证明 $<\mu_1,...,\mu_u>$ 中的任意 $\mu_i,1\leq i\leq u$ 均存在 $\Gamma_n$ 满足 $\mu_i\in\Gamma_n$

******* 证明结论

假设 $\Gamma^*$ 不一致，则根据定义存在 $\phi\in\mathcal{L}_0$ 满足 $\Gamma^*\vdash\phi$ 以及 $\Gamma^*\vdash(\lnot\phi)$

则有[[MK104][证明]] $<\mu_1,...,\mu_u>,<\eta_1,...,\eta_v>$ 满足 $\mu_u=\phi,\eta_v=(\lnot\phi)$

根据[[MK420][之前证明]]对于任意 $\mu_i$ 均有 $\Gamma_{n_{j_i}}$ 满足 $\mu_i\in\Gamma_{n_{j_i}}$ ，对于任意 $\eta_i$ 均有 $\Gamma_{n_{j_{u+i}}}$ 满足 $\eta_i\in\Gamma_{n_{j_{u+1}}}$

定义 $n=\max(n_{j_1},...,n_{j_{u+v}})$ 根据 $\Gamma_i$ 的构造易证 $\{\mu_1,...,\mu_u\}\cup\{\eta_1,...,\eta_v\}\subset\Gamma_n$  

显然 $\Gamma_n\vdash\phi\land\Gamma_n\vdash(\lnot\phi)$ 不一致，与[[MK421][之前证明]]矛盾。故假设不成立， $\Gamma^*$ 一致

****** 证明 $\Gamma^*$ 极大一致

假设 $\Gamma^*$ 不是极大一致，则存在 $\phi\in\mathcal{L}_0$ 满足 $\phi\not\in\Gamma^*$ 以及 $\Gamma^*\cup\{\phi\}$ 一致

显然 $\Gamma_{f(\phi)}\cup\{\phi\}\subset\Gamma^*\cup\{\phi\}$ 则根据[[MK423][定理6]] $\Gamma_{f(\phi)}\cup\{\phi\}$ 一致

根据构造定义有 $\Gamma_{f(\phi)+1}=\Gamma_{f(\phi)}\cup\{\phi\}$ 又由于义 $\Gamma^*=\bigcup_{n\in\mathbb{N}}\Gamma_n$

故有 $\phi\in\Gamma^*$ 矛盾，故假设不成立， $\Gamma^*$ 是[[MK413][极大一致]]的

**** 定理6<<MK423>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\Gamma\subset\mathcal{L}_0$ 是[[MK107][一致的]]，则任意 $\Gamma'\subset\Gamma$ 必为一致

***** 证明

假设存在 $\Gamma'\subset\Gamma$ 不一致，即有 $\phi\in\mathcal{L}_0$ 满足 $\Gamma'\vdash\phi\land\Gamma'\vdash(\lnot\phi)$

根据[[MK422][引理]]可得 $\Gamma\vdash\phi\land\Gamma\vdash(\lnot\phi)$ 不一致，故矛盾，假设不成立

**** 定理7<<MK419>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\Gamma\subset\mathcal{L}_0$ 是[[MK107][一致的]]，对于任意 $\phi\in\mathcal{L}_0$ 若有 $\Gamma\vdash\phi$ 则 $\Gamma\cup\{\phi\}$ 是一致的

***** 证明

假设 $\Gamma\cup\{\phi\}$ 不一致，则根据[[MK410][定理1]]有 $\Gamma\cup\{\phi\}\vdash(\lnot\phi)$ 根据[[MK418][推论]]有 $\Gamma\vdash(\lnot\phi)$

根据[[MK107][定义]]可得 $\Gamma$ 不一致，与条件故矛盾，即假设不成立

*** 可靠性定理<<MK106>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\Gamma\subset\mathcal{L}_0$ 以及 $\phi\in\mathcal{L}_0$ ，若 $\Gamma\vdash\phi$ 则有 $\Gamma\vDash\phi$

即若 $\phi$ 是 $\Gamma$ 的[[MK104][定理]]，则 $\phi$ 是 $\Gamma$ 的[[MK86][逻辑结论]]

**** 证明

根据定义有 $\Gamma$ 的[[MK104][证明]] $s_n=<\phi_1,...,\phi_n>$ 其中 $\phi_n=\phi$

当 $i=1$ 时有且仅有 $\phi_1\in\Gamma$ 或 $\phi_1$ 是[[MK398][逻辑公理]]，由于逻辑公理均为[[MK70][重言式]]

故对于任意[[MK406][满足]] $\Gamma$ 的[[MK401][真假赋值]] $v$ 其[[MK52][扩展函数]]均有 $\bar{v}(\phi_1)=T$ 即 $\Gamma\vDash\phi_1$ 

对于任意 $1\leq i\leq n$ 假设对于任意 $1\leq k<i$ 均有 $\Gamma\vDash\phi_k$ 则对于 $\phi_i$

若 $\phi_i\in\Gamma$ 或 $\phi_i$ 是逻辑公理，则同理可证 $\Gamma\vDash\phi$

若存在 $1\leq j_1<j_2<i$ 有 $\phi_{j_2}=(\phi_{j_1}\to \phi_i)$ 则对于任意满足 $\Gamma$ 的真假赋值的扩展函数

根据假设以及[[MK402][逻辑函数]]有 $\bar{v}(\phi_{j_1})=T,\bar{v}(\phi_{j_2})=H_{\to}(\bar{v}(\phi_{j_1}),\bar{v}(\phi_i))=T$

显然根据逻辑函数当且仅当 $\bar{v}(\phi_i)=T$ 时有 $H_{\to}(\bar{v}(\phi_{j_1}),\bar{v}(\phi_i))=T$

又由于 $|s|<\infty$ 有限，故综上所述，根据数学归纳法对于任意 $\phi_i$ 均有 $\Gamma\vDash\phi_i$

又由于 $\phi_n=\phi$ 故有 $\Gamma\vDash\phi$

**** 推论

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\Gamma\subset\mathcal{L}_0$ 若 $\Gamma$ 是[[MK406][可满足的]]，则 $\Gamma$ 是[[MK107][一致的]]

***** 证明

若 $\Gamma$ 可满足，即存在[[MK52][扩展函数]] $\bar{v}$ 。假设不是一致的，则存在 $\phi\in\mathcal{L}_0$ 满足 $\Gamma\vdash\phi$ 以及 $\Gamma\vdash(\lnot\phi)$

根据[[MK106][可靠性定理]]可得 $\Gamma\vDash\phi,\Gamma\vDash(\lnot\phi)$ 则根据[[MK402][逻辑函数]] $\bar{v}(\phi)=T\land\bar{v}((\lnot\phi))=H_{\lnot}(\bar{v}(\phi))=T$

显然矛盾，故假设不成立，即 = $\Gamma$ 是[[MK107][一致的]]

*** 完备性<<MK108>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\Gamma\subset\mathcal{L}_0$ ，若 $\Gamma$ 所有的[[MK86][逻辑结论]]都可以被[[MK104][证明]]，则称 $\Gamma$ 是完备的

**** 第一完备性定理<<MK411>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\Gamma\subset\mathcal{L}_0$ ，若 $\Gamma$ 是[[MK107][一致的]]的充要条件是 $\Gamma$ 是[[MK406][可满足的]]

***** 证明

根据[[MK425][定理5]]存在 $\Gamma^*$ 满足 $\Gamma\subset\Gamma^*$ 且 $\Gamma^*$ 是[[MK413][极大一致]]的

又根据[[MK424][定理5]]可得 $\Gamma^*$ 是[[MK406][可满足]]的，即存在[[MK401][真假赋值]]的[[MK52][扩展函数]] $\bar{v}$ 满足 $\forall\phi\in\Gamma^*\rightarrow\bar{v}(\phi)=T$

又由于 $\Gamma\subset\Gamma^*$ 故有 $\forall\phi\in\Gamma\rightarrow\bar{v}(\phi)=T$ 即 $\Gamma$ 是[[MK406][可满足的]]

**** 第二完备性定理

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\Gamma\subset\mathcal{L}_0,\phi\in\mathcal{L}_0$ 则 $\Gamma\vDash\phi$ 的充要条件是 $\Gamma\vdash\phi$

即 $\phi$ 是 $\Gamma$ 的[[MK86][逻辑结论]]的充要条件是 $\phi$ 是 $\Gamma$ 的[[MK104][定理]]

***** 证明

必要条件有[[MK106][可靠性定理]]证得，以下证充分性

若 $\Gamma\vDash\phi$ 则对于任意[[MK406][满足]] $\Gamma$ 的[[MK52][扩展函数]]均有 $\bar{v}(\phi)=T$ 。定义 $\Gamma_1=\Gamma\cup\{(\lnot\phi)\}$

则对于任意[[MK406][满足]] $\Gamma$ 的[[MK52][扩展函数]]必有 $\bar{v}((\lnot\phi))=F$ 即 $\Gamma_1$ 不可满足

根据[[MK411][第一完备性定理]]可得 $\Gamma_1$ 不是[[MK107][一致的]]，根据[[MK410][定理]]可得 $\Gamma_1\vdash \phi$

则根据[[MK412][冗余假设]]引理可得 $\Gamma\vdash\phi$ 

**** 冗余假设引理<<MK412>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\Gamma\subset\mathcal{L}_0,\phi\in\mathcal{L}_0$ 若 $\Gamma\cup\{(\lnot\phi)\}\vdash\phi$ 则有 $\Gamma\vdash\phi$

***** 证明

根据[[MK408][推论]]以及[[MK398][第一归谬公理]]可得 $\Gamma\vdash(((\lnot\phi)\to\phi)\to\phi)$

根据 $\Gamma\cup\{(\lnot\phi)\}\vdash\phi$ 以及[[MK409][演绎引理]]有 $\Gamma\vdash((\lnot\phi)\to\phi)$ 则根据[[MK405][导出引理]]有 $\Gamma\vdash\phi$

***** 推论<<MK418>>

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\Gamma\subset\mathcal{L}_0,\phi\in\mathcal{L}_0$ 若 $\Gamma\cup\{\phi\}\vdash(\lnot\phi)$ 则有 $\Gamma\vdash(\lnot\phi)$

****** 证明

根据 $\Gamma\cup\{\phi\}\vdash(\lnot\phi)$ 以及[[MK409][演绎引理]]有 $\Gamma\vdash(\phi\to(\lnot\phi))$ 

根据[[MK417][推论]]（5）可得 $\Gamma\vdash((\phi\to(\lnot\phi))\to(\lnot\phi))$ 则根据[[MK405][导出引理]]有 $\Gamma\vdash(\lnot\phi)$

*** 紧致性定理

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\Gamma\subset\mathcal{L}_0$ ，则 $\Gamma$ 是[[MK107][一致的]]的充要条件是任意[[MK42][有限]]子集 $\Gamma'\subset\Gamma$ 是一致的

**** 证明
  
***** 充分

对于任意 $\Gamma'\subset\Gamma$ 假设不一致，有 $\Gamma'\vdash\phi,\Gamma'\vdash(\lnot\phi)$ 根据[[MK422][引理]]有 $\Gamma\vdash\phi,\Gamma\vdash(\lnot\phi)$ 与一致条件矛盾

故假设不成立

***** 必要

假设 $\Gamma$ 不一致，故有 $\Gamma\vdash\phi,\Gamma\vdash(\lnot\phi)$ 则存在[[MK104][证明]] $<\phi_1,...,\phi_n>,<\psi_1,...,\psi_m>$ 满足 $\phi_n=\phi,\psi_m=(\lnot\phi)$

则取 $\Gamma'=\{\phi_1,...,\phi_n,\psi_1,...,\psi_m\}\cap\Gamma$ 则显然 $<\phi_1,...,\phi_n>,<\psi_1,...,\psi_m>$ 亦为 $\Gamma'$ 的证明

即 $\Gamma'\vdash\phi,\Gamma'\vdash(\lnot\phi)$ 不一致。由于证明是有限有序组，故 $\Gamma$ 是有限集，与有限子集一致条件矛盾

故假设不成立， $\Gamma$ 一致

**** 推论1

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\Gamma\subset\mathcal{L}_0$ ，则 $\Gamma$ 是[[MK406][可满足]]的充要条件是任意[[MK42][有限]]子集 $\Gamma'\subset\Gamma$ 是可满足的

***** 证明

根据[[MK411][第一完备性定理]]可得可满足与一致为充要条件，则根据紧致性定理可得结论

**** 推论2

[[MK394][命题语言]] $\mathcal{L}_0$ 有 $\Gamma\subset\mathcal{L}_0$ 则 $\Gamma\vDash\phi\in\mathcal{L}_0$ 的充要条件为存在有限子集 $\Gamma'\subset\Gamma$ 满足 $\Gamma'\vDash\phi$

***** 证明

****** 充分

由于 $\Gamma\vDash\phi$ 根据[[MK86][逻辑结论]]对于任意[[MK401][真假赋值]] $v$ 满足 $\Gamma$ 则有 $v$ 满足 $\phi$ ，即[[MK52][扩展函数]]有 $\bar{v}(\phi)=T$

则显然有 $\bar{v}((\lnot\phi))=F$ 故有 $\Gamma\cup\{(\lnot\phi)\}$ 不可满足。根据[[MK411][第一完备性]]可得 $\Gamma\cup\{(\lnot\phi)\}$ [[MK107][不一致]]

根据[[MK410][定理1]]可得 $\Gamma\cup\{(\lnot\phi)\}\vdash\phi$ 根据[[MK412][冗余假设]]可得 $\Gamma\vdash\phi$ 则存在[[MK104][证明]] $<\phi_1,...,\phi_n>$ 满足 $\phi_n=\phi$

即定义 $\Gamma'=\{\phi_1,...,\phi_n\}\cap\Gamma$ 显然 $\Gamma'$ 有限集且 $<\phi_1,...,\phi_n>$ 亦为 $\Gamma'$ 的证明

****** 必要

若存在有限子集 $\Gamma'\subset\Gamma$ 满足 $\Gamma'\vDash\phi$ ，假设 $\Gamma\not\vDash\phi$ 则存在[[MK401][真假赋值]] $v$ 满足 $\Gamma$ 且[[MK52][扩展函数]]有 $\bar{v}(\phi)=F$

由于满足 $\Gamma$ 则必满足 $\Gamma'$ 又根据 $\Gamma'\vDash\phi$ 可得 $\bar{v}(\phi)=T$ 矛盾，故假设不成立，即 $\Gamma\vDash\phi$

** 范式

*** 基本术语定义

**** 文字<<MK92>>

[[MK55][原子命题]]被称为正文字，原子命题的否定称为负文字。

**** 析取子句<<MK93>>

有限个[[MK92][文字]]的[[MK59][析取]]。

**** 合取子句<<MK94>>

有限个[[MK92][文字]]的[[MK58][合取]]。

*** 合取范式<<MK95>>

命题公式 $A$ 的合取范式 $A'$ 满足：

（1） $A{|\!\!\!=\!\!\!|}A'$

（2） $A'$ 为[[MK93][析取子句]]或若干有限个[[MK93][析取子句]]的[[MK58][合取]]

*** 析取范式<<MK96>>

命题公式 $A$ 的析取范式 $A'$ 满足：

（1） $A{|\!\!\!=\!\!\!|}A'$

（2） $A'$ 为[[MK94][合取子句]]或若干有限个[[MK94][合取子句]]的[[MK59][析取]]

*** 定理1（范式存在定理）<<MK97>>

任何命题公式都可化为[[MK71][逻辑等价]]的[[MK95][合取范式]]或[[MK96][析取范式]]

**** 证明

对于命题公式 $A$ ：

（1） 可用[[MK79][蕴含等式]]，[[MK80][等价等值式]]，[[MK85][等价等值式2]]将命题公式中的[[MK60][蕴含]]与[[MK61][双向蕴含]]去除

（2） 可用[[MK78][德摩根律]]将否定连接词 $\lnot$ 深入，直至只作用于[[MK92][文字]]

（3） 经过前两步，命题中只含 $\land,\lor$ 以及括号。最后利用[[MK77][分配率]]配出需要的合取（析取）子串。

*** 主合取范式<<MK98>>

命题公式 $A(p_1,...,p_n)$ 的主合取范式 $A'$ 满足：

（1） $A'$ 为 $A$ 的[[MK95][合取范式]]

（2） $A'$ 的每一个[[MK93][析取子句]]满足：

      a）所有的[[MK92][文字]]及其[[MK57][否定]]不同时存在

      b）但二者其一正好出现一次

      c）[[MK93][析取子句]]中文[[MK55][原子命题]]的次序一致（ $p_1,...,p_n$ ）

（3） $A'\sim A$ 即 $A$ 与 $A'$ [[MK71][等价]]

*** 主析取范式<<MK99>>

命题公式 $A$ 的主析取范式 $A'$ 满足：

（1） $A'$ 为 $A$ 的[[MK96][析取范式]]

（2） $A'$ 的每一个[[MK94][合取子句]]满足：

      a）所有的[[MK92][文字]]及其[[MK57][否定]]不同时存在

      b）但二者其一正好出现一次

      c）[[MK94][合取子句]]中文[[MK55][原子命题]]的次序一致（ $p_1,...,p_n$ ）

（3） $A'\sim A$ 即 $A$ 与 $A'$ [[MK71][等价]]

*** 定理2<<MK100>>

任意命题公式 $A$ 其[[MK71][逻辑等价]]的主合取（析取）范式存在且唯一

**** 证明

下面以主合取范式为例证明，主析取范式同理。

***** 证明存在

定义命题 $A(p_1,...,p_n)$ 根据[[MK97][定理1]]可得 $A$ 等价于其[[MK95][合取范式]] $A'$ ，定义 $A'$ 由 $A'_1,...,A'_s$ 的 $s$ 个[[MK93][析取子句]]组成。

利用[[MK91][替换原理]]，可利用以下替换构造主合取范式：

（1） 若 $A'_i$ 中却少某项 $p_j$ 则 $A'_i{|\!\!\!=\!\!\!|}A'_i\lor0$

     根据[[MK83][矛盾律]]及[[MK77][分配率]]可得 $A'_i\lor0{|\!\!\!=\!\!\!|}A'_i\lor(p_j\land \lnot p_j){|\!\!\!=\!\!\!|}(A'_i\lor p_j)\land(A'_i\lor\lnot p_j)$ ，故可补全合取子式中不包含的[[MK92][文字]]。

（2） 根据[[MK74][幂等律]] $A_i\land A_i{|\!\!\!=\!\!\!|}A_i$ 结合[[MK75][交换律]]，[[MK76][结合律]]可去除重复的[[MK93][析取子句]] 

（3） 根据[[MK74][幂等律]] $p_j\land p_j{|\!\!\!=\!\!\!|}p_j$ 结合[[MK75][交换律]]，[[MK76][结合律]]可去除 $A_i$ 中 $p_j$ 的重复项

（4） 根据[[MK82][排中律]] $p_j\lor\lnot p_j{|\!\!\!=\!\!\!|}1$ 结合[[MK81][零律]]及[[MK75][交换律]]可得 $A_i{|\!\!\!=\!\!\!|}1$

     且 $A_1\land...\land A_{i-1}\land A_i\land A_{i+1} \land...A_s{|\!\!\!=\!\!\!|}A_1\land...\land A_{i-1}\land A_{i+1} \land...A_s$ 故去除 $p_j,\lnot p_j$ 同时存在的项。

又根据[[MK76][结合律]]，析取与合取可以无视计算顺序，最终可得满足[[MK98][主合取范式]]条件的命题公式。

***** 证明唯一

定义命题 $A(p_1,...,p_n)$ 存在两个不同的[[MK98][主合取范式]] $B,C$ 则必有 $A{|\!\!\!=\!\!\!|}B,A{|\!\!\!=\!\!\!|}C$ 根据[[MK90][等价传递]] $B{|\!\!\!=\!\!\!|}C$

由于 $B,C$ 是两个不同的主合取范式，则必存在至少一个不同个[[MK93][析取子句]]。

即存在[[MK93][析取子句]] $B^*_i$ 仅存在 $B$ 或 $C$ 中。不妨设 $B^*_i$ 仅存在 $B$ 中。

由于命题 $A(p_1,...,p_n)$ 且 $B,C$ 为[[MK98][主合取范式]]，故其[[MK93][析取子句]]的形式为 $\textcircled{}p_1\lor\textcircled{ }p_2\lor...\lor\textcircled{ }p_n$ 排列。

其中 $\textcircled{ }$ 可放 $\lnot$ 或不放。

对于中某一特定[[MK93][析取子句]] $P_j=q_1\lor...\lor q_n$ ，其中 $q_i=\textcircled{j}_ip_i$ 且 $\textcircled{j}_i$ 为该子句下特定的 $p_i$ 前缀，可为 $\lnot$ 或无。

根据[[MK59][析取]]定义，当且仅当 $\forall i\big(((1\leq i\leq n)\land i\in N)\rightarrow q_i=0\big)$ 时 $P_j=0$ 

且此时对于任意其他析取子句 $P_l,l\ne j$ ， $P_{l}$ 必存在一个 $q_k$ 使得 $\textcircled{l}_k$ 不同与 $\textcircled{j}_k$ （否则两个子句相同）。

由于[[MK98][主合取范式]]定义，必有 $\textcircled{j}_kp_k=\lnot\textcircled{l}_kp_k$

故当 $\textcircled{j}_kp_k=0$ 时 $\textcircled{l}_kp_k=1$ ,则当 $P_j=0$ 时对于任意 $l\ne j$ 均有 $P_l=1$ 。

综上所述，当某一[[MK93][析取子句]]真值为 $0$ 时，其他所有析取子句真值为 $1$ 。

由于 $B,C$ 均为析取子句的合取，故当给定一组[[MK401][真假赋值]]的[[MK52][扩展函数]]使得 $\bar{v}(B^*_i)=F$ 时，

有 $\bar{v}(B)=F$ 此时除 $B^*_i$ 外任意[[MK98][主合取范式]]的析取子句真值为 $1$ ，故可得 $\bar{v}(C)=T$ 。

上述结论与 $B{|\!\!\!=\!\!\!|}C$ 矛盾，故假设不成立，主合取范式唯一。

*** 等值类

若命题公式拥有相同的[[MK98][主析取范式]]，则其运算结果等值，属于同一等值类。

**** 等值类的数量

若命题公式为 $A(p_1,...,p_n)$ ，则其[[MK99][主析取范式]] $A'$ 的[[MK94][合取子式]]形式为 $\textcircled{ }p_1\land\textcircled{ }p_2\land...\land\textcircled{ }p_n$ 其中 $\textcircled{ }$ 可放 $\lnot$ 或不放。

故能表示的不同合取子式的数量为 $2^n$ 。

每一个合取子式对于 $A'$ 来说仅有包含和被包含两种互斥可能。故 $A'$ 最多可表达 $2^{2^n}$ 中可能的等值类。

** \\命题公式

*** 基本定义<<MK65>>

**** 命题常元<<MK66>>

一个确定的具体的命题，称为命题常元。与[[MK67][命题变元]]对应。

**** 命题变元<<MK67>>

根据[[MK68][定义]]命题公式即为对不同命题的逻辑运算，命题变项为命题公式中可变的命题，即逻辑运算的输入项。

**** 命题公式<<MK68>>

命题公式（又称 *真值函数* 或 *合适公式* ）可按下列[[MK15][归纳定义]]生成:

基础条款：[[MK67][命题变项]]本身是命题公式。

归纳条款：如果 $A$ 是命题公式，则 $\lnot A$ 是命题公式。如果 $A$ 和 $B$ 是命题公式，那么 $A\land B, A\lor B,A\rightarrow B,A\leftrightarrow B$ 都是命题公式。

终极条款：当且仅当有限次地应用以上条款所得到的包含[[MK67][命题变项]]，[[MK55][联结词]]和圆括号（用于判别优先级）的符号串是命题公式。

命题公式的定义是一个递归定义形式。命题公式本身不是命题，没有[[MK52][真值]]，只有对其[[MK67][命题变项]]进行赋值后，它才有[[MK52][真值]]。

若定义命题公式为 $A$ 其[[MK67][命题变项]]为 $p_1,...,p_n$ 则可记作 $A(p_1,...,p_n)$

*** 命题公式分类

**** 原子命题

仅包含[[MK67][命题变元]]的[[MK68][命题公式]]

**** 可满足式

若命题公式 $A$ 至少对一个[[MK67][命题变项]]赋值，使得[[MK52][真值]]为 $1$ ，则称命题公式 $A$ 为可满足式。[[MK70][永真式]]是可满足时。

*** 命题公式关系

**** 命题公式关系性质

***** 等价对称

若 $A{|\!\!\!=\!\!\!|}B$ 则有 $B{|\!\!\!=\!\!\!|}A$  

***** 假言易位

若 $A{|\!\!\!=}B$ 则有 $\lnot A{|\!\!\!=}\lnot B$ ，可由[[MK84][假言易位]]证明

***** 蕴含传递

若 $A{|\!\!\!=}B$ 且 $B{|\!\!\!=}C$ 则有 $A{|\!\!\!=}C$  

***** 蕴含可替

若 $A{|\!\!\!=}B$ 且 $A{|\!\!\!=\!\!\!|}A',B{|\!\!\!=\!\!\!|}B'$ 则有 $A'{|\!\!\!=}B'$

** \\命题形式系统

*** 定义

一个满足以下条件的符号体系：

**** 公理

若干个[[MK70][重言式]]作为公理，即无需证明得真理。

**** 推理规则<<MK102>>

定义为从前提得到结论的思维过程，需满足：

（1） [[MK70][重言式]]可以导出[[MK70][重言式]]的推理规则

（2） 前提条件真值为 $1$ 时，结论真值亦为 $1$ 。

***** 命题逻辑基础推理规则<<MK103>>

规则 $P$ ：在推导的过程中，可随时引入前提集合中的任意一个前提

规则 $T$ ：在推导的过程中，可以随时引入公式 $S$ ，公式 $S$ 是由其前的一个或多个公式推导出来的逻辑结果

规则 $CP$ ：如果能从给定的前提集合 $\Gamma$ 与公式 $P$ 推导出 $S$ ，则能从此前提集合 $\Gamma$ 推导出 $P\rightarrow S$ 。

**** 综合

公理和推理规则能保证正确的前提可以推出正确的结论

*** 举例

**** 命题演算系统（PC）

***** 公理<<MK109>>

$A,B,C$ 可代表任意[[MK68][命题公式]]

A1<<MK110>>: $A\rightarrow(B\rightarrow A)$

A2<<MK111>>: $(A\rightarrow(B\rightarrow C))\rightarrow((A\rightarrow B)\rightarrow(A\rightarrow C))$

A3<<MK112>>: $(\lnot A\rightarrow\lnot B)\rightarrow(B\rightarrow A)$

***** 推理规则<<MK113>>

假设公式集合 $\Gamma$ ， 若满足：

（1） $A\in\Gamma$ 或 $A$ 为 $\Gamma$ 的[[MK104][演绎结果]]

（2） 当 $\Gamma$ 中公式真值均为 $1$ 时有 $A\rightarrow B=1$

则 $\Gamma{|\!-}B$ ，即 $B$ 亦为 $\Gamma$ 的[[MK104][演绎结果]]。特别的，当 $\Gamma=\varnothing$ 时 $B$ 为[[MK104][定理]]

****** 推论：推理规则保真性<<MK114>>

已知 $\Gamma$ 为一个公式集合，当 $\Gamma$ 中所有公式真值均为 $1$ 时，其[[MK104][演绎结果]]的真值亦为 $1$

******* 证明

******** 定义 $A_{s_k}$ 

根据[[MK104][演绎结果]]定义假设公式序列 $A_1,...,A_m$ ，取其中任一公式 $A_{s_0}$

根据[[MK109][公理]]中定义，PC系统的公理为[[MK70][重言式]]，且根据条件 $\Gamma$ 中的命题公式真值亦为 $1$

（1） 则若 $A_{s_0}\in\Gamma$ 或 $A_{s_0}$ 为[[MK109][公理]]时 $A_{s_0}=1$

（2） 当 $A_{s_0}$ 为[[MK104][演绎结果]]时必存在 $A_{s_1}\rightarrow A_{s_0}=1,s_1<s_0$

同理 $A_{s_1}$ 或者满足 $A_{s_1}=1$ 或者满足 $A_{s_2}\rightarrow A_{s_1}=1,s_2<s_1$

依次类推直至 $A_{s_k}$ 使得 $A_{s_k}\in\Gamma$ 或者 $A_{s_k}$ 为公理。故得反向序列 $A_{s_0},...,A_{s_k}$ 满足 $A_{s_i}\rightarrow A_{s_{i+1}}=1$ 及 $s_k<...<s_0$

******** 证明 $A_{s_k}$ 的存在性：

由于 $s_0\leq\infty$ 有限，且 $s_i$ 满足 $s_i<s_{i-1}$ 且若 $A_{s_i}$ 不满足 $A_{s_k}$ 条件，则必有 $A_{s_{i+1}}$ 属于公式序列且满足 $A_{s_{i+1}}\rightarrow A_{s_i}=1$ 且 $s_{i+1}<s_i$

由于 $s_{i+1}<s_i$ 可得 $A_{s_{i+1}}\ne A_{s_{i}}$ 且任意 $A_{s_i}$ 于公式序列中排与 $A_{s_0}$ 前，故一共有 $s_0-1$ 个公式排与 $A_{s_0}$ 之前。

假设 $A_{s_k}$ 不存在，则对于任意 $u\in N,u<\infty$ 可经过 $u$ 次类推寻得 $A_{s_u}$ 。当 $u>s_0$ 时需要 $u$ 个公式

然则公式序列中位于 $A_{s_0}$ 前的公式共有 $s_0-1$ 个，且不能重复出现，故矛盾。故必然存在 $A_{s_k}$

******** 证明结论

故根据条件 $A_{s_k}=1$ ，再根据[[MK89][蕴含传递]]以及 $A_{s_{i+1}}\rightarrow A_{s_i}=1$ 可得 $A_{s_i}=1$

***** 性质

****** 合理性

由于[[MK109][公理]]均为[[MK70][重言式]]，且根据[[MK114][保真性]]可得：

（1） 公理导出的结果均为[[MK70][重言式]]

（2） [[MK104][演绎结果]]必为[[MK86][逻辑结果]]

****** 一致性

根据[[MK53][排中律]]不存在 $(B\rightarrow A)\land(B\rightarrow\lnot A)=1$ 故不可能有 $({|\!-}A)\land({|\!-}\lnot A)=1$ 

****** 完备性

略

***** 元定理

证明暂略

****** 演绎定理

$\Gamma{|\!-}A\rightarrow B$ 与 $\Gamma\cup \{A\}{|\!-}B$ 等价

****** 归谬定理

若 $\Gamma\cup \{\lnot A\}{|\!-}B$ 且 $\Gamma\cup \{\lnot A\}{|\!-}\lnot B$ 则有 $\Gamma{|\!-}A$ 

****** 穷举定理

若 $\Gamma\cup \{\lnot A\}{|\!-}B$ 且 $\Gamma\cup \{A\}{|\!-}B$ 则有 $\Gamma{|\!-}B$ 

**** MIU系统

***** 公理

MI

***** 推理规则<<MK115>>

规则1：如果串的最后一个符号是I，则可以加上一个U

规则2：如果串符合Mx，则可以再加上x而生成Mxx，x代表任何一个由M,I,U组成的串

规则3：如果串中出现连续3个I，则可以用U代替III得到新串

规则4：如果串中出现UU，则可以将UU删去得到新串

***** 判定问题

MU是否系统中的串？

****** 证明

定义310系统，M对应3，I对应1，U对应0。则有MI=31，MU=30。此时30能被3整除，31不能。

由于能被3整除的数，各个位上数的和（定义为 $x$ ）必为3的倍数，故根据[[MK115][规则]]：

******* 规则1：

如果串的最后一个符号是1，则可以加上一个3。则若 $x$ 不能被3整除，则 $x+3$ 亦不能

******* 规则2：

如果串符合3x，则可以再加上x而生成3xx，x代表任何一个由3,1,0组成的串

则若 $x$ 不能被3整除，则 $x+x-3$ 亦不能

******* 规则3：

如果串中出现连续三个1，则可以用0代替111得到新串

则若 $x$ 不能被3整除，则 $x-3$ 亦不能

******* 规则4：

如果串中出现00，则可以将00删去得到新串。此时 $x$ 的值不改变。

******* 总结

四个规则均无法从不能被3整除的数中演化出可以被3整除的数。故MU不是定理。

* 一阶逻辑

** 一阶语言<<MK466>>

*** 符号<<MK116>>

一阶逻辑包含以下固定符号：

（1） 逻辑符号：包含 $\{(,\lnot,\to,)\}$ 同[[MK56][命题逻辑符号]]，亦可有[[MK434][推导符号]] $\{\land,\lor,\leftrightarrow\}$

（2） 量词符号<<MK124>>： $\forall$ ，亦可有推导符号 $\exists$

（2） 等式符号： $\hat{=}$

（3） 变元符号<<MK130>>： $X=\left\{x_i\big|i\in\mathbb{N}\right\}$ 

除上述符号外，逗号亦被引入，作用于函数符号及谓词符号。同时一阶逻辑亦包含一下非固定符号：

（1） 常元符号<<MK129>>： $C=\left\{c_i\big|i\in\mathbb{N}\right\}$

（2） 函数符号<<MK131>>： $F=\left\{f_i\big|i\in\mathbb{N}\right\}$

（3） 谓词（关系）符号<<MK132>>： $P=\left\{p_i\big|i\in\mathbb{N}\right\}$

**** 符号假定1<<MK122>>

所有符号均为不同元素

**** 符号假定2<<MK445>>

存在函数 $\pi_P:P\to\mathbb{N}$ 以及函数 $\pi_F:F\to\mathbb{N}$ 满足：

（1） $\forall p_i\in P\rightarrow\pi_P(p_i)\in\mathbb{N}$ 以及 $\forall f_i\in F\rightarrow\pi_F(f_i)\in\mathbb{N}$

（2） 对于任意 $n\in\mathbb{N}$ 集合 $P_n=\left\{p_i\big|\pi_P(p_i)=n\right\}$ 和 $F_n=\left\{f_i\big|\pi_F(f_i)=n\right\}$ 均为[[MK44][可数集]]

***** 可能性证明

以 $F$ 为例，定义 $F_n=\left\{f_{ij}\big|i=n\land j\in\mathbb{N}\right\}$ 进一步定义 $F=\bigcup_{n\in\mathbb{N}}F_n$

根据[[MK49][定理1]]可得 $F$ 仍为[[MK48][之多可数集]]，又有 $F_1$ 是可数集，且 $F_1\subset F$

故根据[[MK355][定理7]]可得 $F$ 的[[MK3][基数]]大于等于 $F_1$ ，结合 $F$ 是至多可数集可得 $F$ 是可数集

同理可证存在满足符号假定的 $P$ 

**** 推导符号<<MK456>>

同理定义以下推导符号符号：

（1） 逻辑符号：分别为逻辑与，逻辑或，逻辑双向蕴含。即 $\{\land,\lor,\leftrightarrow\}$

（2） 量词符号：存在量词 $\exists$

**** 量词的顺序<<MK128>>

量词（不加括号）固定为从左至右叠加条件

即当有多个量词排列时，其中某一个量词的条件为其左边量词均成立的情况下，该量词成立，以此类推。

*** 基本符号串<<MK443>>

定义 $\Sigma_0=\{(,\lnot,\to,),\forall,\hat{=}\}\cup X\cup\{,\}$ 为所有[[MK116][固定符号]]，最后一项为逗号。

定义 $\Sigma_1=C\cup F\cup P$ 为所有[[MK116][非固定符号]]。定义 $\Sigma=\Sigma_0\cup\Sigma_1$ 以及 $\Sigma^n$ 为 $\Sigma$ 的 $n$ 次[[MK153][笛卡尔积]]

最终定义基本符号串 $\Sigma^*=\bigcup_{n\in\mathbb{N}}\Sigma^n$

**** 连接运算

定义 $s_1=<a_1,...,a_n>\in\Sigma^*\land s_2=<b_1,...,b_m>\in\Sigma^*$ 则 $s_1*s_2=<a_1,...,a_n,b_1,...,b_m>$ 

*** 项<<MK133>>

给定 $\Sigma^*$ ，定义合成封闭子集 $\mathcal{S}\subset\Sigma^*$ 为满足以下条件的集合：

（1） $X\cup C\subset S$ 即 $S$ 包含所有[[MK130][变元符号]]和[[MK129][常元符号]]

（2） 对于任意 $f_i\in F$ 以及 $\tau_i\in S,1\leq i\leq\pi_F(f_i)}$ 有字符串 $f_i(\tau_1,...,\tau_{\pi_F(f_i)})\in S$

则定义 $T=\bigcap\mathcal{S}$ 是所有合成封闭子集的交，则 $T$ 中的元素为项

**** 相等

对于任意 $\tau_1\in T,\tau_2\in T$ 若满足 $|\tau_1|=|\tau_2|\land\forall i<|\tau_1|\rightarrow \tau_1[i]=\tau_2[i]$

则称表达式 $\tau_1,\tau_2$ 相等

**** 最小引理<<MK120>>

$T$ 是最小的合成封闭子集

***** 证明

[[MK395][同理]]可证

**** 可读性引理<<MK121>>

若 $\tau\in T$ 是[[MK133][项]]，那么以下两种情况有且仅有一种成立：

（1） $\tau=x_i\in X\lor\tau=c_i\in C$ 即是[[MK130][变元符号]]或[[MK129][常元符号]]

（2） $\tau=f_i(\tau_1,...,\tau_n)$ 其中 $\tau_i\in T,1\leq i\leq n$

***** 证明

显然（1），（2）不能同时成立

假设 $\tau$ 不是上述两种情况，根据[[MK120][最小引理]]可得 $T$ 是最小的合成封闭子集

则 $T-\{\tau\}$ 亦为合成封闭子集，与 $T$ 的最小引理矛盾，故假设不成立。

**** 括号对应引理<<MK136>>

任意 $\tau\in T$ 若有 $\tau[|\tau|]=)$ 则

（1） 任意 $\tau[i],i\ne|\tau|$ 与 $\tau[1]$ 之间的 $($ 的个数大于 $)$ 的个数

（2） 任意 $\tau[i],i\ne2$ 与 $\tau[|\tau|]$ 之间的 $($ 的个数小于 $)$ 的个数

（3） 有且仅有 $\tau[2]=($ 满足其间的 $($ 和 $)$ 个数相等

***** 证明

根据[[MK121][可读性]]易证左右括号成对出现。则根据以下证明， $\tau$ 为有限长度，以及数学归纳法可证

****** $2$ 对括号

此时根据[[MK121][可读性]]可知有且仅有 $\tau=f_u(\tau_1,....,\tau_n)$ 其中 $\tau_j=f_v(\tau_1,...,\tau_m)\land \forall i\ne j\rightarrow\tau_{i}\in X\cup C$ 的情况

则 $\tau[2],\tau[|\tau|]$ 之间有一对 $(,)$ 满足（1），$\tau_j[2]$ 与 $\tau[|\tau|]$ 间有 $1$ 个 $)$ ， $0$ 个 $($ 满足（2）

同理可证满足（3）

****** 归纳假设

假设对于任意括号对数小于 $n$ 大于 $2$ 的[[MK133][项]]均满足命题（1）（2）（3）

****** $n$ 对括号

显然根据[[MK121][可读性]]必有 $\tau=f_u(\tau_1,....,\tau_n)$ 形式

******* 证明（1）<<MK126>>

对于任意 $\tau[i]=(,i\ne2$ 显然必在 $\tau_i$ 中，设对应位置为 $\tau[j]$ 又根据[[MK121][可读性]]若 $\tau_i$ 包含 $($ 则 $\tau[|\tau|]=)$

显然 $\tau_i$ 括号对数小于 $n$ ，则根据归纳假设有 $\tau_i[j]$ 与 $\tau[|\tau|]$ 之间 $($ 个数 $h$ 小于 $)$ 个数 $k$ ，即 $h<k$

同理根据归纳假设对于任意 $\tau_z,i<z<n$ 有 $(,)$ 个数相等，设 $\tau_{i+1},...,\tau_n$ 里的括号对数为 $a$

则 $\tau_i[j]$ 与 $\tau[|\tau|]$ 间 $($ 的个数为 $\tau_i[j]$ 与 $\tau[|\tau|]$ 间 $($ 个数， $\tau_{i+1},...,\tau_n$ 中 $($ 个数，即 $h+a$

$\tau_i[j]$ 与 $\tau[|\tau|]$ 间 $)$ 的对数为为 $\tau_i[j]$ 与 $\tau[|\tau|]$ 间 $)$ 个数， $\tau_{i+1},...,\tau_n$ 中 $)$ 个数以及 $\tau_i[j]$ ，即 $k+1+a$

结合 $h<k$ 显然有 $h+a<k+1+a$ 即命题（1）成立

******* 证明（2）

与[[MK126][证明（1）]]类似可证

******* 证明（3）<<MK134>>

根据以上证明，不存在 $\tau[i],i\ne2$ 满足条件（3）

又由于 $\tau_i$ 括号对数小于 $n$ 根据归纳假设显然 $\tau_i$ 中 $($ 和 $)$ 个数相等，则显然t条件（3）成立

**** 前缀引理<<MK125>>

若 $\tau=<\tau_1,...,\tau_n>\in T$ 是[[MK133][项]]，那么其任意真前缀 $\tau_k=<\tau_1,...,\tau_k>,k<n$ 均有 $\tau_k\not\in T$

***** 证明

根据以下证明， $\tau$ 为有限长度，以及数学归纳法可证

****** 当 $|\tau|=1$ 时

根据[[MK121][可读性引理]]当 $\tau=c_i$ 或 $\tau=x_i$ 时其真前缀有且仅有空字符串，根据[[MK120][最小引理]]可得空串不属于 $T$

****** 归纳假设

对于任意 $|\tau|<n$ 其任意真前缀 $\tau_k$ 均有 $\tau_k\not\in T$

****** 当 $|\tau|=n$ 时

根据[[MK121][可读性引理]]仅有可能 $\tau=f_i(\tau_1,...,\tau_n)$ 显然 $f_1\not\in T$

若 $\tau_k=f_i(\tau'_1,...,\tau'_m)$ 则易证必有一对 $\tau'_i,\tau_i$ 满足一个为另一个的真前缀

显然 $|\tau_i|<n,|\tau'_i|<n$ 其任意真前缀均不属于 $T$ 则根据[[MK121][可读性]] $\tau_k,\tau$ 有一个不属于 $T$

又由于 $\tau\in T$ 为给定，故必有 $\tau_k\not\in T$

***** 推论<<MK435>>

若 $\tau\in T$ 是[[MK133][项]]，则任意 $\tau[i]=($ 则存在唯一 $\tau[j]=)\land j>i$ 满足 $<\tau[i-1],\tau[i],...,\tau[j]>\in T$

****** 证明

******* 唯一性

假设存在 $j'\ne j$ 满足 $<\tau[i-1],\tau[i],...,\tau[j']>\in T$

则显然 $<\tau[i-1],\tau[i],...,\tau[j]>$ 和 $<\tau[i-1],\tau[i],...,\tau[j']>$ 必定一个为另一个的真前缀

与[[MK125][前缀引理]]矛盾，故假设不成立

******* 存在性

根据[[MK121][可读性]]易证左右括号成对出现。根据以下证明， $|\tau|<\infty$ 以及数学归纳法可证存在性

******** 一对括号

显然有且仅有 $\tau=f_u(\tau_1,....,\tau_n)$ 其中 $\forall 1\leq i\leq n\rightarrow\tau_{i}\in X\cup C$ 情况

则对于唯一的 $\tau[2]=($ 存在 $k=\tau[|\tau|]$ 使得 $<\tau[1],\tau[2],...,\tau[|\tau|]>=\tau\in T$

******** 归纳假设

对于括号对数小与 $n$ 的 $\tau\in T$ 任意 $\tau[i]=($ 存在对应 $\tau[j]=)\land j>i$ 满足命题

******** $n$ 对括号时

若 $\tau$ 有 $n$ 对括号，则根据[[MK138][唯一可读]]有 $\tau=f_u(\tau_1,....,\tau_n),\tau_i\in T$ 形式，且唯一

显然 $\tau_i$ 中的括号对数小于等于 $n$ 即根据归纳假设 $\tau_i$ 中任意 $($ 均能在 $\tau_i$ 中找到唯一 $)$ 满足条件

对于 $\tau[2]=($ 存在 $\tau[|\tau|]=)$ 满足条件。

**** 后缀引理<<MK150>>

若 $\tau=<t_1,...,t_n>\in T$ 是[[MK133][项]]，那么其任意真后缀 $\tau_k=<t_k,...,t_n>,k<n$ 均有 $\tau_k\not\in T$

***** 证明

根据[[MK121][可读性]]任意含有括号的[[MK133][项]]有且仅有 $\tau=f_u(\tau_1,....,\tau_n),\tau_i\in T$ 形式

根据[[MK136][括号对应引理]]若 $k>2$ 则 $\tau_k$ 中不存在与 $\tau_k[|\tau_k|]=)$ 对应的 $($ 使其间 $($ 和 $)$ 相等

继续根据[[MK136][括号对应引理]]可得 $\tau_k\not\in T$

若 $k=1$ 则根据[[MK121][可读性]]不存在 $(\tau_1,...,\tau_n)$ 形式属于 $T$ ，即任意真后缀均不属于 $T$

***** 推论

若 $\tau\in T$ 是[[MK133][项]]，则任意 $\tau[j]=)$ 则存在唯一 $\tau[i]=(\land j>i$ 满足 $<\tau[i-1],\tau[i],...,\tau[j]>\in T$

****** 证明

根据[[MK150][后缀引理]]可用类似[[MK435][推论]]证明方法证明

**** 唯一可读性<<MK138>>

若 $\tau\in T$ 是[[MK133][项]]，那么以下两种情况有且仅有一种成立：

（1） 存在唯一的[[MK129][常元符号]] $c_i\in C$ 使得 $\tau=c_i$

（2） 存在唯一的[[MK130][变元符号]] $x_i\in X$ 使得 $\tau=x_i$

（3） 存在唯一[[MK131][函数符号]] $f_i\in F$ 以及唯一的一组 $<\tau_1,...,\tau_n>\in T^n$ 满足 $\tau=f_i(\tau_1,...,\tau_n)$

***** 证明

根据以下证明， $\tau$ 为有限长度，以及数学归纳法可证

****** 当 $|\tau|=1$ 时

根据[[MK121][可读性引理]]仅有 $\tau=c_i$ 或 $\tau=x_i$ ，又根据[[MK122][符号假定]]可得所有 $X,C$ 中元素均不同

故可得唯一

****** 归纳假设

对于任意 $|\tau|<n$ 唯一可读性成立

****** 当 $|\tau|=n$ 时<<MK139>>

根据[[MK121][可读性引理]]仅有可能 $\tau=f_i(\tau_1,...,\tau_n)$ 假设存在 $\tau'=f'_i(\tau'_1,...,\tau'_m)$ 满足：

（1） $\tau=\tau'$

（2） $f_i\ne f'_i$ 或存在 $i$ 使得 $\tau_i\ne\tau'_i$

则

（1） 根据[[MK122][符号假定]]若 $f'_i\ne f_i$ 则 $\tau[1]\ne\tau'[1]$ 继而与（1）矛盾，则有 $\tau'=f_i(\tau'_1,...,\tau'_m)$

（2） 若有 $\sum_{i=1}^n|\tau_i|\ne\sum_{i=1}^m|\tau'_i|$ 则有 $|\tau|\ne|\tau'|$ 显然有 $\tau\ne\tau'$

（3） 若 $m=n\land|\tau_i|=|\tau'_i|$ 则由于 $|\tau_i|<n$ 可得其形式唯一，可得 $\tau_i=\tau'_i$ 与 $\tau'$ 定义矛盾

（4） 若 $\sum_{i=1}^n|\tau_i|=\sum_{i=1}^m|\tau'_i|$ 且不满足（3），易证必存在一对 $\tau_i,\tau'_i$ 一个是另一个的真前缀

     根据[[MK125][前缀引理]]可得必有一个不属于 $T$ 进一步根据[[MK121][可读性]]易证 $\tau'\not\in T$

综上所述，当 $|\tau|=n$ 根据归纳假设，不存在 $\tau'$ 打破唯一性

*** 表达式<<MK135>>

给定 $\Sigma^*$ 期[[MK133][项]]集为 $T$ ，定义表达式封闭子集 $L\subset\Sigma^*$ 为满足以下五个条件的集合：

（1） 若 $\tau_1\in T\land\tau_2\in T$ 则 $(\tau_1\hat{=}\tau_2)$

（2） 若 $\tau_i\in T,1\leq i\leq n$ 且 $p_i\in P,\pi_P(p_i)=n$ 则 $p_i(\tau_1,...,\tau_n)\in L$

（3） 若 $\phi\in L$ 则 $(\lnot\phi)\in L$

（4） 若 $\phi_1\in L\land\phi_2\in L$ 则 $(\phi_1\to\phi_2)\in L$

（5） 若 $\phi\in L$ 则 $(\forall x_i\phi)\in L$ ，其中 $x_i\in X$ 是[[MK130][变元]]

进一步定义 $\mathcal{L}=\bigcap L$ 即所有表达式封闭子集的交，则 $\mathcal{L}$ 中的元素为表达式

进一步定义（1）（2）为原始表达式，（3）（4）（5）为递归表达式

**** 相等<<MK141>>

对于任意 $\phi_1\in\mathcal{L},\phi_2\in\mathcal{L}$ 若满足 $|\phi_1|=|\phi_2|\land\forall i<|\phi_1|\rightarrow \phi_1[i]=\phi_2[i]$

则称表达式 $\phi_1,\phi_2$ 相等

**** 最小引理<<MK119>>

$\mathcal{L}$ 是最小的表达式封闭集合

***** 证明

[[MK395][同理]]可证

**** 可读性引理<<MK127>>

若 $\phi\in\mathcal{L}$ 是[[MK135][表达式]]，那么以下五种情况有且仅有一种成立：

（1） 存在 $\tau_1\in T\land\tau_2\in T$ 使得 $\phi=(\tau_1\hat{=}\tau_2)$

（2） 存在 $\tau_i\in T,1\leq i\leq n$ 以及 $p_i\in P,\pi_P(p_i)=n$ 使得 $\phi=p_i(\tau_1,...,\tau_n)$

（3） 存在 $\psi\in\mathcal{L}$ 使得 $\phi=(\lnot\psi)$

（4） 存在 $\psi_1\in\mathcal{L}\land\psi_2\in\mathcal{L}$ 使得 $\phi=(\psi_1\to\psi_2)$

（5） 存在 $\psi\in\mathcal{L}$ 使得 $\phi=(\forall x_i\psi)$ ，其中 $x_i\in X$ 是[[MK130][变元]]

***** 证明

****** 互斥

对于任意 $\phi\in\mathcal{L}$

a. 若为（2）则 $\phi[1]=p_i$ 与其他h种冲突

b. 若为情况（5）则 $\phi[2]=\forall$ 与（1）（3）（4）冲突

c. 若为情况（3）则 $\phi[2]=\lnot$ 与（1）（4）冲突

d. 若为情况（4）则 $\phi$ 中包含 $\to$ 与（1）冲突

综上所述，五种情况最多只能有其中一种成立

****** 必然有一种成立

定义 $L$ 为仅包含上述五中情况元素的集合

根据[[MK135][表达式封闭集合]]定义可知，对于任意表达式封闭集合 $L'$ 有 $L\subset L'$ ，则根据 $\mathcal{L}$ 定义有 $L\subset\mathcal{L}$

同理根据定义可知 $L$ 是表达式封闭集合，则根据[[MK119][最小引理]]有 $\mathcal{L}\subset L$ ，故根据[[MK21][自反性]]有 $L=\mathcal{L}$

**** 括号对应引理<<MK137>>

任意 $\phi\in\mathcal{L}$ 有

（1） $\phi[|\phi|]=)$ 且 $\phi[2]=($ 或 $\phi[1]=($ 有且仅有一种成立，定义 $k\in\{1,2\}$ 满足 $\phi[k]=($

（2） 任意 $\phi[i],i\ne|\phi|$ 与 $\phi[k]$ 之间的 $($ 的个数大于 $)$ 的个数

（3） 任意 $\phi[i],i\ne2$ 与 $\phi[|\phi|]$ 之间的 $($ 的个数小于 $)$ 的个数

（4） 有且仅有 $\phi[|\phi|]$ 和 $\phi[k]$ 之间的 $($ 和 $)$ 个数相等

***** 证明

****** 证明（1）

根据[[MK127][可读性]]可得任意 $\phi\in\mathcal{L}$ 均有 $\phi[|\phi|]=)$ ，且要么 $\phi[2]=($ 要么 $\phi[1]=($ 

****** 证明其他<<MK437>>

对于任意 $\phi\in\mathcal{L}$ ，定义 $z(\phi)$ 为 $\phi$ 中去除所有[[MK133][项]]后 $($ 和 $)$ 的对数

则根据以下证明， $\phi$ 为有限长度，以及数学归纳法可证

******* $z(\phi)\leq 3$ 时

根据[[MK127][可读性]]有且仅有 $(\lnot\psi),(\psi_1\to\psi_2),(\forall x_i\psi)$ 形式

其中 $\psi,\psi_1,\psi_2$ 均为 $(\tau_1\hat{=}\tau_2),p_i(\tau_1,...,\tau_n)$ 形式， $\tau_i\in T$ 是[[MK133][项]]

根据项的[[MK136][括号对应原理]]易证命题（2）（3）（4）成立

******* 归纳假设

对于任意 $3<z(\phi)<n$ 均有命题（2）（3）（4）成立

******* $z(\phi)=n$ 时

根据[[MK127][可读性]]结合之前[[MK126][证明方法]]易证命题（2）和命题（3），[[MK134][同理可证]]命题（4）

**** 前缀引理<<MK140>>

若 $\phi=<\phi_1,...,\phi_n>\in\mathcal{L}$ 是[[MK135][表达式]]，那么其任意真前缀 $\phi_k=<\phi_1,...,\phi_k>,k<n$ 均有 $\phi_k\not\in\mathcal{L}$

***** 证明

任意 $\phi\in\mathcal{L}$ 根据[[MK137][括号对应引理]]要么 $\phi[2]=($ 要么 $\phi[1]=($ ，定义 $z\in\{1,2\}$ 满足 $\phi[z]=($

则对于任意真前缀 $\phi_k$ 若 $\phi_k[|\phi_k|]\ne)$ 则根据[[MK137][括号对应引理]]（1）得 $\phi_k\not\in T$

若 $\phi_k[|\phi_k|]=)$ 则根据[[MK137][括号对应引理]]（2） $\phi_k[z],\phi_k[|\phi_k|]$ 之间的 $($ 的个数大于 $)$ 的个数

则又根据[[MK137][括号对应引理]]（4）可得 $\phi_k\not\in T$

***** 推论<<MK436>>

若 $\phi=<\phi_1,...,\phi_n>\in\mathcal{L}$ 是[[MK135][表达式]]，则对于任意不在[[MK133][项]]中的 $\phi[i]=($ 存在唯一 $j>i$ 使以下两项有且仅有一项成立

（1） $<\phi[i],...,\phi[j]>\in\mathcal{L}$

（2） $<\phi[i-1],\phi[i],...,\phi[j]>\in\mathcal{L}$

****** 证明

******* （1）（2）互斥

假设对于 $\phi[i]=($ 存在 $\phi[k_1]=)$ 满足（1）， $\phi[k_2]=)$ 满足（2）

根据[[MK127][可读性]]显然 $<\phi[i-1],\phi[i],...,\phi[k_2]>$ 有 $p_i(\tau_1,...,\tau_n)$ 形式，则 $<\phi[i],...,\phi[k_2]>$ 中不包含 $\hat{=},\forall,\to,\lnot$ 

若 $k_1\leq k_2$ 根据[[MK127][可读性]] $<\phi[i],...,\phi[k_2]>$ 中必包含 $\hat{=},\forall,\to,\lnot$ 中至少一个，矛盾

若 $k_1>k_2$ 则根据[[MK137][括号对应引理]]可得 $\phi[i],\phi[k_1]$ 之间 $($ 的个数大于 $)$ 的个数

又根据[[MK137][括号对应引理]]可得任意 $\psi\in\mathcal{L}$ 均有最左最右括号对应，故 $<\phi[i],...,\phi[k_2]>\not\in\mathcal{L}$ 矛盾

综上所述，假设不成立

******* 唯一性

假设存在 $k_1\ne k_2$ 满足 $<\phi[i],...,\phi[k_1]>\in\mathcal{L},<\phi[i],...,\phi[k_2]>\in\mathcal{L}$

则一个必为另一个真前缀，故与[[MK140][前缀引理]]矛盾，故假设不成立

同理可证不存在 $k_1\ne k_2$ 满足 $<\phi[i-1],\phi[i],...,\phi[k_1]>\in\mathcal{L},<\phi[i-1],\phi[i],...,\phi[k_2]>\in\mathcal{L}$

******* 存在性

对于任意 $\phi\in\mathcal{L}$ ，定义 $z(\phi)$ 为 $\phi$ 中去除所有[[MK133][项]]后 $($ 和 $)$ 的对数

根据以下证明，$|\phi|<\infty$ 以及数学归纳法可证存在性

******** $z(\phi)=1$ 时

根据[[MK127][可读性]]有且仅有 $\phi=(\tau_1\hat{=}\tau_2)$ 和 $\phi=p_i(\tau_1,...,\tau_n)$ 形式

则对于唯一不在[[MK133][项]]中的 $\phi[1]=($ 或 $\phi[2]=($ 存在 $\phi[|\phi|]=)$ 满足命题

******** 归纳假设

对于任意 $z(\phi)<n$ 均存在对应 $)$ 使得 $<\phi[i],...,\phi[j]>\in\mathcal{L}$ 或 $<\phi[i-1],\phi[i],...,\phi[j]>\in\mathcal{L}$

******** $z(\phi)=n$ 时

根据[[MK127][可读性]]有且仅有 $\phi=(\lnot\psi),\phi=(\psi_1\to\psi_2),\phi=(\forall x_i\psi)$ 三种情况

显然 $z(\psi)<n,z(\psi_1)<n,z(\psi_2)<n$

则根据归纳假设对于任意 $\psi,\psi_1,\psi_2$ 内且不在[[MK133][项]]中的 $($ 均存在 $\psi,\psi_1,\psi_2$ 中存在 $)$

使得 $<\phi[i],...,\phi[j]>\in\mathcal{L}$ 或 $<\phi[i-1],\phi[i],...,\phi[j]>\in\mathcal{L}$

又对于唯一不在 $\psi,\psi_1,\psi_2$ 的 $\phi[1]=($ 有 $\phi[|\phi|]=)$

使得 $<\phi[i],...,\phi[j]>\in\mathcal{L}$ 或 $<\phi[i-1],\phi[i],...,\phi[j]>\in\mathcal{L}$

**** 唯一可读性<<MK149>>

若 $\phi\in\mathcal{L}$ 是[[MK135][表达式]]，那么以下五种情况有且仅有一种成立：

（1） 存在唯一 $\tau_1\in T\land\tau_2\in T$ 使得 $\phi=(\tau_1\hat{=}\tau_2)$

（2） 存在唯一 $\tau_i\in T,1\leq i\leq n$ 以及 $p_i\in P,\pi_P(p_i)=n$ 使得 $\phi=p_i(\tau_1,...,\tau_n)$

（3） 存在唯一 $\psi\in\mathcal{L}$ 使得 $\phi=(\lnot\psi)$

（4） 存在唯一 $\psi_1\in\mathcal{L}\land\psi_2\in\mathcal{L}$ 使得 $\phi=(\psi_1\to\psi_2)$

（5） 存在唯一 $\psi\in\mathcal{L}$ 使得 $\phi=(\forall x_i\psi)$ ，其中 $x_i\in X$ 是[[MK130][变元]]

***** 证明

对于任意 $\phi\in\mathcal{L}$ ，定义 $z(\phi)$ 为 $\phi$ 中去除所有[[MK133][项]]后 $($ 和 $)$ 的对数

根据以下证明， $\phi$ 为有限长度，以及数学归纳法可证

****** $z(\phi)=1$ 时

根据[[MK127][可读性]]原理有且仅有 $(\tau_1\hat{=}\tau_2),p_i(\tau_1,...,\tau_n)$ 两种形式，根据[[MK139][之前证明]]类似可证唯一性

****** 归纳假设

对于任意 $1<z(\phi)\leq n$ 唯一性均成立

****** $z(\phi)=n$ 时

根据[[MK127][可读性]]原理有且仅有以下情况

******* $\phi=(\lnot\psi)$ 时<<MK142>>

假设不唯一，即存在 $\psi'$ 满足 $\phi=(\lnot\psi')$ 以及以下任意一项：

（1） $|\psi'|\ne|\psi|$

（2） 存在 $i$ 使得 $\psi[i]\ne\psi'[i]$

（3） $\psi',\psi$ 可解析为[[MK127][可读性]]中不同情况

（4） $\psi',\psi$ 只能解析为[[MK127][可读性]]中同一情况，但组成该情况的子[[MK133][项]]和[[MK135][表达式]]不同

根据[[MK140][前缀引理]]与[[MK141][相等]]易证（1）（2）不成立，故有 $\psi=\psi'$

则（3）若成立，同一表达式可有不同情况表述，与[[MK127][可读性]]矛盾，故（3）不成立

又由于 $z(\phi)=n$ 则必有 $z(\psi)=z(\psi')=n-1$

则根据归纳假设，组成该形式的[[MK133][项]]和[[MK135][表达式]]唯一，故（4）不成立

******* $\phi=(\forall x_i\psi)$ 时

上一步同理可证

******* $\phi=(\psi_1\to\psi_2)$ 时

假设不唯一，则存在 $\psi'_1,\psi'_2$ 满足 $\phi=(\psi'_1\to\psi'_2)$ 以及以下任意一项（定义 $\psi=\psi_1\to\psi_2,\psi'=\psi'_1\to\psi'_2$ ）

（1） $|\psi'|\ne|\psi|$

（2） 存在 $i$ 使得 $\psi[i]\ne\psi'[i]$

（3） $\psi'_1$ 与 $\psi_1$ 或 $\psi'_2$ 与 $\psi_2$ 可解析为[[MK127][可读性]]中不同情况

（4） $\psi'_1$ 与 $\psi_1$ 或 $\psi'_2$ 与 $\psi_2$ 只能解析为[[MK127][可读性]]中同一情况，但组成该情况的子[[MK133][项]]和[[MK135][表达式]]不同

[[MK142][同理]]根据[[MK140][前缀引理]]与[[MK141][相等]]易证（1）（2）不成立，即 $\psi=\psi'$

再根据[[MK140][前缀引理]]可得若 $|\psi_1|\ne|\psi'_1|$ 则一个必为另一个真前缀，即必有一个不属于 $\mathcal{L}$ 故必有 $|\psi_1|=|\psi'_1|$

又根据 $\psi=\psi'$ 可推出 $|\psi_2|=|\psi'_2|$ [[MK141][同理]]结合归纳假设易证（3）（4）不成立

*** 自由变元与受限变元<<MK441>>

[[MK130][变元符号]] $x_i$ 是[[MK135][表达式]] $\phi\in\mathcal{L}$ 的自由变元当且仅当 $x_i$ 在 $\phi$ 存在[[MK440][自由出现]]

[[MK130][变元符号]] $x_i$ 是[[MK135][表达式]] $\phi\in\mathcal{L}$ 的受限变元 $x_i$ 在 $\phi$ 中的所有出现均为[[MK440][受限出现]]

定义 $\phi(x_1,...,x_n)$ 表示[[MK135][表达式]]为 $\phi\in\mathcal{L}$ 且 $x_1,...,x_n$ 在 $\phi$ 中[[MK440][自由出现]]

**** 自由出现与受限出现<<MK440>>

若[[MK130][变元符号]] $x_i$ 在[[MK135][表达式]] $\phi\in\mathcal{L}$ 中出现 $\phi[i]=x_i$ 则

（1） 若存在[[MK439][量词辖域]] $\psi=<\phi[u],...,\phi[v]>$ 满足 $i\ne u-1\land\phi[u-1]=x_i\land u\leq i\leq v$

     则称 $x_i$ 在 $\phi[i]$ 处受限出现

（2） 若不存在[[MK439][量词辖域]]满足条件（1），则称 $x_i$ 在 $\phi[i]$ 处自由出现

**** 量词辖域<<MK439>>

任意[[MK135][表达式]] $\phi\in\mathcal{L}$ 中若 $\psi=<\phi[i+2],...,\phi[k-1]>$ 是 $x_i$ 的量词辖域，则

（1） $\phi[i]=\forall\land\phi[i+1]=x_i$

（2） $\phi[k]=)\land k> i+1$ 满足 $<\phi[i-1],\phi[i],...,\phi[k]>=(\forall x_i\psi)\in\mathcal{L}$

根据[[MK438][量词引理]]可得任意 $\phi$ 中的量词 $\forall$ 均有其对应的[[MK130][变元符号]] $x_i$ 以及辖域

**** 量词引理<<MK438>>

任意[[MK135][表达式]] $\phi\in\mathcal{L}$ 若 $<\phi[i],\phi[i+1]>=<\forall,x_i>$ 则：

（1） $\phi[i-1]=($

（2） 存在唯一 $\phi[k]=)\land k> i+1$ 满足 $<\phi[i-1],\phi[i],...,\phi[k]>=(\forall x_i\psi)\in\mathcal{L}$

***** 证明

根据[[MK127][可读性]]若包含 $\forall x_i$ 字符，则有且仅有 $\phi=(\lnot\psi),\phi=(\psi_1\to\psi_2),\phi=(\forall x_i\psi)$ 三种形式

定义 $z(\phi)$ 为 $\phi$ 中去除所有[[MK133][项]]后 $($ 和 $)$ 的对数，利用数学归纳法[[MK437][类似]]可证（1）

当（1）成立时，根据[[MK436][推论]]可证存在唯一 $\phi[k]$ 满足 $<\phi[i-1],\phi[i],...,\phi[k]>\in\mathcal{L}$

又根据[[MK127][可读性]]以及 $<\phi[1],\phi[2],\phi[3]>=(\forall x_i$ 可得有且仅有 $(\forall x_i\psi),\psi\in\mathcal{L}$ 形式满足序列要求

*** 语句<<MK451>>

任意[[MK135][表达式]] $\phi\in\mathcal{L}$ 中的所有[[MK130][变元符号]]均为[[MK441][受限变元]]，则 $\phi$ 称为句子

*** 替换

定义 $\tau\in T$ 是[[MK133][项]]， $\tau_i\in T,1\leq i\leq n$ 亦为项， $\phi\in\mathcal{L}$ 是[[MK135][表达式]]，则

（1） 定义 $\tau(<x_1,...,x_n>,<\tau_1,...,\tau_n>)$ 将项 $\tau$ 中每一个 $x_i,1\leq i\leq n$ 都有 $\tau_i$ 替换后所得的字符串

（2） 定义 $\phi(<x_1,...,x_n>,<\tau_1,...,\tau_n>)$ 将项 $\phi$ 中每一个[[MK440][自由出现]]的 $x_i,1\leq i\leq n$ 都有 $\tau_i$ 替换后所得的字符串

根据[[MK442][替换引理]]可得 $\tau(<x_1,...,x_n>,<\tau_1,...,\tau_n>)\in T$ 以及 $\phi(<x_1,...,x_n>,<\tau_1,...,\tau_n>)\in\mathcal{L}$

**** 替换引理<<MK442>>

若 $\tau\in T$ 是[[MK133][项]]， $\phi\in\mathcal{L}$ 是[[MK135][表达式]]， $\tau_i\in T,1\leq i\leq n$ 亦为项

则 $\tau(<x_1,...,x_n>,<\tau_1,...,\tau_n>)\in T$ 以及 $\phi(<x_1,...,x_n>,<\tau_1,...,\tau_n>)\in\mathcal{L}$

***** 证明

定义 $\tau'=\tau(<x_1,...,x_n>,<\tau_1,...,\tau_n>)$ 以及 $\phi' =\phi(<x_1,...,x_n>,<\tau_1,...,\tau_n>)$ 

****** 项

根据以下证明， $|\tau|<\infty$ ，以及数学归纳法可得

******* 零对括号

显然有且仅有 $\tau=x_i,\tau=c_i$ 形式，若为后者或 $i>n$ ，则 $\tau'=\tau\in T$

若为前者且 $1\leq i\leq n$ 则根据 $\tau_i$ 定义 $\tau'=\tau_i\in T$

******* 归纳假设

任意 $\tau\in T$ 括号对数小于 $k>0$ 时均有 $\tau'\in T$ 即替换后仍为[[MK133][项]]

******* $k$ 对括号

根据[[MK138][唯一可读]]有 $\tau=f_i(\eta_1,...,\eta_n)$ 形式，显然 $\eta_i$ 的括号对数小于 $k$

显然任意 $x_i$ 仅有可能存在与 $\eta_i$ ，则根据归纳假设可得 $\eta'_i=\eta_i(<x_1,...,x_n>,<\tau_1,...,\tau_n>)\in T$

又根据[[MK133][项]]的定义可得 $f_i(\eta'_1,...,\ete'_n)\in T$

****** 表达式

对于任意 $\phi\in\mathcal{L}$ ，定义 $z(\phi)$ 为 $\phi$ 中去除所有[[MK133][项]]后 $($ 和 $)$ 的对数

则根据以下证明， $\phi$ 为有限长度，以及数学归纳法可证

******* $z(\phi)=1$ 时

根据[[MK127][可读性]]有且仅有 $\phi=(\tau_1\hat{=}\tau_2),\phi=p_i(\tau_1,...,\tau_n)$ 形式

根据上一步证明可得 $\tau'_i=\tau_i(<x_1,...,x_n>,<\tau_1,...,\tau_n>)\in T$

则显然 $\phi'=(\tau'_i\hat{ =}\tau'_2)$ 或 $\phi'=p_i(\tau'_1,...,\tau'_n)$ 根据[[MK135][表达式]]定义可得 $\phi'\in\mathcal{L}$

******* 归纳假设

当 $1<z(\phi)<n$ 时有 $\phi' =\phi(<x_1,...,x_n>,<\tau_1,...,\tau_n>)\in\mathcal{L}$

******* $z(\phi)=n$ 时

根据[[MK127][可读性]]有且仅有 $\phi=(\lnot\psi),\phi=(\psi_1\to\psi_2),\phi=(\forall x_i\psi)$ 形式

显然根据[[MK440][定义]]当 $\phi=(\forall x_i\psi)$ 时 $\phi[3]=x_i$ 不是自由出现，故不能替换

其他任意 $\psi,\psi_1,\psi_2$ 显然均有 $z(\psi)<n\land z(\psi_1)\land z(\psi_2)<n$

根据归纳假设 $\psi'\in\mathcal{L},\psi_1'\in\mathcal{L},\psi_2'\in\mathcal{L}$ 则根据[[MK135][表达式定义]]有 $(\lnot\psi')\in\mathcal{L},(\psi'_1\to\psi'_2)\in\mathcal{L},(\forall x_i\psi')\in\mathcal{L}$

即有 $\phi'\in\mathcal{L}$

**** 可替换性

任意[[MK135][表达式]] $\phi\in\mathcal{L}$ 若包含[[MK440][自由出现]]的[[MK130][变元符号]] $x_i$ ，以及 $\tau_i\in T$ 且 $\tau$ 中包含的所有变元符号集合为 $\{x_{j_1},...,x_{j_k}\}$

若 $\phi$ 中[[MK440][自由出现]]的 $x_i$ 可被 $\tau$ 替换，则 $\phi$ 中不存在 $x_{j_u},1\leq u\leq k$ 的[[MK439][量词辖域]] $\psi_u=<\phi[i_u],...,\phi[z_u]>$ 包含 $x_i$

*** 语言<<MK444>>

对于任意 $\mathcal{A}\subset\Sigma_1=C\cup F\cup P$ 且 $\mathcal{A}\ne\varnothing$ ，即 $\mathcal{A}$ 是[[MK129][常元符号]]、[[MK131][函数符号]]和[[MK132][谓词符号]]的非空子集

则定义 $\Sigma_{\mathcal{A}}=\Sigma_0\cup\mathcal{A}$ 以及[[MK443][基本符号串]] $\Sigma^*_{\mathcal{A}}=\bigcup_{n\in\mathbb{N}}\Sigma^n_\mathcal{A}$

同理根据 $\Sigma_\mathcal{A}$ 定义[[MK133][项]] $T_\mathcal{A}$ 以及[[MK135][表达式]] $\mathcal{L}_\mathcal{A}$ ，则称 $\mathcal{L}_\mathcal{A}$ 为 $\mathcal{A}$ 生成的语言

**** 扩充与裁剪<<MK482>>

若有 $\mathcal{A}_1\subset\mathcal{A}_2\subset\Sigma_1=C\cup F\cup P$ 则称 $\mathcal{L}_{\mathcal{A}_1}$ 是 $\mathcal{L}_{\mathcal{A}_2}$ 的扩充语言， $\mathcal{L}_{\mathcal{A}_2}$ 是 $\mathcal{L}_{\mathcal{A}_1}$ 的裁剪语言

**** 引理

子语言是语言的子集 $\mathcal{L}_\mathcal{A}\subset\mathcal{L}$

***** 证明

当 $\phi\in\mathcal{L}_\mathcal{A}$ 时说明 $\phi$ 可被 $\mathcal{A}$ 生成，显然由于 $\mathcal{A}\subset\Sigma_1$ 则 $\mathcal{L}$ 中可由同样过程生成 $\phi$

即有 $\phi\in\mathcal{L}$

** 一阶结构

*** 结构（基本语义解释）<<MK446>>

对于[[MK444][语言]] $\mathcal{L}_\mathcal{A}$ 有[[MK151][有序组]] $<M,I>$ 满足：

（1） $M$ 为集合且 $M\ne\varnothing$ 非空

（2） $I$ 是[[MK194][映射]]，满足以下条件:

     a） 若 $c_i\in\mathcal{A}\cap C$ 是[[MK129][常元符号]]，则 $I(c_i)\in M$

     b） 若 $f_i\in \mathcal{A}\cap F$ 是[[MK131][函数符号]]且根据[[MK445][符号假定]]有 $\pi_F(f_i)=n$ ，则 $I(f_i):M^n\to M$ 亦是[[MK194][映射]]

     c） 若 $p_i\in\mathcal{A}\cap P$ 是[[MK132][谓词符号]]且根据[[MK445][符号假定]]有 $\pi_P(p_i)=n$ ，则 $I(p_i)\subset M^n$

则定义 $<M,I>$ 是语言 $\mathcal{L}_\mathcal{A}$ 的结构，其中 $M$ 称为 $\mathcal{L}_\mathcal{A}$ 的论域

***  $\mathcal{M}=<M,I>$ 赋值<<MK447>>

对于[[MK444][语言]] $\mathcal{L}_\mathcal{A}$ 的[[MK446][结构]] $\mathcal{M}=<M,I>$ 存在[[MK130][变元符号]]到 $M$ 的[[MK194][映射]] $v:X\to M$

则称 $v$ 是语言 $\mathcal{L}_\mathcal{A}$ 在结构 $\mathcal{M}$ 上的赋值

*** 项赋值<<MK448>>

对于[[MK444][语言]] $\mathcal{L}_\mathcal{A}$ 的[[MK446][结构]] $\mathcal{M}=<M,I>$ 有 $\mathcal{M}$ [[MK447][赋值]] $v:X\to M$ 则由 $v$ 扩展的项赋值 $\bar{v}$ 满足：

（1） $\bar{v}(x_i)=v(x_i)$ 其中 $x_i\in X$ 是[[MK130][变元符号]]

（2） $\bar{v}(c_i)=I(c_i)$ 其中 $c_i\in C$ 是[[MK129][常元符号]]

（3） $\bar{v}(f_i(\tau_1,...,\tau_n))=I(f_i)(\bar{v}(\tau_1),...,\bar{v}(\tau_n))$ 其中 $\tau_i\in T$ 是[[MK133][项]] 

**** 引理（局部确定性）<<MK450>>

对于[[MK444][语言]] $\mathcal{L}_\mathcal{A}$ 的[[MK446][结构]] $\mathcal{M}=<M,I>$ 有[[MK448][项赋值]] $\bar{u},\bar{v}$ 以及 $\tau\in T_\mathcal{A}$ 是 $\mathcal{A}$ [[MK444][语言]]中的[[MK133][项]]

若对于任意 $\tau$ 中出现的[[MK130][变元符号]] $x_i$ 均有 $u(x_i)=v(x_i)$ ，则有 $v(\tau)=u(\tau)$

***** 证明

****** $|\tau|=1$ 时

根据[[MK138][唯一可读性]]有且仅有以下两种情况：

当 $\tau=x_i$ 时根据[[MK448][项赋值]]有 $u(\tau)=u(x_i)=v(x_i)=v(\tau)$

当 $\tau=c_i$ 时根据[[MK448][项赋值]]有 $u(\tau)=I(c_i)=v(\tau)$

****** 归纳假设

对于任意 $\tau\in T_\mathcal{A}$ 若 $1<|\tau|<n$ 则有 $v(\tau)=u(\tau)$

****** $|\tau|=n$ 时

根据[[MK138][唯一可读性]]有且仅有 $f_i(\tau_1,...,\tau_n)$ 形式，则根据[[MK448][项赋值]]

有 $u(f_i(\tau_1,...,\tau_n))=I(f_i)(u(\tau_1),...,u(\tau_n))$ 以及 $v(f_i(\tau_1,...,\tau_n))=I(f_i)(v(\tau_1),...,v(\tau_n))$

显然对于任意 $\tau_i$ 均有 $|\tau_i|<n$ 即 $v(\tau_i)=u(\tau_i)=m_i\in M$

故有 $u(f_i(\tau_1,...,\tau_n))=I(f_i)(m_1,...,m_n)=v(f_i(\tau_1,...,\tau_n))$

*** 满足<<MK449>>

对于[[MK444][语言]] $\mathcal{L}_\mathcal{A}$ 的[[MK446][结构]] $\mathcal{M}=<M,I>$ 有 $\mathcal{M}$ [[MK447][赋值]] $v:X\to M$ 以及其扩展的[[MK448][项赋值]] $\bar{v}$

则对于任意 $\phi\in\mathcal{L}_\mathcal{A}$ ：

若为[[MK135][原始表达式]]，则若满足：

（1） 若 $\phi=(\tau_1\hat{=}\tau_2)$ 则有 $\bar{v}(\tau_1) =\bar{v}(\tau_2)$

（2） 若 $p_i(\tau_1,...,\tau_n)$ 则有 $<\bar{v}(\tau_1),...,\bar{v}(\tau_n)>\in I(p_i)$

则称结构 $\mathcal{M}$ 与赋值 $v$ 满足 $\phi$ ，记作 $<\mathcal{M},v>\vDash\phi$

若为[[MK135][递归表达式]]，则有

（3） 若 $\phi=(\lnot\psi)$ 则 $<\mathcal{M},v>\vDash(\lnot\psi)$ 的充要条件是 $<\mathcal{M},v>\not\vDash\psi$

（4） 若 $\phi=(\psi_1\to\psi_2)$ 则 $<\mathcal{M},v>\vDash(\psi_1\to\psi_2)$ 的充要条件是 $<\mathcal{M},v>\not\vDash\psi_1$ 或者 $<\mathcal{M},v>\vDash\psi_2$

（5） 若 $\phi=(\forall x_i\psi)$ 则 $<\mathcal{M},v>\vDash(\forall x_i\psi)$ 的充要条件是对于任意[[MK447][赋值]] $\mu:X\to M$

     若满足对于任意 $\phi$ 中除 $x_i$ 的[[MK441][自由变元]] $x_j$ 有 $\mu(x_j)=v(x_j)$ ，则有 $<\mathcal{M},\mu>\vDash(\forall x_i\psi)$

定义 $\mathcal{M}\vDash\phi[a_1,...,a_n],a_i\in M$ 表示[[MK135][表达式]] $\phi\in\mathcal{L}_\mathcal{A}$ 有 $n$ 个[[MK441][自由变元]] $x_1,...,x_n$

且对于任意[[MK447][赋值]] $v$ 若有 $v(x_i)=a_i$ 则有 $<\mathcal{M},v>\vDash\phi$

**** 引理1<<MK477>>

对于[[MK444][语言]] $\mathcal{L}_\mathcal{A}$ 的[[MK446][结构]] $\mathcal{M}=<M,I>$ 以及[[MK135][表达式]] $\phi\in\mathcal{L}_\mathcal{A}$ 中 $x_a$ 为[[MK449][受限变元]]

定义 $\psi$ 满足 $\psi[i]=\begin{cases}\phi[i]&\phi[i]\ne x_a\\x_b&\phi[i]= x_a\end{cases}$ 则有

（1） $\psi\in\mathcal{L}_\mathcal{A}$ 亦为[[MK135][表达式]]

（2） 对于任意[[MK447][赋值]] $v:X\to M$ 有 $<\mathcal{M},v>\vDash\phi$ 的充要条件是 $<\mathcal{M},v>\vDash\psi$

***** 证明

****** 证明（1）

显然 $x_i\in T$ 是[[MK133][项]]，则根据[[MK442][替换引理]]可得 $\psi\in\mathcal{L}$ ，又由于 $\phi\in\mathcal{L}_\mathcal{A}$ 故有若 $\phi[i]\not\in X$ 则 $\phi[i]\in\mathcal{A}$

由于 $\phi[i]=\psi[i],\phi[i]\ne x_a$ 故有若 $\psi[i]\not\in X\land \phi[i]\ne x_a$ 有 $\psi[i]\in\mathcal{A}$

又由于 $\phi[i]=x_a$ 时有 $\psi[i]=x_b\in X$ 故有若 $\psi[i]\not\in X$ 有 $\psi[i]\in\mathcal{A}$ 即有 $\psi\in\mathcal{L}_\mathcal{A}$ 

****** 证明（2）

假设 $<\mathcal{M},v>\vDash\phi$ 证明充分，必要同理可证

根据[[MK441][受限变元]]定义 $\phi$ 中必有 $<\phi[\alpha],\phi[\alpha+1],...,\phi[\alpha+k-1]>=(\forall x_a\phi')$

定义 $z'(\phi)$ 为 $\phi$ 中去除所有[[MK133][项]]后包含 $(\forall x_a\phi')$ 的 $($ 和 $)$ 的对数

******* $z'(\phi)=0$ 时

显然有且仅有 $\phi=(\forall x_a\phi')$ 则定义 $\psi=(\forall x_b\psi')$ 其中 $\psi_1[i]=\begin{cases}\phi'[i]&\phi'[i]\ne x_a\\x_b&\phi'[i]= x_a\end{cases}$ 则根据[[MK449][满足]]

显然 $<\mathcal{M},v>\vDash\phi$ 的充要条件是 $<\mathcal{M},v>\vDash\psi$

******* 归纳假设

对于任意 $z'(\phi)<n$ 均有对于任意赋值 $v:X\to M$ 满足 $<\mathcal{M},v>\vDash\phi$ 的充要条件是 $<\mathcal{M},v>\vDash\psi$

******* $z'(\phi)=n$

根据[[MK149][唯一可读性]]有且仅有以下情况

******** $\phi=(\lnot\phi_1)$

根据 $\psi$ 定义易证有 $\psi=(\lnot\psi_1)$ 其中 $\psi_1[i]=\begin{cases}\phi_1[i]&\phi_1[i]\ne x_a\\x_b&\phi_1[i]= x_a\end{cases}$

显然根据[[MK149][唯一可读性]] $\phi_1$ 中必包含 $(\forall x_a\phi')$ 则根据 $<\mathcal{M},v>\vDash\phi$ 可得 $<\mathcal{M},v>\not\vDash\phi_1$ 

显然 $z'(\phi_1)<n$ 故根据归纳假设有 $<\mathcal{M},v>\not\vDash\psi_1$ 最后根据[[MK449][满足定义]]可得 $<\mathcal{M},v>\vDash\psi$ 

******** $\phi=(\phi_1\to\phi_2)$

根据 $\psi$ 定义易证有 $\psi=(\psi_1\to\psi_2)$ 其中 $\psi_j[i]=\begin{cases}\phi_j[i]&\phi_j[i]\ne x_a\\x_b&\phi_j[i]= x_a\end{cases}$

显然根据[[MK149][唯一可读性]] $\phi_1$ 或 $\phi_2$ 中必包含 $(\forall x_a\phi')$ ，若不包含，则有 $\phi_j=\psi_j$

根据 $<\mathcal{M},v>\vDash\phi$ 可得 $<\mathcal{M},v>\not\vDash\phi_1$ 或 $<\mathcal{M},v>\vDash\phi_2$ 显然 $z'(\phi_1)<n,z'(\phi_2)<n$

故根据归纳假设有 $<\mathcal{M},v>\not\vDash\psi_1$ 或 $<\mathcal{M},v>\vDash\psi_2$ 最后根据[[MK449][满足定义]]可得 $<\mathcal{M},v>\vDash\psi$ 

******** $\phi=(\forall x_i\phi_1)$

根据 $\psi$ 定义易证有 $\psi=(\forall x_i\psi_1)$ 其中 $\psi_1[i]=\begin{cases}\phi_1[i]&\phi_1[i]\ne x_a\\x_b&\phi_1[i]= x_a\end{cases}$ 且 $z'(\phi)>0$ 故 $x_i\ne x_a$

显然根据[[MK149][唯一可读性]] $\phi_1$ 中必包含 $(\forall x_a\phi')$ 则根据 $<\mathcal{M},v>\vDash\phi$ ， $z(\phi)<n$ ，归纳假设

以及[[MK449][满足定义]]易证 $<\mathcal{M},v>\vDash\psi$ 

***** 推论<<MK478>>

对于[[MK444][语言]] $\mathcal{L}_\mathcal{A}$ 的[[MK446][结构]] $\mathcal{M}=<M,I>$ 以及[[MK135][表达式]] $\phi\in\mathcal{L}_\mathcal{A}$ 中 $x_{i_1},...,x_{i_n}$ 为[[MK449][受限变元]]

定义 $\psi$ 满足 $\psi[i]=\begin{cases}\phi[i]&\phi[i]\ne x_{i_j}\\x_{k_j}&\phi[i]= x_{i_j}\end{cases}$ 则有

（1） $\psi\in\mathcal{L}_\mathcal{A}$ 亦为[[MK135][表达式]]

（2） 对于任意[[MK447][赋值]] $v:X\to M$ 有 $<\mathcal{M},v>\vDash\phi$ 的充要条件是 $<\mathcal{M},v>\vDash\psi$

****** 证明

当 $n=1$ 时根据[[MK477][引理1]]可得 $<\mathcal{M},v>\vDash\phi$ 的充要条件是 $<\mathcal{M},v>\vDash\psi$

归纳假设 $n<m$ 时均成立 $<\mathcal{M},v>\vDash\phi$ 的充要条件是 $<\mathcal{M},v>\vDash\psi$

当 $n=m$ 时，替换 $\phi$ 中的 $x_{i_1},...,x_{i_{m-1}}$ 为 $x_{k_1},...,x_{k_{m-1}}$ 得 $\psi_1$ 

则根据归纳假设 $<\mathcal{M},v>\vDash\phi$ 的充要条件是 $<\mathcal{M},v>\vDash\psi_1$

再替换 $\psi_1$ 中的 $x_{i_m}$ 为 $x_{k_m}$ 可得定义中的 $\psi$ ，又根据[[MK477][引理1]] $<\mathcal{M},v>\vDash\psi_1$ 的充要条件是 $<\mathcal{M},v>\vDash\psi$

故根据充要条件传递性有 $<\mathcal{M},v>\vDash\phi$ 的充要条件是 $<\mathcal{M},v>\vDash\psi$

**** 引理2<<MK479>>

对于[[MK444][语言]] $\mathcal{L}_\mathcal{A}$ 的[[MK446][结构]] $\mathcal{M}=<M,I>$ 以及[[MK135][表达式]] $\phi(x_{i_1},...,x_{i_n})$ 其中 $x_{i_j}$ 为 $\phi$ 中出现的[[MK441][自由变元]]

定义 $\psi$ 满足 $\psi[i]=\begin{cases}\phi[i]&\phi[i]\ne x_{i_j}\\x_{k_j}&\phi[i]= x_{i_j}\end{cases}$ 则有：

（1） $\psi\in\mathcal{L}_\mathcal{A}$ 亦为[[MK135][表达式]]

（2） 对于任意 $\mathcal{M}$ [[MK447][赋值]] $u$ 和 $v$ 若有 $v(x_{i_j})=u(x_{k_j})$ 则 $<\mathcal{M},v>\vDash\phi$ 的充要条件是 $<\mathcal{M},u>\vDash\psi$

***** 证明

****** 证明（1）

显然 $x_{k_j}\in T$ 是[[MK133][项]]，则根据[[MK442][替换引理]]可得 $\psi\in\mathcal{L}$ ，又由于 $\phi\in\mathcal{L}_\mathcal{A}$ 故有若 $\phi[i]\not\in X$ 则 $\phi[i]\in\mathcal{A}$

由于 $\phi[i]=\psi[i],\phi[i]\ne x_{i_j}$ 故有若 $\psi[i]\not\in X\land \phi[i]\ne x_{i_j}$ 有 $\psi[i]\in\mathcal{A}$

又由于 $\phi[i]=x_{i_j}$ 时有 $\psi[k]=x_{k_j}\in X$ 故有若 $\psi[i]\not\in X$ 有 $\psi[i]\in\mathcal{A}$ 即有 $\psi\in\mathcal{L}_\mathcal{A}$ 

****** 证明（2）

与[[MK452][局部确定性原理]]同理可证，不在赘述

**** 局部确定性定理<<MK452>>

对于[[MK444][语言]] $\mathcal{L}_\mathcal{A}$ 的[[MK446][结构]] $\mathcal{M}=<M,I>$ 有 $\mathcal{M}$ [[MK447][赋值]] $u$ 和 $v$

对于任意 $\phi\in\mathcal{L}_\mathcal{A}$ 若对于任意 $\phi$ 中[[MK441][自由出现]]的[[MK130][变元符号]] $x_i$ 均有 $u(x_i)=v(x_i)$

则 $<\mathcal{M},v>\vDash\phi$ 的充要条件是 $<\mathcal{M},u>\vDash\phi$ ，其中 $\vDash$ 表[[MK449][满足]]

***** 证明

对于任意 $\phi\in\mathcal{L}$ ，定义 $z(\phi)$ 为 $\phi$ 中去除所有[[MK133][项]]后 $($ 和 $)$ 的对数。定义 $u,v$ 的[[MK448][项赋值]]分别为 $\bar{u},\bar{v}$

根据以下证明， $\phi$ 为有限长度，以及数学归纳法可证

****** $z(\phi)=1$ 时

根据[[MK127][可读性]]原理有且仅有以下两种形式

******* $(\tau_1\hat{=}\tau_2)$

根据[[MK450][引理]]以及定理条件可得 $\bar{u}(\tau_1)=\bar{v}(\tau_1)\land \bar{u}(\tau_2)=\bar{v}(\tau_2)$

根据[[MK449][满足定义]]显然有 $<\mathcal{M},v>\vDash\phi\Leftrightarrow<\mathcal{M},u>\vDash\phi$

******* $\phi=p_i(\tau_1,...,\tau_n)$

根据[[MK450][引理]]以及定理条件可得 $\bar{u}(\tau_i)=\bar{v}(\tau_i)$ 进而有 $<\bar{u}(\tau_1),...,\bar{u}(\tau_n)>=<\bar{v}(\tau_1),...,\bar{v}(\tau_n)>$

根据[[MK449][满足定义]]显然有 $<\bar{u}(\tau_1),...,\bar{u}(\tau_n)>\in I(p_i)\Leftrightarrow<\bar{v}(\tau_1),...,\bar{v}(\tau_n)>\in I(p_i)$

即 $<\mathcal{M},v>\vDash\phi\Leftrightarrow<\mathcal{M},u>\vDash\phi$

****** 归纳假设

对于任意 $1<z(\phi)<n$ 若满足定理条件，则有 $<\mathcal{M},v>\vDash\phi\Leftrightarrow<\mathcal{M},u>\vDash\phi$

****** $z(\phi)=n$ 时

根据[[MK127][可读性]]原理有且仅有以下情况

******* $\phi=(\lnot\psi)$ 时

根据[[MK449][满足定义]]当 $<\mathcal{M},v>\vDash\phi$ 时有 $<\mathcal{M},v>\not\vDash\psi$ 显然 $z(\psi)<n$ ，则根据归纳假设有 $<\mathcal{M},u>\not\vDash\psi$

则又根据[[MK449][满足定义]]有 $<\mathcal{M},u>\vDash\phi$ 反之同理，故可得 $<\mathcal{M},v>\vDash\phi\Leftrightarrow<\mathcal{M},u>\vDash\phi$

******* $\phi=(\psi_1\to\psi_2)$ 时

根据[[MK449][满足定义]]当 $<\mathcal{M},v>\vDash\phi$ 时有 $<\mathcal{M},v>\not\vDash\psi_1\lor<\mathcal{M},v>\vDash\psi_2$ 显然 $z(\psi_1)<n\land z(\psi_2)<n$

则根据归纳假设有 $<\mathcal{M},u>\not\vDash\psi_1\lor<\mathcal{M},u>\vDash\psi_2$ 则根据[[MK449][满足定义]]有 $<\mathcal{M},u>\vDash\phi$

反之同理，故可得 $<\mathcal{M},v>\vDash\phi\Leftrightarrow<\mathcal{M},u>\vDash\phi$

******* $\phi=(\forall x_i\psi)$ 时

根据[[MK449][满足定义]]当 $<\mathcal{M},v>\vDash\phi$ 时有于任意[[MK447][赋值]] $\mu:X\to M$ 

若满足对于任意 $\phi$ 中的[[MK441][自由变元]] $x_i$ 有 $\mu(x_i)=v(x_i)$ ，则 $<\mathcal{M},\mu>\vDash(\forall x_i\psi)$

定义满足上述条件的函数集合为 $\Theta$

则对于任意任意[[MK447][赋值]] $\mu':X\to M$ 若满足 $\phi$ 中的[[MK441][自由变元]] $x_i$ 有 $\mu'(x_i)=u(x_i)$

根据定理条件均有 $\mu'(x_i)=u(x_i)=v(x_i)$ 故有 $\mu'\in\Theta$ 进而有 $<\mathcal{M},\mu'>\vDash(\forall x_i\psi)$

故根据[[MK449][满足定义]]有 $<\mathcal{M},\mu>\vDash(\forall x_i\psi)$ 。反之同理，故可得 $<\mathcal{M},v>\vDash\phi\Leftrightarrow<\mathcal{M},u>\vDash\phi$

***** 推论<<MK453>>

[[MK444][语言]] $\mathcal{L}_\mathcal{A}$ 有[[MK446][结构]] $\mathcal{M}=<M,I>$ ，有[[MK451][语句]] $\phi\in\mathcal{L}_\mathcal{A}$ 则如下命题等价：

（1） 存在[[MK447][赋值]] $v$ 能[[MK449][满足]] $\phi$ ，即 $<\mathcal{M},v>\vDash\phi$

（2） 对于任意[[MK447][赋值]] $v$ 均能[[MK449][满足]] $\phi$ ，即 $<\mathcal{M},v>\vDash\phi$

****** 证明

******* （2）推（1）

显然

******* （1）推（2）

显然 $\phi$ 中不含[[MK441][自由出现]]的[[MK130][变元符号]]，即若 $<\mathcal{M},v>\vDash\phi$ 则对于任意其他[[MK447][赋值]] $u$

均满足[[MK452][局部性定理]]条件，故根可得 $<\mathcal{M},v>\vDash\phi\Leftrightarrow<\mathcal{M},u>\vDash\phi$

**** [[MK456][推导符号]]

***** 逻辑与<<MK457>>

若 $\phi=(\psi_1\land\psi_2)\in\mathcal{L}_\mathcal{A}$ 则 $<\mathcal{M},v>\vDash\phi$ 的充要条件是 $<\mathcal{M},v>\vDash\psi_1$ 且 $<\mathcal{M},v>\vDash\psi_2$

****** 等价表述

$<\mathcal{M},v>\vDash\phi$ 的充要条件是 $<\mathcal{M},v>\vDash(\lnot(\psi_1\to(\lnot\psi_2)))$

******* 证明

根据[[MK449][满足]]可得 $<\mathcal{M},v>\vDash(\lnot(\psi_1\to(\lnot\psi_2)))\Leftrightarrow<\mathcal{M},v>\not\vDash(\psi_1\to(\lnot\psi_2))$

进一步可等价于 $<\mathcal{M},v>\vDash\psi_1$ 且 $<\mathcal{M},v>\not\vDash(\lnot\psi_2)$ 即等价于 $<\mathcal{M},v>\vDash\psi_1$ 且 $<\mathcal{M},v>\not\vDash\psi_2$ 

***** 逻辑或

若 $\phi=(\psi_1\lor\psi_2)\in\mathcal{L}_\mathcal{A}$ 则 $<\mathcal{M},v>\vDash\phi$ 的充要条件是 $<\mathcal{M},v>\vDash\psi_1$ 或 $<\mathcal{M},v>\vDash\psi_2$

****** 等价表述

$<\mathcal{M},v>\vDash\phi$ 的充要条件是 $<\mathcal{M},v>\vDash((\lnot\psi_1)\to\psi_2)$

******* 证明

根据[[MK449][满足]]可得 $<\mathcal{M},v>\vDash((\lnot\psi_1)\to\psi_2)$ 的充要条件是 $<\mathcal{M},v>\not\vDash(\lnot\psi_1)$ 或 $<\mathcal{M},v>\vDash\psi_2$ 

进一步利用满足可得充要条件是 $<\mathcal{M},v>\not\vDash\psi_1$ 或 $<\mathcal{M},v>\vDash\psi_2$ 

***** 逻辑双向蕴含

若 $\phi=(\psi_1\leftrightarrow\psi_2)\in\mathcal{L}_\mathcal{A}$ 则 $<\mathcal{M},v>\vDash\phi$ 的充要条件是下列两个条件满足其一

（1） $<\mathcal{M},v>\vDash\psi_1$ 且 $<\mathcal{M},v>\vDash\psi_2$

（2） $<\mathcal{M},v>\not\vDash\psi_1$ 且 $<\mathcal{M},v>\not\vDash\psi_2$

****** 等价表述

$<\mathcal{M},v>\vDash\phi$ 的充要条件是 $<\mathcal{M},v>\vDash((\psi_1\to\psi_2)\land(\psi_2\to\psi_1))$

******* 证明

根据[[MK457][逻辑与]]可得 $<\mathcal{M},v>\vDash((\psi_1\to\psi_2)\land(\psi_2\to\psi_1))$

的充要条件为 $<\mathcal{M},v>\vDash(\psi_1\to\psi_2)$ 且 $<\mathcal{M},v>\vDash(\psi_2\to\psi_1)$

根据[[MK449][满足]]可得等价于 $<\mathcal{M},v>\not\vDash\psi_1\lor<\mathcal{M},v>\vDash\psi_2$ 且 $<\mathcal{M},v>\not\vDash\psi_2\lor<\mathcal{M},v>\vDash\psi_1$

此时若 $<\mathcal{M},v>\vDash\psi_2$ 则根据且条件必有 $<\mathcal{M},v>\vDash\psi_1$

同理若 $<\mathcal{M},v>\not\vDash\psi_1$ 必有 $<\mathcal{M},v>\not\vDash\psi_2$

易证反之依然，故等价

***** 存在量词

若 $\phi=(\exists x_i\psi)\in\mathcal{L}_\mathcal{A}$ 则 $<\mathcal{M},v>\vDash\phi$ 的充要条件是存在[[MK447][赋值]] $\mu:X\to M$

若满足对于任意 $\phi$ 中除 $x_i$ 的[[MK441][自由变元]] $x_j$ 有 $\mu(x_j)=v(x_j)$ ，且 $<\mathcal{M},\mu>\vDash\psi$ 

****** 等价表述

$<\mathcal{M},v>\vDash\phi$ 的充要条件是 $<\mathcal{M},v>\vDash(\lnot(\forall x_i(\lnot\psi)))$

******* 证明

根据[[MK449][满足]] $<\mathcal{M},v>\vDash(\lnot(\forall x_i(\lnot\psi)))$ 的充要条件为 $<\mathcal{M},v>\not\vDash(\forall x_i(\lnot\psi))$

同理根据[[MK449][满足]]可得存在[[MK447][赋值]] $\mu:X\to M$ 若满足对于任意 $\phi$ 中除 $x_i$ 的[[MK441][自由变元]] $x_j$ 有 $\mu(x_j)=v(x_j)$ 

使得 $<\mathcal{M},\mu>\not\vDash(\lnot\psi)$ 同样根据[[MK449][满足]]可得其充要条件为 $<\mathcal{M},\mu>\vDash\psi$ 

*** [[MK451][语句]]真假<<MK474>>

对于[[MK444][语言]] $\mathcal{L}_\mathcal{A}$ 有[[MK446][结构]] $\mathcal{M}=<M,I>$ ，对于任意[[MK451][语句]] $\phi\in\mathcal{L}_\mathcal{A}$ 若对于任意 $\mathcal{M}$ [[MK447][赋值]] $v$

均有 $<\mathcal{M},v>\vDash\phi$ 则判断[[MK451][语句]] $\phi$ 为真，反之为假。

根据[[MK453][推论]]可得任意上述条件等价与存在一个 $\mathcal{M}$ [[MK447][赋值]] $v$ [[MK449][满足]] $<\mathcal{M},v>\vDash\phi$ 记作 $\mathcal{M}\vDash\phi$

**** 等价[[MK451][语句]]举例

对于[[MK444][语言]] $\mathcal{L}_\mathcal{A}$ 有[[MK446][结构]] $\mathcal{M}=<M,I>$ ，对于任意[[MK451][语句]] $\phi\in\mathcal{L}_\mathcal{A}$ 定义 $\{x,y\}\in X\cap\mathcal{A}$ 是[[MK116][变元符号]]

定义 $\phi(x)\in\mathcal{L}_\mathcal{A},\psi(x)\in\mathcal{L}_\mathcal{A}$ 是只含[[MK441][自由变元]] $x$ 的[[MK135][表达式]]， $\varphi\in\mathcal{L}_\mathcal{A}$ 是[[MK451][语句]]

以及 $\eta(x,y)\in\mathcal{L}_\mathcal{A}$ 是含[[MK441][自由变元]] $x,y$ 的[[MK135][表达式]]，则有：

***** 改名规则<<MK143>>

\begin{aligned}
\mathcal{M}\vDash(\exists x \phi(x))\Leftrightarrow\mathcal{M}\vDash(\exists y \phi(y))\\
\mathcal{M}\vDash(\forall x \phi(x))\Leftrightarrow\mathcal{M}\vDash(\forall y \phi(y))
\end{aligned}

***** 量词转换<<MK144>>

\begin{aligned}
\mathcal{M}\vDash(\lnot(\exists x\phi(x)))\Leftrightarrow\mathcal{M}\vDash(\forall x(\lnot\phi(x)))\\
\mathcal{M}\vDash(\lnot(\forall x\phi(x)))\Leftrightarrow\mathcal{M}\vDash(\exists x(\lnot \phi(x)))
\end{aligned}

***** 辖域变化<<MK145>>

\begin{aligned}
\mathcal{M}\vDash(\forall x(\phi(x)\lor \varphi))\Leftrightarrow\mathcal{M}\vDash((\forall x\phi(x))\lor \varphi)\\
\mathcal{M}\vDash(\forall x(\phi(x)\land \varphi))\Leftrightarrow\mathcal{M}\vDash((\forall x\phi(x))\land \varphi)\\
\mathcal{M}\vDash(\exists x(\phi(x)\lor \varphi))\Leftrightarrow\mathcal{M}\vDash((\exists x\phi(x))\lor \varphi)\\
\mathcal{M}\vDash(\exists x(\phi(x)\land \varphi))\Leftrightarrow\mathcal{M}\vDash((\exists x\phi(x))\land \varphi)\\
\end{aligned}

***** 量词分配律<<MK146>>

\begin{aligned}
\mathcal{M}\vDash(\forall x(\phi(x)\land \psi(x)))\Leftrightarrow\mathcal{M}\vDash((\forall x\phi(x))\land(\forall x\psi(x)))\\
\mathcal{M}\vDash((\forall x\phi(x))\lor(\forall x\psi(x)))\Rightarrow\mathcal{M}\vDash(\forall x(\phi(x)\lor \psi(x)))\\
\mathcal{M}\vDash(\exists x(\phi(x)\land \psi(x)))\Rightarrow\mathcal{M}\vDash((\exists x\phi(x))\land(\exists x\psi(x)))\\
\mathcal{M}\vDash(\exists x(\phi(x)\lor \psi(x)))\Leftrightarrow\mathcal{M}\vDash((\exists x\phi(x))\lor(\exists x\psi(x)))\\
\end{aligned}

***** 量词交换<<MK147>>

\begin{aligned}
\mathcal{M}\vDash(\forall x(\forall y\eta(x,y)))\Leftrightarrow\mathcal{M}\vDash(\forall y(\forall x \eta(x,y)))\\
\mathcal{M}\vDash(\exists x(\exists y\eta(x,y)))\Leftrightarrow\mathcal{M}\vDash(\exists y(\exists x \eta(x,y)))\\
\end{aligned}

*** 赋值等价

对于 $\mathcal{A}$ 的[[MK133][项]] $T_\mathcal{A}$ 和[[MK444][语言]] $\mathcal{L}_\mathcal{A}$ 的[[MK446][结构]] $\mathcal{M}=<M,I>$ 有 $\mathcal{M}$ [[MK447][赋值]] $u$ 和 $v$

对于任意 $\tau\in T_\mathcal{A}$ 若对于任意 $\tau$ 中出现的[[MK130][变元符号]] $x_i$ 均有 $u(x_i)=v(x_i)$ 则称 $u,v$ 关于 $\tau$ 等价，记作 $u\overset{\tau}{\equiv}v$

对于任意 $\phi\in\mathcal{L}_\mathcal{A}$ 若对于任意 $\phi$ 中[[MK441][自由出现]]的[[MK130][变元符号]] $x_i$ 均有 $u(x_i)=v(x_i)$ 则称 $u,v$ 关于 $\phi$ 等价，记作 $u\overset{\phi}{\equiv}v$

*** 替换定理

对于[[MK444][语言]] $\mathcal{L}_\mathcal{A}$ 有[[MK446][结构]] $\mathcal{M}=<M,I>$ 以及任意 $\mathcal{M}$ [[MK447][赋值]] $v$ 则

（1） 对于任意[[MK133][项]] $\tau\in T_\mathcal{A}$ 设其包含的[[MK130][变元符号]]为 $x_{i_1},...,x_{i_k}$ 若存在任意 $\tau_1,...,\tau_k$ 和 $\mathcal{M}$ [[MK447][赋值]] $u$

     满足$\tau_i\in T_\mathcal{A}$ 以及 $v(x_{i_j})=\bar{u}(\tau_j)$ 则定义 $\tau'$ 为将 $\tau$ 中所有的[[MK130][变元符号]]做 $x_{i_j}$ 到 $\tau_{i_j}$ 的替换后的[[MK133][项]]

     则两个赋值的[[MK448][扩展函数]]有 $\bar{v}(\tau)=\bar{u}(\tau')$

（2） 对于任意[[MK135][表达式]] $\phi\in\mathcal{L}_\mathcal{A}$ 设其包含的[[MK441][自由变元]]为 $x_{i_1},...,x_{i_k}$ 若存在任意 $\tau_1,...,\tau_k$ 和 $\mathcal{M}$ [[MK447][赋值]] $u$

     满足$\tau_i\in T_\mathcal{A}$ 以及 $v(x_{i_j})=\bar{u}(\tau_j)$ 则定义 $\phi'$ 为将 $\phi$ 中所有的[[MK441][自由变元]]做 $x_{i_j}$ 到 $\tau_{i_j}$ 的替换后的[[MK135][表达式]]

     且替换后 $\phi'$ 的 $\tau_i$ 中不含[[MK441][受限变元]]，则有 $<\mathcal{M},v>\vDash\phi$ 等价于 $<\mathcal{M},u>\vDash\phi'$
 
**** 证明

***** 证明（1）<<MK454>>

根据以下证明， $\tau$ 为有限长度，以及数学归纳法可证

****** 当 $|\tau|=1$ 时

根据[[MK138][唯一可读性]]有且仅有以下两种情况

（1） $\tau=c_i$ ，则 $\tau'= c_i$ ，则根据[[MK448][项赋值]]有 $\bar{v}(c_i)=I(c_i)=\bar{u}(c_i)$

（2） $\tau=x_{i_1}$ ，则 $\tau'=\tau_1$ 根据定理条件有 $\bar{v}(x_{i_1}) =\bar{u}(\tau_1)$

****** 归纳假设

对于任意 $1<|\tau|<n$ 的 $\tau\in T_\mathcal{A}$ 定理结论（1）均成立

****** 当 $|\tau|=n$ 时

根据[[MK138][唯一可读性]]有且仅有 $\tau=f_i(\mu_1,...,\mu_n)$ 根据[[MK448][项赋值]] $\bar{v}(\tau)=I(\bar{v}(\mu_1),...,\bar{v}(\mu_n))$

定义 $\mu_i'$ 为将 $\mu_i$ 中所有的[[MK130][变元符号]]根据定理条件（1）替换后的[[MK133][项]]

则根据归纳假设可得 $\bar{v}(\mu_i)=\bar{u}(\mu'_i)$ 则显然有 $\bar{v}(\tau)=I(\bar{v}(\mu_1),...,\bar{v}(\mu_n))=I(\bar{u}(\mu'_1),...,\bar{u}(\mu'_n))=\bar{u}(\tau')$

***** 证明（2）

对于任意 $\phi\in\mathcal{L}_\mathcal{A}$ ，定义 $z(\phi)$ 为 $\phi$ 中去除所有[[MK133][项]]后 $($ 和 $)$ 的对数

****** $z(\phi)=1$ 时

定义 $\mu_i'$ 为将 $\mu_i$ 中所有的[[MK130][变元符号]]根据定理条件（1）替换后的[[MK133][项]]

根据[[MK149][唯一可读性]]，有且仅有以下可能形式

******* $\phi=(\mu_1\hat{=}\mu_2)$

若 $<\mathcal{M},v>\vDash\phi$ ，则根据[[MK449][满足]]等价于 $\bar{v}(\mu_1)=\bar{v}(\mu_2)$ 根据[[MK454][证明（1）]]可得 $\bar{v}(\mu_1)=\bar{u}(\mu'_1),\bar{v}(\mu_2)=\bar{u}(\mu'_2)$

则显然等价于 $\bar{u}(\mu'_1)=\bar{u}(\mu'_2)$ ，进一步根据[[MK449][满足]]与定理条件（2）可得等价于 $<\mathcal{M},u>\vDash\phi'$

******* $\phi=p_i(\mu_1,...,\mu_n)$

若 $<\mathcal{M},v>\vDash\phi$ ，则根据[[MK449][满足]]等价于 $<\bar{v}(\mu_1),...,\bar{v}(\mu_n)>\in I(p_i)$

根据[[MK454][证明（1）]]可得 $\bar{v}(\mu_i)=\bar{u}(\mu'_i)$ ，则显然上述条件等价于 $<\bar{u}(\mu'_1),...,\bar{u}(\mu'_n)>\in I(p_i)$

进一步根据[[MK449][满足]]与定理条件（2）可得等价于 $<\mathcal{M},u>\vDash\phi'$

****** 归纳假设

对于任意 $1<z(\phi)<n$ 的 $\phi\in\mathcal{L}_\mathcal{A}$ 定理结论（2）均成立

****** $z(\phi)=n$ 时

定义 $\psi_i'$ 为将 $\psi_i$ 中所有的[[MK441][自由变元]]根据定理条件（2）替换后的[[MK135][表达式]]

根据[[MK149][唯一可读性]]，有且仅有以下可能形式

******* $\phi=(\lnot\psi_1)$

显然 $\phi'=(\lnot\psi'_1)$ ，则若 $<\mathcal{M},v>\vDash\phi$ 则根据[[MK449][满足]]等价于 $<\mathcal{M},v>\not\vDash\psi_1$

显然 $z(\psi_1)<n$ 故根据归纳假设等价于 $<\mathcal{M},u>\not\vDash\psi'_1$ 即等价于 $<\mathcal{M},u>\vDash\phi'$ 

******* $\phi=(\psi_1\to\psi_2)$ <<MK455>>

显然 $\phi'=(\psi'_1\to\psi'_2)$ ，则若 $<\mathcal{M},v>\vDash\phi$ 则根据[[MK449][满足]]等价于 $<\mathcal{M},v>\not\vDash\psi_1$ 或 $<\mathcal{M},v>\vDash\psi_2$

显然 $z(\psi_1)<n,z(\psi_2)<n$ 故根据归纳假设等价于 $<\mathcal{M},u>\not\vDash\psi'_1\lor<\mathcal{M},u>\vDash\psi'_2$

即等价于 $<\mathcal{M},u>\vDash\phi'$ 

******* $\phi=(\forall x_i\psi_1)$

******** $x_i$ 不在 $\psi_1$ 中[[MK440][自由出现]]

则有 $\phi'=(\forall x_i\psi'_1)$ 则[[MK455][类似可证]] $<\mathcal{M},v>\vDash\phi$ 等价于 $<\mathcal{M},u>\vDash\phi'$

******** $x_i$ 在 $\psi_1$ 中[[MK440][自由出现]]

定义 $\psi_1$ 中所有的自由变元为 $x_{i_1},...,x_{i_k},x_i$ ，其中 $x_{i_1},...,x_{i_k}$ 为 $\phi$ 中所有的[[MK441][自由变元]]

定义 $\psi'$ 为 $\psi_1$ 中除 $x_i$ 的所有的[[MK441][自由变元]]根据定理条件（2）替换后的[[MK135][表达式]]

********* 充分

当 $<\mathcal{M},v>\vDash\phi$ 时，根据[[MK449][满足]]可得对于任意[[MK447][赋值]] $\alpha:X\to M$

若满足对于任意 $\psi_1$ 中除 $x_i$ 的[[MK441][自由变元]] $x_{i_j}$ 有 $\alpha(x_{i_j})=v(x_{i_j})$ 则 $<\mathcal{M},\alpha>\vDash\psi_1$

*假设* $<\mathcal{M},u>\not\vDash\phi'$ 则存在一个[[MK447][赋值]] $\beta:X\to M$

对于任意 $\psi'$ 中除 $x_i$ 的[[MK441][自由变元]] $y_e$ 均有 $\beta(y_e)=u(y_e)$ 且 $<\mathcal{M},\beta>\not\vDash\psi'$

此时 $x_i$ 不是 $\phi'$ 中的[[MK441][自由变元]]，且替换后的项 $\tau_i$ 中不含 $\phi'$ 的[[MK441][受限变元]]

即 $\tau_i$ 中的[[MK130][变元符号]]均为 $\phi'$ 的[[MK441][自由变元]]，则根据[[MK450][局部确定引理]]可得 $\bar{\beta}(\tau_i)=\bar{u}(\tau_i)$

定义一组 $\tau'_{i_1},...,\tau'_{i_k},\tau'_i$ 其中 $\tau'_{i_j}=\tau_{i_j}$ 且 $\tau_i=x_i$ 定义 $\mathcal{M}$ [[MK447][赋值]] $\rho$

满足 $\rho(x_{i_j})=\bar{\beta}(\tau'_{i_j})$ 且 $\rho(x_i)=\bar{\beta}(\tau'_i)$

由于 $z(\psi_1)<n$ 则根据归纳假设对于任意满足条件（2）的一组 $\tau'_{i_1},...,\tau'_{i_k},\tau'_i$ 以及[[MK447][赋值]] $\rho$

均有 $<\mathcal{M},\rho>\vDash\psi_1\Leftrightarrow<\mathcal{M},\beta>\vDash\psi'$ 则 $<\mathcal{M},\rho>\not\vDash\psi_1$

则根据定义，对于任意 $\phi$ 中的[[MK441][自由变元]]均有 $\rho(x_{i_j})=\bar{\beta}(\tau'_{i_j})=\bar{\beta}(\tau_{i_j})=\bar{u}(\tau_{i_j})=v(x_{i_j})$

故可得存在 $\mathcal{M}$ [[MK447][赋值]] $\rho$ 满足足对于任意 $\psi_1$ 中除 $x_i$ 的[[MK441][自由变元]] $x_{i_j}$ 有 $\rho(x_{i_j})=v(x_{i_j})$ 则 $<\mathcal{M},\rho>\not\vDash\psi_1$

即根据[[MK449][满足]]定义可得 $<\mathcal{M},v>\not\vDash\phi$ 与任意 $<\mathcal{M},\alpha>\vDash\psi_1$ 矛盾，故假设不成立，即 $<\mathcal{M},u>\vDash\phi'$ 

********* 必要

当 $<\mathcal{M},u>\vDash\phi'$ 时， *假设* $<\mathcal{M},v>\not\vDash\phi$ 则存在一个[[MK447][赋值]] $\beta:X\to M$

对于任意 $\psi_1$ 中除 $x_i$ 的[[MK441][自由变元]] $x_{i_j}$ 均有 $\beta(x_{i_j})=v(x_{i_j})$ 且 $<\mathcal{M},\beta>\not\vDash\psi_1$

定义一组 $\tau'_{i_1},...,\tau'_{i_k},\tau'_i$ 其中 $\tau'_{i_j}=\tau_{i_j}$ 且 $\tau_i=x_i$ 定义 $\mathcal{M}$ [[MK447][赋值]] $\alpha$

满足对于任意 $\psi'$ 中除 $x_i$ 的[[MK441][自由变元]] $y_e$ 有 $\alpha(y_e)=v(y_e)$ 且 $\alpha(x_i)=\beta(x_i)$

则根据[[MK449][满足]]定义有 $<\mathcal{M},\alpha>\vDash\psi'$

此时 $x_i$ 不是 $\phi'$ 中的[[MK441][自由变元]]，且替换后的项 $\tau_i$ 中不含 $\phi'$ 的[[MK441][受限变元]]

即 $\tau_i$ 中的[[MK130][变元符号]]均为 $\phi'$ 的[[MK441][自由变元]]，则根据[[MK450][局部确定引理]]可得 $\bar{\alpha}(\tau_i)=\bar{u}(\tau_i)=v(x_{i_j})=\beta(x_{i_j})$

又由于 $z(\psi_1)<n$ 则根据归纳假设对于任意满足条件（2）的一组 $\tau'_{i_1},...,\tau'_{i_k},\tau'_i$ 以及[[MK447][赋值]] $\alpha$

均有 $<\mathcal{M},\beta>\vDash\psi_1\Leftrightarrow<\mathcal{M},\alpha>\vDash\psi'$ 则 $<\mathcal{M},\alpha>\not\vDash\psi_1$ 显然矛盾

故假设不成立，即 $<\mathcal{M},v>\vDash\phi$

** 一阶结构关系

*** 同构<<MK471>>

[[MK444][一阶语言]] $\mathcal{L}_\mathcal{A}$ 存在 $\mathcal{M}=<M,I>,\mathcal{N}=<N,J>$ 两个[[MK446][结构]]，存在[[MK194][函数]] $e:M\to N$ 满足：

（1） $e$ 是[[MK200][双射函数]]

（2） 若 $c\in\mathcal{L}_\mathcal{A}$ 是[[MK129][常元符号]]，则有 $e(I(c))=J(c)$

（3） 若 $f\in\mathcal{L}_\mathcal{A}$ 是[[MK131][函数符号]]且 $\pi_F(f)=n$ ，则对于任意 $<a_1,...,a_n>\subset M^n$ 使得 $I(f)(a_1,...,a_n)$ 有定义

     有 $e(I(f)(a_1,...,a_n))=J(f)(e(a_1),...,e(a_n))$

（4） 若 $p\in\mathcal{L}_\mathcal{A}$ 是[[MK132][谓词符号]]且 $\pi_P(p)=n$ ，则对于任意 $<a_1,...,a_n>\subset M^n$

     $<a_1,...,a_n>\in I(p)$ 的充要条件是 $<e(a_1),...,e(a_n)>\in J(p)$

则称 $<M,I>,<N,J>$ 同构，记作 $<M,I>\cong<N,J>$ ， $e$ 为同构函数

**** 引理<<MK481>>

[[MK444][一阶语言]] $\mathcal{L}_\mathcal{A}$ 存在 $\mathcal{M}=<M,I>,\mathcal{N}=<N,J>$ 两个[[MK446][结构]]且 $\mathcal{M}\cong\mathcal{N}$ [[MK471][同构]]且同构函数为 $e$

则存在[[MK203][逆函数]] $e^{-1}:N\to M$ 亦为[[MK471][同构映射]]

***** 证明

****** 存在及[[MK471][条件（1）]]

由于 $e$ 是[[MK200][双射函数]]，则存在[[MK203][逆函数]] $e^{-1}:N\to M$ 亦为[[MK200][双射函数]]

****** [[MK471][条件（2）]]

若 $c\in\mathcal{L}_\mathcal{A}$ 是[[MK129][常元符号]]，则根据 $e(I(c))=J(c)$ 有 $I(c)=e^{-1}(e(I(c)))=e^{-1}(J(c))$

****** [[MK471][条件（3）]]

若 $f\in\mathcal{L}_\mathcal{A}$ 是[[MK131][函数符号]]且 $\pi_F(f)=n$ ，对于任意 $<b_1,...,b_n>\in N^n$

由于 $e$ 是[[MK200][双射函数]]，则存在 $<a_1,...,a_n>\subset M^n$ 满足 $e(a_i)=b_i$

根据 $e(I(f)(a_1,...,a_n))=J(f)(e(a_1),...,e(a_n))$ 可得 $I(f)(a_1,...,a_n)=e^{-1}(J(f)(e(a_1),...,e(a_n)))$

即 $I(f)(e^{-1}(e(a_1)),...,e^{-1}(e(a_n)))=e^{-1}(J(f)(e(a_1),...,e(a_n)))$

进而有 $I(f)(e^{-1}(e(a_1)),...,e^{-1}(e(a_n)))=e^{-1}(J(f)(e(a_1),...,e(a_n)))$

****** [[MK471][条件（4）]]

若 $p\in\mathcal{L}_\mathcal{A}$ 是[[MK132][谓词符号]]且 $\pi_P(p)=n$ ，对于任意 $<b_1,...,b_n>\in N^n$

由于 $e$ 是[[MK200][双射函数]]，则存在 $<a_1,...,a_n>\subset M^n$ 满足 $e(a_i)=b_i$

根据 $<a_1,...,a_n>\in I(p)$ 的充要条件是 $<e(a_1),...,e(a_n)>\in J(p)$

可得 $<e^{-1}(e(a_1)),...,e^{-1}(e(a_n))>\in I(p)$ 的充要条件是 $<e(a_1),...,e(a_n)>\in J(p)$

即 $<e^{-1}(b_1),...,e^{-1}(b_n)>\in I(p)$ 的充要条件是 $<b_1,...,b_n>\in J(p)$

**** 定理<<MK475>>

[[MK444][一阶语言]] $\mathcal{L}_\mathcal{A}$ 存在 $\mathcal{M}=<M,I>,\mathcal{N}=<N,J>$ 两个[[MK446][结构]]且 $\mathcal{M}\cong\mathcal{N}$ [[MK471][同构]]且同构函数为 $e$

对于任意 $\mathcal{M}$ 的[[MK447][赋值]] $v:X\to M$ ，则：

（1） [[MK202][复合]]函数 $v\cdot e$ 是 $\mathcal{N}$ 的[[MK447][赋值]]

（2） 对于任意[[MK133][项]] $\tau$ 均有 $e(\bar{v}(\tau))=\overline{v\cdot e}(\tau)$

（3） 对于任意[[MK135][表达式]] $\phi\in\mathcal{L}_\mathcal{A}$ 有 $<\mathcal{M},v>\vDash\phi$ 的充要条件为 $<\mathcal{N},v\cdot e>\vDash\phi$

其中 $\vDash$ 表示[[MK449][满足]]， $e\cdot v$ 表示函数[[MK202][复合]]
 
***** 证明

****** 证明（1）<<MK472>>

根据[[MK202][复合]]可得 $v\cdot e$ 是 $X\to N$ 的[[MK194][函数]]，即满足 $\mathcal{N}$ [[MK447][赋值]]的定义

****** 证明（2）<<MK473>>

则根据[[MK448][项赋值]]，$\overline{v\cdot e}(\tau)$ 除了[[MK472][结论（1）]]以外，需满足：

（1） $\overline{v\cdot e}(c_i)=J(c_i)$

（2） $\overline{v\cdot e}(f(\tau_1,...,\tau_n))=J(f)(\overline{v\cdot e}(\tau_1),...,\overline{v\cdot e}(\tau_n))$

则根据以下证明， $\tau$ 为有限长度，以及数学归纳法可证

******* $|\tau|=1$ 时

根据[[MK138][唯一可读性]]可得有且仅有 $\tau=c_i,\tau=x_i$ 两种情况

则根据[[MK471][同构]]定义可得 $e(\bar{v}(c_i))=e(I(c_i))=J(c_i)=\overline{v\cdot e}(c_i),e(\bar{v}(x_i))=e(v(x_i))=\overline{v\cdot e}(x_i)$

******* 归纳假设

对于任意 $|\tau|<n$ 结论（2）成立，即 

******* $|\tau|=n$ 时

根据[[MK138][唯一可读性]]可得有且仅有 $\tau=f(\tau_1,...,\tau_n)$ 一种情况，显然 $|\tau_i|<n$

则根据[[MK471][同构]]有 $e(\bar{v}(f(\tau_1,...,\tau_n)))=e(I(f)(\bar{v}(\tau_1),...,\bar{v}(\tau_1)))=J(f)(e(\bar{v}(\tau_1)),...,e(\bar{v}(\tau_n)))$

又根据归纳假设有 $e(\bar{v}(f(\tau_1,...,\tau_n)))=J(f)(\overline{v\cdot e}(\tau_1),...,\overline{v\cdot e}(\tau_n))$

****** 证明（3）

对于任意 $\phi\in\mathcal{L}_\mathcal{A}$ ，定义 $z(\phi)$ 为 $\phi$ 中去除所有[[MK133][项]]后 $($ 和 $)$ 的对数

******* $z(\phi)=1$ 时

根据[[MK149][唯一可读性]]，有且仅有以下可能形式

故对于任意 $\mathcal{M}$ 的[[MK447][赋值]] $v$ 当 $z(\phi)=1$ 时均有 $<\mathcal{M},v>\vDash\phi$ 的充要条件是 $<\mathcal{N},v\cdot e>\vDash\phi$

******** $\phi=(\mu_1\hat{=}\mu_2)$

若 $<\mathcal{M},v>\vDash\phi$ ，则根据[[MK449][满足]]等价于 $\bar{v}(\mu_1)=\bar{v}(\mu_2)$

则根据[[MK472][结论（2）]] $e(\bar{v}(\mu_1))=\overline{v\cdot e}(\mu_1),e(\bar{v}(\mu_1))=\overline{v\cdot e}(\mu_1)$ 故等价于 $\overline{v\cdot e}(\mu_1)=\overline{v\cdot e}(\mu_1)$

即 $<\mathcal{M},v>\vDash\phi$ 等价于 $<\mathcal{N},v\cdot e>\vDash\phi$

******** $\phi=p_i(\mu_1,...,\mu_n)$

若 $<\mathcal{M},v>\vDash\phi$ ，则根据[[MK449][满足]]等价于 $<\bar{v}(\mu_1),...,\bar{v}(\mu_n)>\in I(p_i)$

则根据[[MK471][同构]]可得 $<\bar{v}(\mu_1),...,\bar{v}(\mu_n)>\in I(p_i)$ 等价于 $<e(\bar{v}(\mu_1)),...,e(\bar{v}(\mu_n))>\in J(p_i)$

又根据[[MK472][结论（2）]]可得等价于 $<\overline{v\cdot e}(\mu_1),...,\overline{v\cdot e}(\mu_n)>\in J(p_i)$

即 $<\mathcal{M},v>\vDash\phi$ 等价于 $<\mathcal{N},v\cdot e>\vDash\phi$ 

******* 归纳假设

对于任意 $1<z(\phi)<n$ 的 $\phi\in\mathcal{L}_\mathcal{A}$ 定理结论（3）均成立

即对于任意 $\mathcal{M}$ 的[[MK447][赋值]] $v$ 均有 $<\mathcal{M},v>\vDash\phi$ 的充要条件是 $<\mathcal{N},v\cdot e>\vDash\phi$

******* $z(\phi)=n$ 时

根据[[MK149][唯一可读性]]，有且仅有以下可能形式

******** $\phi=(\lnot\psi_1)$

若 $<\mathcal{M},v>\vDash\phi$ 则根据[[MK449][满足]]等价于 $<\mathcal{M},v>\not\vDash\psi_1$

显然 $z(\psi_1)<n$ 满足条件，即 $<\mathcal{M},v>\vDash\psi_1$ 等价于 $<\mathcal{N},v\cdot e>\vDash\psi_1$

则有 $<\mathcal{M},v>\not\vDash\psi_1$ 等价于 $<\mathcal{N},v\cdot e>\not\vDash\psi_1$ 即 $<\mathcal{M},v>\vDash\phi$ 等价于 $<\mathcal{N},v\cdot e>\vDash\phi$  

******** $\phi=(\psi_1\to\psi_2)$

若 $<\mathcal{M},v>\vDash\phi$ 则根据[[MK449][满足]]等价于 $<\mathcal{M},v>\not\vDash\psi_1$ 或 $<\mathcal{M},v>\vDash\psi_2$

显然 $z(\psi_1)<n,z(\psi_2)<n$ 故根据归纳假设等价于 $<\mathcal{N},v\cdot e>\not\vDash\psi_1$ 或 $<\mathcal{N},v\cdot e>\vDash\psi_2$ 

即 $<\mathcal{M},v>\vDash\phi$ 等价于 $<\mathcal{N},v\cdot e>\vDash\phi$

******** $\phi=(\forall x_i\psi_1)$

********* 充分

若 $<\mathcal{M},v>\vDash\phi$ ，则对于任的 $\mathcal{N}$ [[MK447][赋值]] $\beta: X\to N$ 

若满足对于任意 $\psi_1$ 中除 $x_i$ 的[[MK441][自由变元]] $x_j$ 有 $\beta(x_j)=\overline{v\cdot e}(x_j)=e(v(x_j))$ 则由于 $e$ 是[[MK200][双射函数]]

根据[[MK203][函数求逆]]可得存在逆函数且满足任意 $\psi_1$ 中除 $x_i$ 的[[MK441][自由变元]] $x_j$ 有 $e^{-1}(\beta(x_j))=v(x_j)$

[[MK472][同理易证]] $\beta\cdot e^{-1}: X\to M$ 亦为 $\mathcal{M}$ [[MK447][赋值]]，则根据 $<\mathcal{M},v>\vDash\phi$ 以及[[MK449][满足]]定义

可得 $<\mathcal{M},\beta\cdot e^{-1}>\vDash\psi_1$ ，显然 $z(\psi_1)<n$ 且有 $\beta\cdot e^{-1}\cdot e=\beta$ ，则根据归纳假设可得 $<\mathcal{N},\beta>\vDash\psi_1$

综上所述，对于任意 $\mathcal{N}$ [[MK447][赋值]] $\beta: X\to M$ 若满足对于任意 $\psi_1$ 中除 $x_i$ 的[[MK441][自由变元]] $x_j$

均有 $\beta(x_j)=e(v(x_j))$ 则有 $<\mathcal{N},\beta>\vDash\psi_1$ ，即根据[[MK449][满足]]有 $<\mathcal{N},v\cdot e>\vDash\phi$

********* 必要

若 $<\mathcal{N},v\cdot e>\vDash\phi$ ，则对于任意 $\mathcal{M}$ [[MK447][赋值]] $\alpha: X\to M$ 若满足对于任意 $\psi_1$ 中除 $x_i$ 的[[MK441][自由变元]] $x_j$

均有 $\alpha(x_j)=v(x_j)$ ，根据[[MK471][同构]]定义 $e(\alpha(x_j))=e(v(x_j))=\overline{v\cdot e}(x_j)$

根据[[MK472][之前证明]]可得 $\alpha\cdot e:X\to N$ 是 $\mathcal{N}$ [[MK447][赋值]]，则根据 $<\mathcal{N},v\cdot e>\vDash\phi$ 以及[[MK449][满足]]有 $<\mathcal{N},\alpha\cdot e>\vDash\psi_1$

显然 $z(\psi_1)<n$ 则根据归纳假设有 $<\mathcal{M},\alpha>\vDash\psi_1$

综上所述，对于任意 $\mathcal{M}$ [[MK447][赋值]] $\alpha: X\to M$ 若满足对于任意 $\psi_1$ 中除 $x_i$ 的[[MK441][自由变元]] $x_j$

均有 $\alpha(x_j)=v(x_j)$ ，则有 $<\mathcal{M},\alpha>\vDash\psi_1$ 即根据[[MK449][满足]]有 $<\mathcal{M},v>\vDash\phi$

***** 推论1

[[MK444][一阶语言]] $\mathcal{L}_\mathcal{A}$ 存在 $\mathcal{M}=<M,I>,\mathcal{N}=<N,J>$ 两个[[MK446][结构]]，若 $\mathcal{M}\cong\mathcal{N}$ [[MK471][同构]]

则有 $\mathcal{M}$ 与 $\mathcal{N}$ [[MK148][同样]]

****** 证明

若 $\mathcal{M}\vDash\theta$ ，则根据[[MK453][推论]]有对于任意 $\mathcal{M}$ [[MK447][赋值]] $v:X\to M$ 均有 $<\mathcal{M},v>\vDash\theta$ 

根据[[MK475][定理]]可得 $<\mathcal{N},v\cdot e>\vDash\theta$ ，则又根据[[MK453][推论]]有 $\mathcal{N}\vDash\theta$

若 $\mathcal{N}\vDash\theta$ 则同理可证 $\mathcal{M}\vDash\theta$ 

***** 推论2

[[MK444][一阶语言]] $\mathcal{L}_\mathcal{A}$ 存在 $\mathcal{M}=<M,I>,\mathcal{N}=<N,J>$ 两个[[MK446][结构]]且 $\mathcal{M}\cong\mathcal{N}$ [[MK471][同构]]且同构函数为 $e$

对于任意 $\phi\in\mathcal{L}_\mathcal{A}$ 设其中中[[MK441][自由出现]]的[[MK130][变元符号]]为 $\{x_1,...,x_n\}$

对于任意 $\mathcal{M}$ [[MK447][赋值]] $v:X\to M$ 满足 $v(x_i)=a_i$ 以及任意 $\mathcal{N}$ [[MK447][赋值]] $u:X\to N$ 满足 $u(x_i)=e(v(x_i))$

$<\mathcal{M},v>\vDash\phi$ 的充要条件是 $<\mathcal{N},u>\vDash\phi$ 

****** 证明

根据[[MK475][定理]]可得 $<\mathcal{M},v>\vDash\phi$ 等价于 $<\mathcal{N},v\cdot e>\vDash\phi$ 以及 $e(v(x_i))=\overline{v\cdot e}(x_i)$

故有 $u(x_i)=\overline{v\cdot e}(x_i)$ 则根据[[MK452][局部确定性定理]]可得 $<\mathcal{N},v\cdot e>\vDash\phi$ 的充要条件为

对于任意 $\mathcal{N}$ [[MK447][赋值]] $u$ 若满足 $u(x_i)=\overline{v\cdot e}(x_i)$ 则有 $<\mathcal{N},u>\vDash\phi$ 

*** 同样<<MK148>>

[[MK444][一阶语言]] $\mathcal{L}_\mathcal{A}$ 存在 $\mathcal{M}=<M,I>,\mathcal{N}=<N,J>$ 两个[[MK446][结构]]，对于任意[[MK451][语句]] $\theta\in\mathcal{L}_\mathcal{A}$

均有 $\mathcal{M}\vDash\theta$ （即 $\theta$ 在 $\mathcal{M}$ 下为[[MK474][真]]）的充要条件为 $\mathcal{N}\vDash\theta$ （即 $\theta$ 在 $\mathcal{N}$ 下为[[MK474][真]]），则称 $\mathcal{M}$ 与 $\mathcal{N}$ 同样

*** 子结构<<MK483>>

[[MK444][一阶语言]] $\mathcal{L}_\mathcal{A}$ 存在 $\mathcal{M}=<M,I>,\mathcal{N}=<N,J>$ 两个[[MK446][结构]]，若满足：

（1） $M\subset N$

（2） 若 $c\in\mathcal{L}_\mathcal{A}$ 是[[MK129][常元符号]]，则有 $I(c)=J(c)$

（3） 若 $f\in\mathcal{L}_\mathcal{A}$ 是[[MK131][函数符号]]且 $\pi_F(f)=n$ ，对于任意 $<a_1,...,a_n>\subset M^n$ 使得 $I(f)(a_1,...,a_n)$ 有定义

     有 $I(f)(a_1,...,a_n)=J(f)(a_1,...,a_n)$

（4） 若 $p\in\mathcal{L}_\mathcal{A}$ 是[[MK132][谓词符号]]且 $\pi_P(p)=n$ 有 $I(p)=J(p)\cap M^n$

则称 $\mathcal{M}$ 是 $\mathcal{N}$ 的子结构，记作 $\mathcal{M}\subset\mathcal{N}$  

**** 子结构特征定理

[[MK444][一阶语言]] $\mathcal{L}_\mathcal{A}$ 存在 $\mathcal{M}=<M,I>,\mathcal{N}=<N,J>$ 两个[[MK446][结构]]且 $M\subset N$ ，则 $\mathcal{M}$ 是 $\mathcal{N}$ 的[[MK483][子结构]]的充要条件是：

对于任意 $\mathcal{M}$ [[MK447][赋值]] $v:X\to M$ 以及[[MK135][原始表达式]] $\phi\in\mathcal{L}_\mathcal{A}$ 有 $<\mathcal{M},v>\vDash\phi$ 的充要条件是 $<\mathcal{N},v>\vDash\phi$

***** 证明

由于 $M\subset N$ 故 $\mathcal{M}$ [[MK447][赋值]] $v$ 亦为 $\mathcal{N}$ [[MK447][赋值]]

则对于任意 $\mathcal{M}$ [[MK447][赋值]] $v:X\to M$ 定义 $v'$ 为满足 $v(x_i)=v'(x_i)$ 的 $\mathcal{N}$ 赋值

则根据以下证明有 $<\mathcal{M},v>\vDash\phi$ 的充要条件是 $<\mathcal{N},v'>\vDash\phi$

根据 $v'$ 定义显然 $<\mathcal{M},v>\vDash\phi$ 的充要条件是 $<\mathcal{N},v>\vDash\phi$

****** 充分

若 $\mathcal{M}$ 是 $\mathcal{N}$ 的[[MK483][子结构]]

******* 任意[[MK133][项]] $\tau\in T$ 有 $v(\tau)=v'(\tau)$ <<MK484>>

根据[[MK133][项定义]]可得 $|\tau|<\infty$ ，又根据数学归纳法以及以下证明可得 $v(\tau)=v'(\tau)$ 

******** $|\tau|=1$

根据[[MK138][唯一可读性]]有且仅有 $\tau=x_i$ 或 $\tau=c_i$ 根据[[MK483][定义（2）]]有 $\bar{v}(c_i)=I(c_i)=J(c_i)=\bar{v'}(c_i)$

根据[[MK447][赋值]] $v,v'$ 定义显然有 $\bar{v}(x_i)=v(x_i)=v'(x_i)=\bar{v'}(x_i)$

******** 归纳假设

对于任意 $|\tau|<n$ 均有 $v(\tau)=v'(\tau)$ 

******** $|\tau|=n$

根据[[MK138][唯一可读性]]有且仅有 $f_i(\tau_1,...,\tau_n)$ 显然 $|\tau_i|<n$ 故根[[MK448][项赋值]]有 $\bar{v}(f_i(\tau_1,...,\tau_n))=I(f_i)(\bar{v}(\tau_1),...,\bar{v}(\tau_n))$

以及 $\bar{v'}(f_i(\tau_1,...,\tau_n))=J(f_i)(\bar{v'}(\tau_1),...,\bar{v'}(\tau_n))$ 据归纳假设有 $\bar{v}(\tau_i)=\bar{v'}(\tau_i)\in M$

根据[[MK483][子结构]]又可得 $I(f_i)(\bar{v}(\tau_1),...,\bar{v}(\tau_n))=J(f_i)(\bar{v'}(\tau_1),...,\bar{v'}(\tau_n))$

即 $\bar{v}(f_i(x_1,...,x_n))=\bar{v'}(f_i(x_1,...,x_n))$

******* [[MK135][原始表达式]]充要条件

根据[[MK149][唯一可读性]]可得有且仅有以下两种情况，其中 $\tau_i\in T$ 是[[MK133][项]]

******** $\tau_1\hat{=}\tau_2$ 

根据[[MK449][满足]] $<\mathcal{M},v>\vDash\phi$ 的充要条件是 $\bar{v}(\tau_1) =\bar{v}(\tau_2)$ 根据[[MK484][之前证明]]有 $\bar{v}(\tau_1) =\bar{v'}(\tau_1)$ 以及 $\bar{v}(\tau_2) =\bar{v'}(\tau_2)$

故 $\bar{v}(\tau_1) =\bar{v}(\tau_2)$ 的充要条件为 $\bar{v'}(\tau_1) =\bar{v'}(\tau_2)$ ，又由于 $\bar{v'}(\tau_i) =\bar{v}(\tau_i)\in M$

则显然 $<\mathcal{M},v>\vDash\phi$ 的充要条件为 $<\mathcal{N},v'>\vDash\phi$

******** $p(\tau_1,...,\tau_n)$

根据[[MK449][满足]] $<\mathcal{M},v>\vDash\phi$ 的充要条件是 $<\bar{v}(\tau_1),...,\bar{v}(\tau_1)>\in I(p)$

根据[[MK484][之前证明]]有 $\bar{v}(\tau_i) =\bar{v'}(\tau_i)\in M$ 则 $<\bar{v'}(\tau_1),...,\bar{v'}(\tau_1)>\in I(p)$ 且 $<\bar{v'}(\tau_1),...,\bar{v'}(\tau_1)>\in M^n$

根据[[MK483][子结构]]可得 $<\bar{v'}(\tau_1),...,\bar{v'}(\tau_1)>\in J(p)$ 

****** 必要

若对于任意 $\mathcal{M}$ [[MK447][赋值]] $v:X\to M$ 以及[[MK135][原始表达式]] $\phi\in\mathcal{L}_\mathcal{A}$ 有 $<\mathcal{M},v>\vDash\phi$ 的充要条件是 $<\mathcal{N},v'>\vDash\phi$

根据[[MK483][子结构定义]]以及以下证明可得 $\mathcal{M}$ 是 $\mathcal{N}$ 的[[MK483][子结构]] 

******* 项相等<<MK485>>

则对于任意[[MK133][项]] $\tau_i\in T$ 定义 $\phi=\tau_i\hat{=}x_i$ 则必存在 $\mathcal{M}$ [[MK447][赋值]] $v$ 有 $<\mathcal{M},v>\vDash\phi$

则根据[[MK449][满足]]可得 $\bar{v}(\tau)=v(x_i)$ 根据假设亦有 $<\mathcal{N},v'>\vDash\phi$ ，同理根据[[MK449][满足]]可得 $\bar{v'}(\tau)=v'(x_i)$

又根据 $v'$ 定义可得 $\bar{v}(\tau)=v(x_i)=v'(x_i)=\bar{v'}(x_i)$ 即对于任意 $\tau_i\in T$ 均有 $\bar{v}(\tau_i)=\bar{v'}(\tau_i)$ 

******* 证明[[MK483][（2）]]

对于任意 $c_i\in T$ 根据[[MK485][之前证明]]以及[[MK448][项赋值]]可得 $I(c_i)=\bar{v}(c_i)=\bar{v'}(c_i)=J(c_i)$ 

******* 证明[[MK483][（3）]]

对于任意 $<a_1,...,a_n>\subset M^n$ 使得 $I(f)(a_1,...,a_n)=a_{n+1}$ 有定义

根据[[MK448][项赋值]]，定义 $\mathcal{M}$ [[MK447][赋值]] $v$ 满足 $v(x_i)=a_i$ ，又定义 $\tau=f_i(x_1,...,x_n)$ 以及 $\phi=(x_{n+1}\hat{=}f_i(x_1,...,x_n))$

又根据[[MK448][项赋值]]有 $a_{n+1}=v(x_{n+1})=\bar{v}(f_i(x_1,...,x_n))=I(f_i)(v(x_1),...,v(x_n))=I(f_i)(a_1,...,a_n)$

故根据[[MK449][满足]]有 $<\mathcal{M},v>\vDash\phi$ 根据假设有 $<\mathcal{N},v'>\vDash\phi$

又根据[[MK449][满足]]以及 $v'$ 定义有 $a_{n+1}=v'(x_{n+1})=\bar{v'}(f_i(x_1,...,x_n))=J(f_i)(a_1,...,a_n)$

最终有 $I(f)(a_1,...,a_n)=J(f)(a_1,...,a_n)$

******* 证明[[MK483][（4）]]

对于任意 $p\in\mathcal{L}_\mathcal{A}$ 且 $\pi_P(p)=n$ 以及 $<a_1,...,a_n>\in M^n$

若有 $<a_1,...,a_n>\in I(p)$ 则定义 $\mathcal{M}$ [[MK447][赋值]] $v$ 满足 $v(x_i)=a_i$ 以及 $\phi=p(x_1,...,x_n)$

显然 $<\bar{v}(x_1),...,\bar{v}(x_n)>=<a_1,...,a_n>\in I(p)$ ，故根据[[MK449][满足]]有 $<\mathcal{M},v>\vDash\phi$ ，根据假设有 $<\mathcal{N},v'>\vDash\phi$

又根据[[MK449][满足]]以及 $v'$ 定义有 $<\bar{v'}(x_1),...,\bar{v'}(x_n)>=<a_1,...,a_n>\in J(p)$

即对于任意 $<a_1,...,a_n>\in M^n$ 若 $<a_1,...,a_n>\in I(p)$ 则有 $<a_1,...,a_n>\in J(p)$

同理可证对于任意 $<a_1,...,a_n>\in M^n$ 若 $<a_1,...,a_n>\in J(p)$ 则有 $<a_1,...,a_n>\in I(p)$

即 $I(p)=J(p)\cap M^n$

*** 扩充与裁剪

[[MK444][一阶语言]] $\mathcal{L}_{\mathcal{A}_1},\mathcal{L}_{\mathcal{A}_2}$ 分别有[[MK446][结构]] $\mathcal{M}=<M,I>,\mathcal{N}=<N,J>$ 若：

（1） $\mathcal{L}_{\mathcal{A}_1}$ 是 $\mathcal{L}_{\mathcal{A}_2}$ 的[[MK482][裁剪结构]]，即 $\mathcal{A}_1\subset\mathcal{A}_2$

（2） $M=N$

（3） 若 $c\in\mathcal{L}_{\mathcal{A}_1}$ 是[[MK129][常元符号]]，则有 $I(c)=J(c)$

（4） 若 $f\in\mathcal{L}_{\mathcal{A}_1}$ 是[[MK131][函数符号]]且 $\pi_F(f)=n$ ，对于任意 $<a_1,...,a_n>\subset M^n$ 有 $I(f)(a_1,...,a_n)=J(f)(a_1,...,a_n)$

（5） 若 $p\in\mathcal{L}_{\mathcal{A}_1}$ 是[[MK132][谓词符号]]且 $\pi_P(p)=n$ 有 $I(p)=J(p)\cap M^n$

则称 $\mathcal{M}$ 是 $\mathcal{N}$ 的裁剪结构， $\mathcal{N}$ 是 $\mathcal{M}$ 的扩充结构

** 可定义性<<MK476>>

[[MK444][一阶语言]] $\mathcal{L}_\mathcal{A}$ 有[[MK446][结构]] $\mathcal{M}=<M,I>$ ，对于 $Z\subset M$ 以及 $Y\in M^n$ 若有：

（1） 存在 $b_1,...,b_m$ 满足 $b_i\in Z$ 以及 $Y\subset M^n$ 即 $M$ 的 $n$ 次

（2） 有含有 $m+n$ 个[[MK441][自由变元]]的[[MK135][表达式]] $\phi(x_{j_1},...,x_{j_n},x_{k_1},...,x_{k_m})$

（3） $<a_1,...,a_n>\in Y$ 当且仅当有[[MK449][满足关系]] $\mathcal{M}\vDash\phi[a_1,...,a_n,b_1,...,b_m]$

则称 $Y$ 以 $Z$ 中的元素为参数，在 $\mathcal{M}$ 中可定义，记作 $Y=\left\{<a_1,...,a_n>\big|\mathcal{M}\vDash\phi[a_1,...,a_n,b_1,...,b_m]\right\}$

记所有可定义的 $Y\in M^n$ 的集合为 $\text{Def}_n(\mathcal{M}, Z)$ ，则 $Y$ 可定义可表示为 $Y\in\text{Def}_n(\mathcal{M}, Z)$

当 $Z=\varnothing$ 时若 $Y\in\text{Def}_n(\mathcal{M},\varnothing)$ 则 $Y$ 是 $\mathcal{M}$ 免参数可定义集合

记 $\text{Def}^\infty(\mathcal{M},Z)=\bigcup_{i\in\mathbb{N}}\text{Def}_i(\mathcal{M}, Z)$

*** 引理1

[[MK476][条件（3）]]的 $\mathcal{M}\vDash\phi[a_1,...,a_n,b_1,...,b_m]$ 等价于存在[[MK447][赋值]] $v:X\to M$ 满足：

（1） 对于任意 $1\leq i\leq n$ 有 $v(x_{j_i})=a_i$

（2） 对于任意 $1\leq i\leq n$ 有 $v(x_{k_i})=b_i$

（3） $<\mathcal{M},v>\vDash \phi$

**** 证明

充分根据[[MK449][满足定义]]显然，以下证必要

若存在 $v$ 则根据[[MK452][局部确定性定理]]可得对于任意 $u$ 满足条件（1），（2）均有 $<\mathcal{M},u>\vDash \phi$

即有 $\mathcal{M}\vDash\phi[a_1,...,a_n,b_1,...,b_m]$ 

*** 引理2（定义范式）<<MK480>>

[[MK444][一阶语言]] $\mathcal{L}_\mathcal{A}$ 有[[MK446][结构]] $\mathcal{M}=<M,I>$ ，对于 $X\subset M$ 以及 $Y\in\text{Def}_n(\mathcal{M},Z)$ 即 $Y$ [[MK476][可定义]]

则存在一组 $b_1,...,b_m$ 满足 $b_i\in Z$ 以及 $\phi\in\mathcal{L}_\mathcal{A}$ 其[[MK441][自由变元]]为 $x_1,...,x_n,x_{n+1},...,x_{n+m}$

满足 $Y=\left\{<a_1,...,a_n>\big|\mathcal{M}\vDash\phi[a_1,...,a_n,b_1,...,b_m]\right\}$

**** 证明

根据[[MK476][可定义]]可得 $Y\in\text{Def}_n(\mathcal{M},Z)$ 的充要条件为存在 $\phi^*(x_{j_1},...,x_{j_n},x_{k_1},...,x_{k_m})$

满足对于任意 $<a_1,...,a_n>\in Y$ 的充要条件为 $\mathcal{M}\vDash\phi^*[a_1,...,a_n,b_1,...,b_m]$

由于 $|\phi^*|<\infty$ 故存在 $\phi^*$ 中[[MK130][变元符号]]的最大下标，定义为 $z$ 。进一步定义 $\phi^*$ 中所有[[MK449][受限变元]]为 $x_{s_1},...,s_{s_k}$

故将 $\phi^*$ 中所有[[MK449][受限变元]]由 $x_{s_i}$ 替换为 $x_{z+s_i}$ 后得 $\phi'$

则根据[[MK478][推论]]可得对于任意[[MK447][赋值]] $v$ 若有 $<\mathcal{M},v>\vDash\phi^*$ 的充要条件为 $<\mathcal{M},v>\vDash\phi'$

又由于 $<\mathcal{M},v>\vDash\phi^*$ 的充要条件为 $\mathcal{M}\vDash\phi^*[a_1,...,a_n,b_1,...,b_m]$

故根据[[MK449][方括号定义]] $\mathcal{M}\vDash\phi^*[a_1,...,a_n,b_1,...,b_m]$ 的充要条件为 $\mathcal{M}\vDash\phi'[a_1,...,a_n,b_1,...,b_m]$

定义 $\phi$ 为替换 $\phi'$ 中[[MK441][自由变元]] $x_{j_i}$ 为 $x_i$ ， $x_{k_i}$ 为 $x_{n+i}$

则根据[[MK479][引理2]]可得对于于任意[[MK447][赋值]] $u,v$ 满足 $u(x_{j_i})=v(x_i)$ 且 $u(x_{k_i})=v(x_{n+i})$

则 $<\mathcal{M},u>\vDash\phi'$ 的充要条件为 $<\mathcal{M},v>\vDash\phi$

故根据[[MK449][方括号定义]] $\mathcal{M}\vDash\phi^*[a_1,...,a_n,b_1,...,b_m]$ 的充要条件为 $\mathcal{M}\vDash\phi[a_1,...,a_n,b_1,...,b_m]$

综上所述，对于任意 $<a_1,...,a_n>\in Y$ 的充要条件为 $\mathcal{M}\vDash\phi[a_1,...,a_n,b_1,...,b_m]$

*** 子集不变性定理

[[MK444][一阶语言]] $\mathcal{L}_\mathcal{A}$ 有[[MK446][结构]] $\mathcal{M}=<M,I>$ ，对于 $X\subset M$ 以及 $Y\in\text{Def}_n(\mathcal{M},Z)$ 即 $Y$ [[MK476][可定义]]

有自[[MK471][同构映射]] $e:M\to M$ 满足对于任意 $z\in Z$ 均有 $e(z)=z$

则 $<a_1,...,a_n>\in Y$ 的充要条件为 $<e(a_1),...,e(a_n)>\in Y$

**** 证明

由于 $Y$ [[MK476][可定义]]存在[[MK135][表达式]] $\phi(x_{j_1},...,x_{j_n},x_{k_1},...,x_{k_m})$ 对于任意 $<a_1,...,a_n>\in Y$

其充要条件为 $\mathcal{M}\vDash\phi[a_1,...,a_n,b_1,...,b_m]$

***** 充分

若 $<a_1,...,a_n>\in Y$ 则对于任意[[MK447][赋值]] $v$ 若满足 $v(x_{j_i})=e(a_i),v(x_{k_i})=b_i$

根据[[MK481][引理]]可得[[MK203][逆函数]] $e^{-1}$ 亦为[[MK471][同构映射]]，则根据[[MK475][定理]]可得 $\overline{v\cdot e^{-1}}(x_{j_i})=e^{-1}(v(x_{j_i}))=a_i$

且 $<\mathcal{M},v>\vDash\phi$ 的充要条件为 $<\mathcal{M},v\cdot e^{-1}>\vDash\phi$ 又根据  $<a_1,...,a_n>\in Y$ ，$e^{-1}(b_i)=b_i$

以及 $\mathcal{M}\vDash\phi[a_1,...,a_n,b_1,...,b_m]$ 可得 $<\mathcal{M},v\cdot e^{-1}>\vDash\phi$

综上所述，即对于任意[[MK447][赋值]] $v$ 若满足 $v(x_{j_i})=e(a_i),v(x_{k_i})=b_i$ 则有 $<\mathcal{M},v>\vDash\phi$

即 $\mathcal{M}\vDash\phi[e(a_1),...,e(a_n),b_1,...,b_m]$ ，故得 $<e(a_1),...,e(a_n)>\in Y$

***** 必要

若 $<e(a_1),...,e(a_n)>\in Y$ 对于任意[[MK447][赋值]] $v$ 若满足 $v(x_{j_i})=a_i,v(x_{k_i})=b_i$

根据[[MK475][定理]]可得 $\overline{v\cdot e}(x_{j_i})=e(v(x_{j_i}))=e(a_i)$ 且 $<\mathcal{M},v>\vDash\phi$ 的充要条件为 $<\mathcal{M},v\cdot e>\vDash\phi$ 

又根据 $\mathcal{M}\vDash\phi[e(a_1),...,e(a_n),b_1,...,b_m]$ 以及 $e(b_i)=b_i$ 可得 $<\mathcal{M},v\cdot e>\vDash\phi$ 故有 $<\mathcal{M},v>\vDash\phi$ 

综上所述，对于任意[[MK447][赋值]] $v$ 若满足 $v(x_{j_i})=a_i,v(x_{k_i})=b_i$ 均有 $<\mathcal{M},v>\vDash\phi$

即 $\mathcal{M}\vDash\phi[a_1,...,a_n,b_1,...,b_m]$ 又根据[[MK476][可定义]]可得 $<a_1,...,a_n>\in Y$ 

* 图论

** 图的定义<<MK208>>

由[[MK209][节点]] $V$ 以及其[[MK216][赋权函数]]和连接节点的[[MK211][边]] $E$ 以及其[[MK217][赋权函数]]构成的离散结构，记作 $G=<V,E,f,g>$ 

若图省略表示为 $G=<V,E>$ ，则默认其满足[[MK215][基础假设]]

若有[[MK3][基数]] $|V|=p,|E|=q$ 则亦称 $G$ 为 $(p,q)$ 图

*** 相关定义

**** 节点相关

***** 节点<<MK209>>

$V$ 表示节点的非空[[MK42][有限集]]，例如 $V=\{a,b,c\}$

***** 孤立结点<<MK210>>

不是任何[[MK211][边]]的[[MK212][端点]]的[[MK209][节点]]

***** 悬挂点

[[MK218][度数]] $d(v)=1$ 的[[MK211][节点]]

**** 边相关

***** 边<<MK211>>

$E$ 表示边的[[MK11][多重集合]]，且是[[MK42][有限集]]。附带重数属性（同样元素在集合中的个数），其中

（1） 有向边为[[MK151][二元有序组]]，第一分量为起始节点，第二分量为终止节点，例如 $E=[<a,b>,<b,c>]$

（2） 无向边用[[MK3][基数]]为 $2$ 的[[MK1][集合]]表示，表示内容同上，例如 $E=[\{a,b\},\{b,c\},\{a,b\}]$

为方便，以上两种情况统一记作 $ab\in E$

***** 端点<<MK212>>

对于某条[[MK211][边]] $e\in E$ 其连接的两个顶点定义为其两个端点。

***** 重边<<MK213>>

[[MK211][边]] $E$ 中[[MK211][重数]]大于 $1$ 的边为重边

***** 环<<MK214>>

[[MK211][边]] $E$ 中若有连接同一[[MK209][节点]]的[[MK211][边]]，则称为环。若为[[MK211][有向边]]则称为有向环，不是则为无向环

**** 赋权相关

***** 基础假设<<MK215>>

在没有特殊说明的情况下，一般认为 $\forall x\forall y(x\in V\land y\in E\rightarrow f(x)=1\land g(y)=1)$ 为基本前提假设

***** 节点赋权函数<<MK216>>

定义为[[MK209][节点]] $V$ 到实数的[[MK194][函数]] $f:V\to\mathbb{R}$ 以描述节点的权重。

***** 边赋权函数<<MK217>>

定义为[[MK211][边]] $E$ 到实数的[[MK194][函数]] $g:E\to\mathbb{R}$ 以描述每条边的权重。

**** 度<<MK218>>

对于[[MK208][图]] $G=<V,E>$ 若 $v\in V$ ，则定义 $d(v)$ 为 $E$ 中包含 $v$ 的元素的个数。

特别的，对于[[MK221][有向图]]进一步定义：

（1） $d^+(v)$ 为 $E$ 中 $v$ 做为起 *始点* 的元素个数，称为出度

（2） $d^-(v)$ 为 $E$ 中 $v$ 做为 *终结* 点的元素个数，称为入度

定义符号 $\delta(G)=\min\left\{d(v)\big|v\in V\right\},\Delta(G)=\max\left\{d(v)\big|v\in V\right\}$ 即最小/大度数

***** 性质

****** 性质1<<MK219>>

所有[[MK209][节点]]的[[MK218][度]]的和为偶数，是[[MK211][边]]的数目的两倍

****** 性质2 

[[MK221][有向图]]中[[MK218][出度]]和[[MK218][入度]]的总和相等

****** 性质3 

对于[[MK224][无向限]]，奇数[[MK218][度]]的[[MK209][节点]]个数必为偶数个

******* 证明

设共有 $(a_1,a_2,...,a_n)$ 个[[MK209][节点]]的[[MK218][度]]为奇数，则定义 $d(a_i)=2k_i+1$ 故 $\sum_{i=1}^nd(a_i)=2\left(\sum_{i=1}^nk_i\right)+n$

设共有 $(b_1,b_2,...,b_m)$ 个[[MK209][节点]]的[[MK218][度]]为偶数，则定义 $d(b_i)=2l_i$ 故 $\sum_{i=1}^nd(a_i)=2\left(\sum_{i=1}^nl_i\right)$

故可得节点度的和为 $\sum_{i=1}^nd(a_i)+\sum_{i=1}^md(b_i)=2\left(\sum_{i=1}^nk_i+\sum_{i=1}^ml_i\right)+n$

假设 $n$ 为奇数时，度的总数为奇数，与[[MK219][性质1]]冲突。故证毕。

****** 性质4

任意[[MK225][简单图]] $G=<V,E>$ 满足 $|V|=p>1$ 则必有两个顶点 $v_1,v_2$ 的度相等，即 $d(v_1)=d(v_2)$

******* 证明

定义 $|V|=p$ 则根据简单图定义，对于任意一个顶点 $v\in V$ 有 $0\leq d(v)\leq p$

则若任意两个[[MK209][节点]]的[[MK218][度]]均不相等，则当且仅当 $d(v_i)=i$ 的情况满足

则必有 $d(v_1)=0,d(v_p)=p-1$ 

说明 $v_p$ 与所有其余点之间均有[[MK211][边]]相连， $v_1$ 与所有其余点之间无边相连

故矛盾。

** 图的分类

*** 正则图<<MK220>>

[[MK208][图]]中所有[[MK209][节点]]的[[MK218][度]]均相等，即满足 $\forall v\in V\rightarrow(\exists n\in\mathbb{N}^+\rightarrow d(v)=n)$ 的[[MK208][图]]为 $n$ 正则图 

*** 有向图<<MK221>>

[[MK211][边]] $E$ 中的任意元素均为[[MK211][有向边]]的[[MK208][图]]，通常记为 $D=<V,E>$

*** 有向无圈图<<MK222>>

不含[[MK238][有向圈]]的[[MK221][有向图]]，亦称为 DAG

**** 定理<<MK223>>

若 $G=<V,E>$ 是有向无圈图，则是少有一个顶点入度为零，一个顶点出度为零

***** 证明

定义 $r=<v_1,...,v_n>$ 是图 $G$ 中的[[MK236][最长]]的[[MK235][有向路]]

则假设 $d^-(v_1)>0$ 则必有 $v\in V$ 满足 $<v,v_1>\in E$

若 $v$ 在 $r$ 上，则有[[MK238][有向圈]] $c=<v_1,...,v,e,v_1>$ 与 $G$ 无圈矛盾

若 $v$ 不在 $r$ 上则有 $r'=<v,e,v_1,...,v_n>$ 满足 $\phi(r')>\phi(r)$ 与最长路矛盾

故假设不成立 $d^-(v_1)=0$ 同理可证 $d^+(v_n)=0$

*** 无向图<<MK224>>

[[MK211][边]] $E$ 中的任意元素均为[[MK232][无向边]]的[[MK208][图]]

*** 重图

[[MK211][边]] $E$ 少有一个元素重数大于 $1$ ，不为重图便为单图

*** 简单图<<MK225>>

不包含[[MK214][环]]和[[MK213][重边]]的[[MK224][无向图]]

*** 完全图<<MK226>>

任何两个不同结点间都有边关联的[[MK224][无向图]]称为完全无向图，记做 $K_n$

任何两个不同结点 $u,v$ 见都有边 $\{<u,v>,<v,u>\}\subset E$ 的[[MK221][有向图]]称为完全有向图

*** 正则图

所有[[MK209][节点]]的[[MK218][度]]均相等的[[MK208][图]]为正则图

*** 零图<<MK227>>

仅有[[MK210][孤立结点]]构成的[[MK208][图]]

*** 平凡图

仅包含 $1$ 个[[MK211][节点]] $0$ 条[[MK211][边]]的 $(1,0)$ 图

** 图的关系

*** 相等<<MK228>>

根据图的[[MK208][定义]]可得，对于任意 $G=<V,E>,H=<U,F>$ 有 $G=H$ 的充要条件是

（1） $V=U$

（2） $E=F$

*** 子图<<MK229>>

若 $G_1=<V_1,E_1>,G_2=<V_2,E_2>$ 均为[[MK208][图]]，若满足：

（1） $V_1\subset V_2\land E_1\subset E_2$ 

（2） $E_1$ 中所有边的[[MK212][端点]]均在 $V_1$ 中

则称 $G_1$ 为 $G_2$ 的子图。

特别的当不[[MK228][相等]] $G_1\ne G_2$ 时，称为真子图

**** 生成子图<<MK230>>

若 $G_1=<V_1,E_1>,G_2=<V_2,E_2>$ 均为[[MK208][图]]，若满足：

（1） $V_1=V_2$

（2） $G_1$ 是 $G_2$ 的[[MK229][子图]]

 则称 $G_1$ 是 $G_2$ 的生成子图。

**** 导出子图<<MK231>>

若 $G=<V,E>$ 为[[MK208][图]]，定义 $X\subset V$ 若存在 $G'=<V',E'>$ 满足：

（1） $V'=V/X$

（2） 对于任意 $G$ 的子图 $G^*=<V^*,E^*>$ ，若 $V^*=V/X$ 则有 $G^*$ 是 $G'$ 的[[MK229][子图]]

则成 $G'$ 是 $G$ 关于 $V'$ 的导出子图

亦可表示为  $G'=<V',(V'\times V')\cap E>$ 其中 $V'\times V'$ 是[[MK153][笛卡尔积]] 

*** 补图

**** 无向图

若 $G_1=<V_1,E_1>,G_2=<V_2,E_2>$ 均为[[MK225][简单图]]，若满足：

（1） $V_1=V_2\land E_1\cap E_2=\varnothing$ 

（2） $G'=<V_1,E_1\cup E_2>$ 是无向[[MK226][完全图]]

则称 $G_1,G_2$ 互为补图。

**** 有向图

若 $G_1=<V_1,E_1>,G_2=<V_2,E_2>$ 均为无[[MK213][重边]]与[[MK214][环]]的[[MK208][图]]，若满足：

（1） $V_1=V_2\land E_1\cap E_2=\varnothing$ 

（2） $G'=<V_1,E_1\cup E_2>$ 是有向[[MK226][完全图]]

则称 $G_1,G_2$ 互为补图。

*** 同构图

若 $G_1=<V_1,E_1>,G_2=<V_2,E_2>$ 均为[[MK208][图]]，若满足：

（1） $|V_1|=|V_2|\land|E_1|=|E_2|$ 即[[MK3][基数]]相等

（2） 存在[[MK200][双射]] $f:V_1\to V_2$ 满足充要条件 $\forall <v_1,v_2>\in E_1\leftrightarrow <f(v_1),f(v_2)>\in E_2$

则称 $G_1,G_2$ 互为同构。

** 图的连通

*** 连通

**** 通道<<MK232>>

若存在图 $G=<V,E>$ 且 $\{v_1,v_n\}\subset V$ 

若存在[[MK42][有限]]的[[MK155][有序组]] $t=<v_1,e_1,v_2,e_2,....e_{n-1},v_n>$ 满足 $e_i\in E\land\left(e_i=\{v_{i-1},v_i\}\right)$

则称有序组是 $v_1v_n$ 通道

当 $G$ 是[[MK221][有向图]]，若存在[[MK42][有限]]的[[MK155][有序组]] $t=<v_1,e_1,v_2,e_2,....e_{n-1},v_n>$ 满足 $e_i\in E\land\left(e_i=<v_i,v_{i+1}>\right)$

则称有序组是 $v_1v_n$ 通道的有向通道

***** 取边<<MK364>>

若 $t=<v_1,e_1,v_2,e_2,....e_{n-1},v_n>$ 则定义 $E(t)=\{e_1,...,e_{n-1}\}$

为通道 $t$ 中所有边的集合

***** 取节点<<MK365>>

若 $t=<v_1,e_1,v_2,e_2,....e_{n-1},v_n>$ 则定义 $E(t)=\{v_1,...,v_n\}$

为通道 $t$ 中所有节点的集合

**** 迹<<MK233>>

若存在图 $G=<V,E>$ 且 $\{v_1,v_n\}\subset V$ 若存在无重复[[MK211][边]]的 $v_1v_n$ [[MK232][通道]] $l$ ，则称该通道为 $v_1v_n$ 迹

特别的，当 $v_1=v_n$ 时，称为 *闭迹*

若 $G=<V,E>$ 是[[MK221][有向图]]，则存在无重复[[MK211][边]]的 $v_1v_n$ [[MK232][有向通道]] $l$ ，则称该通道为 $v_1v_n$ 有向迹

***** 定理<<MK234>>

在图 $G$ 中，如果有顶点 $v_1$ 到 $v_k$ 的[[MK232][通道]] $t$ 且其[[MK245][长度]] $\phi(t)<\infty$

则 $v_1$ 到 $v_k$ 必有[[MK233][迹]]

****** 证明

若存在有限长度的[[MK232][通道]]则必有序列 $v_1,e_1,....,e_{k-1},v_k$ 

若存在 $e_i=e_j$ 则必有子序列 $v_i,<v_i,v_{i+1}>,v_{i+1},...,v_j,<v_j,v_{j+1}>,v_{j+1}$

由于相等，则有 $v_i=v_j\land v_{i+1}=v_{j+1}$

则消去中间部分可得 $v_i,<v_i,v_{j+1}>,v_{j+1}$ 不改变起始点或终止点，以此方法可以去除所有重复[[MK211][边]]。

**** 路<<MK235>>

若存在图 $G=<V,E>$ 且 $\{v_1,v_n\}\subset V$ 若存在无重复[[MK209][节点]]的 $v_1v_n$ [[MK232][通道]] $r$ ，则称该通道为 $v_1v_n$ 路

若 $G=<V,E>$ 是[[MK221][有向图]]，则存在无重复[[MK209][节点]]的 $v_1v_n$ [[MK232][有向通道]] $r$ ，则称该通道为 $v_1v_n$ 有向路

若把 $G$ 变为无向图后存在无重复[[MK209][节点]]的 $v_1v_n$ [[MK232][通道]] $r$ ，此时则称 $r$ 为 $G$ 的弱路

***** 性质

由于[[MK211][边]]的顶点不重复，故不存在重复[[MK211][边]]

***** 最长路<<MK236>>

任意图均有最长路。最长路定义为根据[[MK235][路]]的长度定义，取得最大值的路。

****** 证明存在

由于[[MK209][顶点]]为非空[[MK42][有限集]]，且根据路定义无法重复出现，故最多有 $|V|=p$ 个顶点出现在一个[[MK235][路]]上

故对于任意路其长度均小于等于 $p$ 故有最长路存在。

***** 定理<<MK237>>

在有 $n$ 个顶点的图 $G$ 中，如果有顶点 $v_1$ 到 $v_k$ 有[[MK233][迹]]

则必有长度不大于 $n-1$ 的[[MK238][路]]

****** 证明

由于[[MK211][边]]是有限集，且[[MK233][迹]]不重复边，故若存在[[MK233][迹]]，则其长度必小于 $\infty$

故存在[[MK233][迹]]则必有有限序列 $v_1,e_1,....,e_{k-1},v_k$ 其中无重复[[MK211][边]]

若存在 $v_i=v_j$ 则必有子序列 $e_{i-1},v_i,e_i,...,e_{j-1},v_{j},e_j$ 则亦可消去中间部分组成 $e_{i-1},v_i,e_j$

同理可消除所有重复[[MK209][节点]]

若[[MK232][通道]]长度大于 $n-1$ 则必有 $n+1$ 个[[MK209][节点]]在[[MK232][通道]]中。

根据鸽笼原理，必有一个重复的节点，同样可以用上述方法消去。

**** 圈<<MK238>>

若存在图 $G=<V,E>$ 且 $\{v_1,v_n\}\subset V$ 若存 $v_1v_n$ [[MK235][路]] $c$ 满足 $v_1=v_n$ ，则成该路为 $v_1$ 圈

若 $G=<V,E>$ 是[[MK221][有向图]]，则称 $c$ 为有向圈

若 $G=<V,E>$ 是[[MK221][有向图]]，且存在 $v_1v_n$ [[MK235][弱路]] $c$ 满足 $v_1=v_c$ 则称 $c$ 是若圈

***** 定理1<<MK239>>

[[MK224][无向图]] $G=<V,E>$ 任意一个顶点的[[MK218][度]]满足 $d(v)>1$ ，则 $G$ 中存在圈

****** 证明<<MK240>>

定义 $<v_1,...,v_n>$ 是 $G$ 中的[[MK236][最长路]]，根据条件 $d(v_1)>1$ ，则必有另一条边 $e_k=v_1v_k\in E$

若 $v_k\not\in\{v_1,...,v_n\}$ 则 $<v_k,e_k,v_1,...,v_n>$ 比原[[MK235][路]]对一条边，故[[MK245][长度]]大于u原路

这与 $<v_1,...,v_n>$ 是 $G$ 中的[[MK236][最长路]]矛盾，故必有 $v_k\in\{v_1,...,v_n\}$ 

则 $<v_1,...,e_k,v_1>$ 显然长度大于 $1$ ，是[[MK238][圈]]

***** 定理2

若[[MK225][简单图]] $G=<V,E>$ 任意一个顶点的[[MK218][度]]满足 $d(v)\geq m\geq2$ ，

则 $G$ 中存在长度大于等于 $m+1$ 的[[MK238][圈]]

****** 证明

根据[[MK239][定理1]]可得由于 $\forall v\in V\rightarrow d(v)>1$ 故存在圈，定义 $<v_1,...,v_n>$ 是 $G$ 中的[[MK236][最长路]]

根据[[MK240][之前证明]]显然必有 $m-1$ 个包含在 $\{v_3,...,v_n\}$ 不同[[MK209][顶点]]与 $v_1$ 相连

故依次取长度最短的可能圈 $v_3,...,v_{m+1}$ 则有 $<v_1,v_2,...,v_{m+1},v_1>$

根据定义该圈的长度为 $m+1$ 即满足条件

***** 定理3<<MK241>>

若[[MK225][简单图]] $G=<V,E>$ 的两个顶点 $\{u,v\}\subset V$ 存在两条不同的[[MK235][路]]，则存在圈

****** 证明

定义 $P_1=<u,u_1,...,u_n,v>, P_2=<u,v_1,...,v_m,v>$

由于[[MK209][顶点]]是有限集，以及[[MK235][路]]中不包含重复顶点，故 $P_1,P_2$ 长度均有限

由于是两条不同的路且不含[[MK214][环]]和[[MK213][重边]]，故比存在 $1\leq k\leq\min(n,m)$ 满足 $u_k\ne v_k$

取最小满足条件的 $k^*$ 作为圈的起点。取最小的 $i$ 满足存在 $j$ 使得 $u_i=v_j$ 依然取最小 $j$

若存在 $i$ 则定义[[MK232][通道]] $<u_{k^*},u_{k^*+1}...,u_i,v_{j-1},v_{j-2},...v_{k^*}>$

由于 $<u_{k^*},u_{k^*+1}...,u_i>,<v_{j-1},v_{j-2},...v_{k^*}>$ 为两条路上子路，故必然顶点不重复

若存在 $u_l=v_k$ 满足 $l<i$ 则与 $i$ 定义矛盾，同理可证与 $j$ 定义矛盾

故 $<u_{k^*},u_{k^*+1}...,u_i,v_{j-1},v_{j-2},...v_{k^*}>$ 不存在重复顶点，且 $u_{k^*}=v_{k^*}$ 故是[[MK238][圈]]

若不存在，同理可证 $<u_{k^*},u_{k^*+1}...,v,v_m,v_{m-1},...v_{k^*}>$ 是圈 

***** 定理4<<MK242>>

若[[MK221][有向图]] $D=<V,E>$ 没有[[MK238][圈]]，则其至少包含一个[[MK218][出度]]为 $0$ 的[[MK209][顶点]]

****** 证明

定义 $r=<v_1,...,v_n>$ 是 $D$ 中的[[MK236][最长路]]，此时考虑 $v_n$ 的[[MK218][出度]]

假设 $d^+(v_n)>0$ 则必有 $e=<v_n,v>\in E$ 

此时若 $v$ 在 $t$ 上，则有圈 $c=<v,...,v_n,e,v>$

若 $v$ 不在 $t$ 上，则有 $r'=<v_1,...,v_n,e,v>$ 是更长的路，与最长路假设矛盾

故假设不成立，此时 $d^+(v_n)=0$

***** 定理5<<MK243>>

若[[MK221][有向图]] $D=<V,E>$ 有[[MK238][圈]]的充要条件是存在子图 $D_1=<V_1,E_1>$ 

满足 $\forall v\in V_1\rightarrow d^+(v)>0\land d^-(v)>0$ 

****** 证明

******* 充分

若存在圈 $c$ 则其包含的[[MK209][顶点]]和[[MK211][边]]构成的[[MK208][图]]即满足。

******* 必要

假设 $D_1$ 没有圈，则根据[[MK242][定理4]]可得必有一个[[MK209][顶点]]的[[MK218][出度]]为 $0$ 显然与条件矛盾。

故假设不成立 $D_1$ 有圈。由于 $D_1$ 是 $D$ 的[[MK229][子图]]，故 $D$ 有圈

**** 可达<<MK244>>

若存在图 $G=<V,E>$ 对于 $\{v_1,v_n\}\subset V$ 均存在 $v_1v_n$ [[MK235][路]] ，则称 $v_1$ 可达 $v_n$

若存在[[MK221][有向图]] $G=<V,E>$ 对于 $\{v_1,v_n\}\subset V$ 均存在 $v_1v_n$ [[MK235][有向路]]，则称 $v_1$ 有向可达 $v_n$

定义 $v\in V$ 的所有有向可达节点的集合为 $\mathcal{A}(v)$

**** 长度<<MK245>>

[[MK232][通道]]，[[MK233][迹]]，[[MK235][路]]，[[MK238][圈]]的长度定义为其边的赋权映射和

即对于通道/迹/路/圈 $t=<v_1,e_1,...,e_{n-1},v_n>$ 其长度为 $\phi(t)=\sum_{i=1}^{n-1}g(e_{i})$

若 $v_1,v_n$ 两个[[MK209][顶点]]之间不存在通道/迹/路/圈，则其长度定义为 $\phi(<>)=\infty$

根据[[MK215][基础假设]]，该定义可简化为边的条数

**** 距离<<MK246>>

定义两个[[MK209][顶点]] $\{u,v\}\subset V$ 间的距离为 $\phi(u,v)=\min\left\{\phi(t)\big|t=<u,...,v>\right\}$ 

即 $u,v$ 间通道/迹/路的最小[[MK245][长度]]

**** 割点<<MK247>>

定义[[MK208][图]] $G=<V,E>$ 若有 $v\in V$ 满足 $G$ 关于 $V/\{v\}$ 的[[MK231][导出子图]] $T$ 的[[MK243][支]]数大于 $G$ 的支树数

则称 $v$ 是 $G$ 的割点

***** 等价定义

定义[[MK255][连通图]]（不连通用连通子图） $G=<V,E>$ ，对于任意 $v\in V$ 下列命题等价

（1） $v$ 是[[MK247][割点]]

（2） $\exists u\in V\land\exists w\in V$ 他们之间的所有[[MK235][路]]均经过 $v$

（3） 存在 $V/\{v\}$ 的一个[[MK179][划分]] $X,Y$ 满足 $\forall x\in X,\forall y\in Y$ 有 $x,y$ 之间的[[MK235][路]]都经过 $v$

****** 证明<<MK248>>

******* （1）证（3）

根据[[MK247][定义]]可得去除 $v$ 的[[MK231][导出子图]] $G'$ 支数增加。取其中一个支的[[MK209][顶点]]定义为 $V_1$ 

剩余的顶点定义为 $V_2$ 。由于 $G$ 连通，故对于任意 $u\in V_1,w\in V_2$ 在 $G$ 上连通

根据[[MK243][支]]的定义 $u,w$ 在 $G'$ 上不连通。

假设有路 $r=<u,...,w>$ 不经过 $v$ 由于 $G'$ 为导出子图，故 $r$ 亦包含与 $G'$

与在 $G'$ 上不连通矛盾，故假设不成立。则证毕

******* （3）证（2）

显然

******* （2）证（1）

根据[[MK247][定义]]可得去除 $v$ 的[[MK231][导出子图]] $G'$ ，由于所有[[MK235][路]]均经过 $v$

故 $u,v$ 间没有路，则不[[MK255][连通]]。根据[[MK254][支]]的定义支数增加

***** 性质

****** 性质1

设[[MK225][简单图]] $G=<V,E>,|V|>2$ ，则其至少有两个顶点不是割点

******* 证明

定义 $r=<v_1,...,v_n>$ 为最长路，则 $v_1,v_n$ 不能与 $r$ 意外的[[MK209][顶点]]邻接，否则不为最长路

故去除 $v_1,v_n$ 后有 $r'=<v_2,...,v_{n-1}>$ 不产生新的[[MK254][支]]

****** 性质2

[[MK272][哈密顿图]]不含割点

******* 证明

根据哈密顿图定义，存在[[MK238][圈]]经过所有[[MK209][顶点]]，定义为 $c=<v_1,...,v_n,e_n,v_1>$

则显然去除任一顶点形成[[MK270][哈密顿路]]，图仍为连通。

**** 桥<<MK249>>

定义[[MK208][图]] $G=<V,E>$ 若有 $e\in E$ 满足 $G$ 的[[MK229][子图]] $T=<V,E/\{e\}>$ 的[[MK243][支]]数大于 $G$ 的支树数

则称 $e$ 是 $G$ 的桥

***** 等价性质

定义[[MK255][连通图]]（不连通用连通子图） $G=<V,E>$ ，对于任意 $e\in E$ 下列命题等价

（1） $e$ 是[[MK249][桥]]

（2） $\exists u\in V\land\exists w\in V$ 他们之间的所有[[MK235][路]]均经过 $e$

（3） 存在 $V/\{v\}$ 的一个[[MK179][划分]] $X,Y$ 满足 $\forall x\in X,\forall y\in Y$ 有 $x,y$ 之间的[[MK235][路]]都经过 $e$

（4） $e$ 不在 $G$ 的任意[[MK238][圈]]上

****** 证明

（1）（2）（3）的证明与[[MK248][之前]]同理

假设 $e$ 是桥。则若 $e$ 在圈上，则显然去除后 $G$ 仍连通，故[[MK254][支]]不增加。故 $e$ 不在圈上

若 $e=\{u,w\}$ 不在[[MK238][圈]]上，则去除 $e$ 后 $u,w$ 之间没有[[MK235][路]]。故满足（2）

证毕

*** 关系相关

**** 通道关系<<MK250>>

是一种[[MK155][二元关系]] $\mathcal{T}\subset V\times V$ 定义为 $<v_a,v_b>\in\mathcal{T}$ 的充要条件为存在 $v_av_b$ [[MK232][通道/有向通道]]

**** 迹关系<<MK251>>

是一种[[MK155][二元关系]] $\mathcal{L}\subset V\times V$ 定义为 $<v_a,v_b>\in\mathcal{L}$ 的充要条件为存在 $v_av_b$ [[MK233][迹]]

**** 路关系<<MK252>>

是一种[[MK155][二元关系]] $\mathcal{R}\subset V\times V$ 定义为 $<v_a,v_b>\in\mathcal{R}$ 的充要条件为存在 $v_av_b$ [[MK235][路]]

**** 互达关系<<MK253>>

是一种[[MK155][二元关系]] $\mathcal{R}_D\subset V\times V$ 

定义为 $<v_a,v_b>\in\mathcal{R}_D$ 的充要条件为存在 $v_av_b$ [[MK235][有向路]]以及 $v_bv_a$ [[MK235][有向路]]

**** 定理

对于[[MK224][无向图]] $G=<V,E>$ [[MK250][通道关系]]、[[MK251][迹关系]]、[[MK252][路关系]]以及[[MK253][互达关系]]均为[[MK176][等价关系]]

***** 证明

根据[[MK176][定义]]证明[[MK252][路关系]] $\mathcal{R}$ 是等价关系，其余同理可证。

****** 自反性

根据[[MK232][通道]]定义，对于任意 $v\in V$ 存在有序组 $<v>$ 满足[[MK209][顶点]] $v$ 只出现一次，没有[[MK211][边]]

故有序组中没有重复顶点和重复边，故 $<v>$ 是[[MK235][路]]，则有 $<v,v>\in\mathcal{R}$ 故有[[MK168][自反性]]

****** 对称性

由于是无向图，故显然若 $<u,v>\in\mathcal{R}$ 则有 $<v,u>\in\mathcal{R}$ 故有[[MK170][对称性]]

****** 传递性

若 $<u,v>\in\mathcal{R}\land <v,z>\in\mathcal{R}$ 且 $u\ne z$ 则显然存在两个有序组 $r_1=<u,...,v>,r'_1=<v,...,z>$

若存在顶点 $v_1$ 包含于 $r_1,r'_1$ 则存在有序组 $r_2=<u,...,v_1>,r'_2=<v_1,...,z>$

依次类推，根据[[MK235][路]]定义顶点不重复，且根据[[MK209][顶点]]定义 $V$ 是有限集

则必能找到 $r_k=<u,...,v_k>,r'_k=<v_k,...,z>$ 不包含重复顶点

故有据[[MK232][通道]] $<u,...,v_k,...,z>$ 不包含重复顶点，则存在 $uz$ [[MK235][路]]即有[[MK172][传递性]]

***** 推论1<<MK254>>

由于 $\mathcal{T},\mathcal{L},\mathcal{R}$ 为等价关系，则可有 $V$ 的[[MK177][等价类]]，这些等价类满足：

（1） $\mathcal{T},\mathcal{L},\mathcal{R}$ 关系生成的等价类相同

（2） 定义 $V$ 划分为 $V_1,...,V_n$ 个等价类 $G_i=<V_i,E_i>$ 是 $G$ 关于 $V_i$ 的[[MK231][导出子图]]

     则有 $V=\bigcup_{i=1}^n V_i\land E=\bigcup_{i=1}^n E_i$ 称每一个 $G_i$ 是 $G$ 的 *支*

****** 证明

******* 证明（1）

根据[[MK234][迹定理]]和[[MK237][路定理]]可得对于任意 $\{u,v\}\in V$ 有 $\exists t\in\mathcal{T}\rightarrow\exists l\in\mathcal{L}\rightarrow\exists r\in\mathcal{R}$

又根据定义显然有 $u,v$ 间存在[[MK235][路]]则有 $u,v$ 间存在[[MK232][通道]]

故有 $\exists t\in\mathcal{T}\leftrightarrow\exists l\in\mathcal{L}\leftrightarrow\exists r\in\mathcal{R}$ 则有 $\mathcal{T}=\mathcal{L}=\mathcal{R}$ 故证毕

******* 证明（2） 

根据[[MK180][定理1]]可得等价类是 $V$ 的[[MK179][划分]]，则有 $V=\bigcup_{i=1}^n V_i$

根据[[MK250][通道关系]]、[[MK251][迹关系]]以及[[MK252][路关系]]定义可得对于任意 $v\in V_i,u\in V_j$ 有 $i\ne j\rightarrow \{u,v\}\not\in E$

进一步根据[[MK231][导出子图]]定义可得 $E_i=(V_i\times V_i)\cap E$ 

假设存在 $e\in E\land\forall i(e\not\in E_i)$ 则有 $\forall i(e\not\in (V_i\times V_i))$ 又由于 $E\subset(V\times V)$

故有 $e\in(V\times V)-\bigcup_{i=1}^n V_i\times V_i$ 则必定存在 $i\ne j\rightarrow e\in V_i\times V_j$

与上述推论矛盾，故假设不成立，则有 $E=\bigcup_{i=1}^n E_i$

***** 推论2

[[MK254][同理]]对于[[MK221][有向图]]， $\mathcal{R}_D$ 亦为等价关系，可划分 $V$ 的[[MK177][等价类]]。

定义 $V$ 划分为 $V_1,...,V_n$ 个等价类 $G_i=<V_i,E_i>$ 是 $G$ 关于 $V_i$ 的[[MK231][导出子图]]

则有 $V=\bigcup_{i=1}^n V_i\land E=\bigcup_{i=1}^n E_i$ 称每一个 $G_i$ 是 $G$ 的 *强支*

*** 图相关

**** 无向图连通<<MK255>>

若[[MK224][无向图]] $G=<V,E>$ 且对于任意 $\{u,v\}\subset V$ 均有 $<u,v>\in\mathcal{L}$ ，则是连通图

其中 $\mathcal{L}$ 是[[MK252][迹关系]]

***** 定理1<<MK256>>

对于[[MK225][简单图]] $G=<V,E>$ 且 $|V|=p$ 若对于任意 $\{u,v\}\subset V$ 且 $uv\not\in E$ 若有 $d(u)+d(v)\geq p-1$

则 $G$ 是连通图

****** 证明

假设 $G$ 不是连通图且 $d(u)+d(v)\geq p-1$ ，则存在 $\{u,v\}\subset V$ 满足 $<u,v>\not\in\mathcal{L}$

由于 $G$ 是简单图，故无[[MK214][环]]和[[MK213][重边]]，则若 $d(u)=k\leq p-2$ 则有 $k$ 个[[MK209][顶点]]与 $u$ 相连

由于 $<u,v>\not\in\mathcal{R}$ 则与 $u$ 相连的 $k$ 个顶点必然不与 $v$ 相连

进一步由于 $uv\not\in E$ 则必有 $d(v)\leq p-k-1-1$ 则有 $d(v)+d(u)\leq p-2$

显然与条件 $d(u)+d(v)\geq p-1$ 矛盾，故假设不成立 $G$ 是连通图

****** 推论

对于[[MK225][简单图]] $G=<V,E>$ 且 $|V|=p$ 若对于任意 $v\in V$ 有 $d(v)\geq\frac{p}{2}$

则 $G$ 是连通图

******* 证明

对于任意 $\{u,v\}\in V$ 有 $d(u)+d(v)\geq 2\frac{p}{2}\geq p$ 则根据[[MK256][定理]]可得是连通图

**** 有向图的连通

***** 强连通

若[[MK221][有向图]] $G=<V,E>$ 任意两[[MK209][节点]]都相互[[MK244][可达]]，则称无向图是强联通。

***** 单向连通

若[[MK221][有向图]] $G=<V,E>$ 任意两[[MK209][节点]]中，至少有一个节点到另一个节点[[MK244][可达]]，则称无向图是单向联通。

***** 弱连通<<MK257>>

若[[MK221][有向图]] $G=<V,E>$ 将所有有向[[MK211][边]]替换成无向[[MK211][边]]，进而形成的[[MK224][无向图]]是联通的，则称有向图为弱连通。

**** 极小连通图<<MK258>>

若图 $G=<V,E>$ [[MK255][连通]]，对于任意 $e\in E$ 均有 $G'=<V,E/\{e\}>$ 不连通，则称其为极小连通图

** 特殊图

*** 二分图（双图）

**** 定义<<MK259>>

若[[MK224][无向图]] $G=<V,E>$ 满足：

（1） 有非空集合 $X,Y$ 满足 $X\cup Y=V\land X\cap Y=\varnothing$

（2） 对于任意 $e=\{v_1,v_2\}\in E$ 满足 $v_1\in X\land v_2\in Y$

则图 $G$ 称为二分图，可记作 $G=<X,E,Y>$

特别当 $X,Y$ 中任意两个[[MK209][节点]]均有[[MK211][边]]相连时，称为完全二分图。记作 $K_{m,n}$ 其中 $m=|X|,n=|Y|$

**** 等价条件

[[MK224][无向图]] $G=<V,E>$ 是[[MK259][双图]]的等价条件为：

（1） $G$ 至少有两个[[MK209][节点]]

（2） 所有[[MK238][圈]]的长度（边数和）均为偶数

（3） 图是[[MK255][连通]]的

***** 证明

****** 充分

若 $G=<X,E,Y>$ 是二分图，且定点 $v_1\in X$ 存在[[MK238][回路]]，根据[[MK259][定义]]所有边均连接 $X,Y$

则当且仅当长度为偶数时，顶点落在 $X$ 内，故若存在回路，必为偶数

****** 必要

若[[MK255][无向连通图]]（若非连通，则可分为若干个连通分支图） $G=<V,E>$ 所有回路均为偶数，取任意[[MK209][节点]] $v\in V$ 定义

（1） $X$ 为 $v'\in V$ 且 $v',v$ 之间存在[[MK235][路]]且其[[MK245][长度]]为偶数

（2） $Y=V-X$

显然 $v\in X$ 故 $X\ne\varnothing$ 由于 $|V|>2$ 故 $Y\ne\varnothing$

若 $\{v_1,v_2\}\subset X$ 则 $v$ 到 $v_1$ 或 $v_2$ 均有偶数[[MK245][长度]]的[[MK235][路]]定义为 $r_1=<v,...,v_1>,r_2=<v,...,v_2>$

则根据[[MK232][定义]]可知 $t=<v_1,...,v,...,v_2>$ 是通道，由于有长度且为偶数，故有 $\phi(t)$ 为偶数且 $\phi(t)<\infty$ 

根据之前方法寻找 $t$ 中重复[[MK209][顶点]]，假设 $v_{k_0}$ ，则存在子链 $<v_{k_0},...,v_{k_0}>$

若子链中仍有重复[[MK209][顶点]] $v_{k_1}$ 则存在子链 $<v_{k_1},...,v_{k_1}>$

由于 $\phi(t)<\infty$ 则依次类推，可以找到除两端外无重复顶点的子链 $s$ ，显然该子链满足[[MK238][圈]]定义

根据条件该圈的长度 $\phi(s)$ 为偶数，从 $t$ 中去除该圈变为 $t_1$

则根据[[MK245][长度]]定义去除的边数为偶数，则 $\phi(t_1)$ 亦为偶数。

由于长度有限，故可依次类推直到 $t^*=<v_1,...,v_2>$ 中无重复顶点，且根据之前推断可得 $\phi(t^*)$ 亦为偶数。

此时若存在[[MK211][边]] $e={v_1,v_2}$ 则圈 $<v_1,...,v_2,v_1>$ 的长度为 $\phi(t^*)+1$ 为奇数

故矛盾。故 $X$ 中不能存在内部边

由于是[[MK255][连通图]]，故 $Y$ 中所有[[MK209][顶点]]存在到 $v'$ 奇数[[MK245][长度]]的[[MK235][路]]，则同理可证 $Y$ 中亦不能存在内部边

**** 性质

双图没有[[MK214][环]]

***** 证明

若[[MK209][顶点]] $v\in V$ 存在环，则无论 $v\in X\lor v\in Y$ 均存在 $e={x,x}$ 不满足[[MK259][定义]]中（2）

**** 图兰定理

设 $G=<V,E>$ 是 $(p, q)$ 的[[MK225][简单图]]，如果 $G$ 中没有[[MK245][长度]]为 $3$ 的[[MK238][圈]]，则其边数 $q\leq\frac{p^2}{4}$

***** 证明

显然当 $p=1,p=2,p=3$ 时成立，此时假设 $p$ 是奇数：

则若当 $p=2n-1$ 时成立，定义有 $(2n+1,q)$ 图 $G$ ，若 $G$ 是[[MK227][零图]]则显然 $q=0<\frac{(2n+1)^2}{4}$

若不是，则 $E\ne\varnothing$ 故取任意 $e=\{v_1,v_2\}\in E$ 故定义 $G'=<V',E'>$ 是 $G$ 关于 $V/\{v_1,v_2\}$ 的[[MK231][最大子图]] 

定义 $p'=|V'|,q'=|E'|$ 此时显然 $p'=2n-1$ 故 $G'$ 满足条件

则有 $q'\leq \frac{(2n-1)^2}{4}=\frac{4n^2-4n+1}{4}=n^2-n+\frac{1}{4}$ 由于边数为正整数，故有 $q'\leq n^2-n$

在图 $G$ 中：

对于 $v_1,v_2$ 假设 $d(v_1)=k$ ，由于 $G$ 中存在[[MK211][边]] $e$ 连接 $v_1,v_2$ 

则 $v_2$ 必须满足不与 $v_1$ 连接的节点连接，否则结合边 $e$ 形成[[MK245][长度]]为 $3$ 的[[MK238][圈]]

显然去除 $v_2$ 有 $k-1$ 个顶点与 $v_1$ 相连，故加上 $v_1$ 有 $p-k$ 个点可以与 $v_2$ 相连

故有 $d(v_1)+d(v_2)=p=2n+1$ 则与两点相连的边数为 $p-1$ 

故图 $G$ 最多有 $q'+p-1\leq n^2-n +\frac{1}{4}+2n=\frac{(2n+1)^2}{4}$ 证毕

同理可证当 $p$ 为偶数时 $q'\leq \frac{(2n-2)^2}{4}=n^2-2n+1$

则有 $q\leq q'+p\leq n^2-2n+1+2n\leq n^2+1<n^2+2n+1=\frac{(2n+2)^2}{4}$

**** 匹配

***** 定义<<MK260>>

定义[[MK259][二分图]] $G=<X,E,Y>$ 若 $M\subset E$ 且任意 $e_1=\{v_1,v'_1\}\land e_2=\{v_2,v'_2\}\land\{e_1,e_2\}\subset E$ 

均有 $v_1\ne v_2\land v'_1\ne v'_2$ 即任意两条边无公共端点

则称 $M$ 为匹配。若 $M$ 为边数最多的集合，则称为最大匹配。

若 $X,Y$ 中的所有定点均出现在匹配 $M$ 中，则称为完全匹配。

***** 匈牙利算法（求最大匹配）

步骤如下：

（1） 任取一个[[MK260][匹配]] $M$ 

（2） 定义 $S$ 是尚未匹配点的集合

（3） 若 $S=\varnothing$ 则 $M$ 为最大匹配

（4） 取 $u_0\in S$ 为起点，找任一最大[[MK238][通路]]，满足属于 $M$ 和不属于 $M$ 的边交替出现，定义其边的集合为 $P$

（5） 若（4）中通路的终点亦在 $S$ 中，则 $M^{(1)}=(M-P)\cup (P-M)$ 

（6） 若终点不在 $S$ 中，则回到（3）

*** 欧拉图

**** 定义

***** 欧拉迹<<MK261>>

若图 $G=<V,E>$ 存在一条通过所有[[MK209][节点]]和[[MK211][边]]的[[MK233][迹]]，则该路径为欧拉路径。

***** 欧拉闭迹<<MK262>>

若图 $G=<V,E>$ 存在一条通过所有[[MK209][节点]]和[[MK211][边]]的[[MK233][闭迹]]，则该路径为欧拉路径。

***** 欧拉图<<MK263>>

若图 $G=<V,E>$ 存[[MK262][欧拉闭迹]]，则称图 $G$ 为欧拉图。

**** 定理

***** 定理1（判定无向图）<<MK264>>

[[MK224][无向图]]为[[MK263][欧拉图]]的充要条件是图 $G=<V,E>$ 是[[MK255][连通]]的，且所有[[MK209][节点]]的[[MK218][度]]都是偶数

****** 证明

******* 充分<<MK265>>

若图 $G=<V,E>$ 是[[MK263][欧拉图]]，则有[[MK262][欧拉闭迹]]，即存在[[MK232][通道]] $t=<v_1,e_1,v_2,...,v_k,e_k,v_1>$ 

且其中 $e_i$ 不存在重复，且 $E=\{e_1,...,e_k\}$ ，即该[[MK233][闭迹]]包含所有[[MK211][边]]以及[[MK209][顶点]]

故 $\forall v\in V$ 均存在于 $t$ 中，且必以 $e_u,v,e_v$ 形式出现，该形式的度为 $2$ 

故所有[[MK209][节点]]的[[MK218][度]]都是 $2$ 乘以其在拟路径中出现的次数 $n$ ，即 $2n$ 为偶数。

又由于存在[[MK233][迹]]连通所有[[MK209][节点]]，故图是[[MK255][连通图]]

******* 必要<<MK266>>

******** 构建圈集<<MK267>>

由于 $G=<V,E>$ 是[[MK224][无向图]]且[[MK218][度]]为偶数，即大于 $1$ 定义 $G=G_0$

则根据[[MK239][定理1]]存在[[MK238][圈]] $C_1$ 显然 $C_1$ 满足[[MK208][图定义]]，故定义 $C_1=<U_1,F_1>$

在 $G_0$ 中去除 $C_1$ 中包含的[[MK211][边]]形成子图 $G_1'=<V,E_1>$ 其中 $E_1=E/F_1$

由于 $C_1$ 是圈，故删除边后 $G$ 其上每个[[MK209][顶点]]要么不受影响，要么度减二

故 $G'_1$ 中顶点的度要么是 $0$ 要么仍为偶数，进一步与 $G'_1$ 中去除度为零的点形成 $G_1=<V_1,E_1>$

则 $G_1$ 上顶点的度仍为偶数，则根据[[MK239][定理1]]取 $C_2$ 

由于 $G$ 中的[[MK211][边]]为有限集，且每次去掉圈边数必减少

故依次类推后将在 $k$ 次后得 $G_{k}=<V_k,E_k>$ 无法继续

此时若 $V_k\ne\varnothing$ 则，则根据之前证明对于任意 $v\in V_k$ 可得 $d(v)$ 必为偶数

[[MK239][同理]]亦得存在圈，与无法继续矛盾，故 $V_k=\varnothing$

由于当且仅当度为零时，节点才会被去除，故必有 $E_k=\varnothing$ 才能删除说有 $V_{k-1}$ 中的节点

定义 $C=\{C_1,...,C_k\}$ 是该图的圈集，其中 $C_i=<U_i,F_i>$

******** 归纳法证明

********* 最小圈 $G_{k-1}$

由于 $G_k=<\varnothing,\varnothing>$ 则根据[[MK267][构建规则]]显然有 $G_{k-1}=C_k$

显然 $C_{k-1}$ 是[[MK238][圈]]，故无重复边，则是[[MK262][欧拉闭迹]]

********* 假设 $G_i$ 证明 $G_{i-1}$<<MK268>>

假设 $G_i$ 包含限条不[[MK255][连通]]的独立[[MK233][闭迹]]，且这些[[MK233][迹]]包含所有 $G_i$ 的[[MK209][顶点]]与[[MK211][边]]

根据[[MK267][构建规则]] $G_{i-1}$ 较 $G_i$ 新增边 $F_i$ ，且沿该组边以及所经过的节点形成[[MK238][圈]]

定义该[[MK238][圈]]为 $c=<u_1,f_1,...,f_m,u_1>$ 若不与 $G_i$ 中任意[[MK233][闭迹]]有公共[[MK209][顶点]]，则该圈为新增的独立[[MK233][闭迹]]

显然 $c$ 包含所有新增的[[MK209][顶点]]与[[MK211][边]]，故 $G_{i-1}$ 同样有有限条闭迹，且这些[[MK233][迹]]包含所有 $G_{i-1}$ 的[[MK209][顶点]]与[[MK211][边]]

若存在闭迹与 $c$ 有公共顶点，则去其中一条闭迹，定义为 $l=<v_1,e_1,...,e_n,v_1>$

由于 $f_i$ 均为新增边，故 $l$ 与 $t$ 无重边，假设公共点为 $v^*$

则存在[[MK235][闭迹]] $l'=<v^*,...,f_m,u_1,f_1,...,v^*,...e_n,v_1,e_1,...v^*>$ 经过 $l,t$ 上所有的的[[MK209][顶点]]与[[MK211][边]]

继续选取下一条有公共[[MK209][顶点]]的迹，形成新的闭迹

由于 $G_i$ 的独立闭迹有限，故依次类推直到只剩一条独立闭迹或不存在与 $c$ 有公共顶点的独立迹

则同样 $G_{i-1}$ 有若干条闭迹，且这些[[MK233][迹]]包含所有 $G_{i-1}$ 的[[MK209][顶点]]与[[MK211][边]]

********* 证明 $G_0$ 即 $G$ 本身

由于最小圈 $G_{k-1}$ 包含有限（一条）独立[[MK233][闭迹]]，且包含所有 $G_{k-1}$ 的[[MK209][顶点]]与[[MK211][边]]，以及 $k<\infty$

则根据[[MK268][之前证明]]可知 $G_1$ 亦包含有限条不[[MK255][连通]]的独立[[MK233][闭迹]]，且这些[[MK233][迹]]包含所有 $G_1$ 的[[MK209][顶点]]与[[MK211][边]]

由于 $G_0$ 是连通图，故 $C_1$ 必与每一条独立[[MK233][闭迹]]均有公共顶点

根据[[MK268][之前证明]]合并闭迹的方法依次类推，直至形成唯一闭迹。

同样根据[[MK268][之前证明]]该闭迹包含 $G$ 的所有[[MK209][顶点]]与[[MK211][边]]，即为[[MK262][欧拉闭迹]]

则 $G$ 是[[MK263][欧拉图]]

***** 定理2（无向欧拉迹）

有限无向图有[[MK261][欧拉迹]]的充要条件是：图 $G=<V,E>$ 是[[MK255][连通]]的，且仅有两个[[MK209][节点]]的[[MK218][度]]是奇数

****** 证明

******* 充分

若图 $G=<V,E>$ 有[[MK261][欧拉迹]]，则必有一条[[MK233][迹]] $l=<v_1,e_1,v_2,...,v_{n-1},e_{n-1},v_n>$ 经过所有所有[[MK209][节点]]和[[MK211][边]]

故对于 $v_i\in V\land v_i\ne v_1\land v_i\ne v_n$ 来说，必出现在上述拟路径中，且必有格式 $e_{i},v_i,e_{i+1}$ 每出现一次度增加 $2$

若出现 $n_i$ 次则 $d(v_i)=2n_i$ 即为偶数

对于 $v_1$ 同理 $d(v_1)=2n_i+1$ 为奇数，同理 $v_n$ 亦为奇数。

证毕。

******* 必要

由于[[MK255][连通]]，定义 $v_1,v_n$ 为度是奇数的两个节点。定义 $e^*=\{v_1,v_n\},E'=E\cup\{e^*\}$ 则有无向图 $G'=<V,E'>$

显然此时所有[[MK209][顶点]]的[[MK218][度]]均为偶数，故根据[[MK264][判定]] $G'$ 是[[MK263][欧拉图]]，存在[[MK262][欧拉闭迹]]经过所有[[MK209][节点]]和[[MK211][边]]

故 $e^*,v_1,v_n$ 必在其中，定义为 $t=<v_1,...,v_n,e^*,v_1>$

显然当 $t'=<v_1,...,v_n>$ 时 $t'$ 是 $G$ 中的[[MK233][迹]]，且经过 $G$ 的所有[[MK209][节点]]和[[MK211][边]]，即为[[MK261][欧拉迹]]

***** 定理3

假设[[MK224][无向图]] $G=<V,E>$ 有 $2n$ 个奇数[[MK209][顶点]]，

则 $G$ 的全部[[MK209][顶点]]和[[MK211][边]]可以排列成至少有 $n$ 条[[MK233][迹]]（要么是迹，要么是[[MK210][孤立点]]）

****** 证明

******* 可以排列成 $n$ 条

由于有 $2n$ 个奇数顶点，则有 $n$ 对奇数[[MK218][度]]的顶点。则在每对奇数度[[MK209][顶点]]间添加一条辅助[[MK211][边]]

此时所有顶点均有偶数度，根据[[MK264][定理1]]可得是欧拉图，有[[MK262][欧拉闭迹]]

然后去除所有辅助边，得 $n$ 条满足条件的[[MK233][迹]]（或[[MK210][孤立点]]）

由于去除的均为辅助边，且[[MK262][欧拉闭迹]]经过所有[[MK209][顶点]]和[[MK211][边]]，故这 $n$ 条迹亦经过所有点和边

******* 至少有 $n$ 条

设全部[[MK209][顶点]]和[[MK211][边]]可以排列成 $q$ 条开迹，且 $q<n$

则每条开迹的非两端[[MK209][顶点]]的[[MK218][度]]必为偶数，故仅可能在[[MK233][迹]]两端有奇数度的顶点。

故有且仅有 $2q$ 个偶数节点。由于假设 $q<n$ 故有 $2q<2n$ 与有 $2n$ 个奇数节点矛盾

故假设不成立，则证毕。

***** 定理4（判定有向图）

有限有向图为[[MK263][欧拉图]]的充要条件是：图 $G=<V,E>$ 是[[MK257][弱连通]]的，且任意[[MK209][节点]]的出[[MK218][度]]和入[[MK218][度]]相等

****** 证明<<MK269>>

******* 充分

若图 $G=<V,E>$ 是[[MK263][欧拉图]]，则有[[MK262][欧拉闭迹]]，即存在[[MK232][通道]] $t=<v_1,e_1,v_2,...,v_k,e_k,v_1>$ 

且其中 $e_i$ 不存在重复，且 $E=\{e_1,...,e_k\}$ ，即该[[MK233][闭迹]]包含所有[[MK211][边]]以及[[MK209][顶点]]

故 $\forall v\in V$ 均存在于 $t$ 中，且必以 $e_u,v,e_v$ 形式出现，该形式对于顶点 $v$ 出[[MK218][度]]和入[[MK218][度]]均增加 $1$

故对于任意节点，设在拟路径中出现的次数 $n$ ，则其出[[MK218][度]]和入[[MK218][度]]均为 $n$

由于有向[[MK233][迹]]连通所有[[MK209][节点]]，则显然转换为[[MK224][无向图]]是[[MK255][连通]]的

******* 必要

根据[[MK243][定理5]]采用[[MK266][有向图]]类似方法可证。此处暂时不多叙述

***** 定理5（有向欧拉迹）

有限有向图有[[MK261][欧拉路径]]的充要条件是：图 $G=<V,E>$ 是[[MK257][弱连通]]的，

且有一个[[MK209][节点]]的出[[MK218][度]]比另一个节点的入度大 $1$ ，其余节点出度入度相等

证明与[[MK269][之前证明]]类似

*** 哈密顿图

**** 定义

***** 哈密顿路<<MK270>>

若图 $G=<V,E>$ 存在一条通过所有[[MK209][节点]]的[[MK235][路]]，则称该路为图 $G$ 的哈密尔顿路。

***** 哈密顿圈<<MK271>>

若图 $G=<V,E>$ 存在一条通过所有[[MK209][节点]]的[[MK238][圈]]，则称该路为图 $G$ 的哈密尔顿圈。

***** 哈密顿图<<MK272>>

若图 $G=<V,E>$ 存在[[MK271][哈密顿圈]]，则称该路为图 $G$ 的哈密尔顿图。

定义所有哈密顿图集合 $\mathcal{H}$

**** 定理

***** 定理1

若[[MK224][无向图]] $G=<V,E>$ 是[[MK272][哈密顿图]]，定义 $G'=<S,E'>$ 是 $G$ 关于 $S$ 的[[MK231][导出子图]]

定义 $\omega(G')$ 是 $G'$ 的[[MK254][支]]的数量，则有 $\omega(G')\leq |S|$

****** 证明

由于是[[MK272][哈密顿图]]故存在[[MK271][哈密顿圈]]，定义为 $c=<v_1,e_1,...,e_n,v_1>$

显然 $c$ 包含所有[[MK209][节点]]，故 $c$ 包含的所有[[MK209][节点]]与[[MK211][边]]构成 $G$ 的[[MK230][生成子图]]，定义为 $H=<V,F>$

同时定义 $H$ 关于 $S$ 的[[MK231][导出子图]] $H'=<S,F'>$ 显然 $\omega(H')\leq |S|$
 
且有 $H'$ 是 $G'$ 的[[MK230][生成子图]]，即 $G'$ 与 $H'$ 顶点相同且 $F'\subset E'$

显然[[MK211][边]]数增加只会导致[[MK254][支]]的数量减少或不变，故必有 $\omega(G')\leq\omega(H')$

***** 定理2<<MK273>>

若 $G=<V,E>$ [[MK226][完全图]] $K_n$ 是[[MK272][哈密顿图]]

****** 证明

根据[[MK226][完全图]]定于可得对于任意两点 $\{u,v\}\subset V\rightarrow \{u,v\}\in E$

由于[[MK209][顶点]] $V$ 是[[MK42][有限集]]，故定义 $V=\{v_1,...,v_n\}$

则有[[MK238][圈]] $c=<v_1,\{v_1,v_2\},v_2,...,\{v_{n-1},v_n\},v_n,\{v_n,v_1\},v_1>$ 

显然其中每条[[MK211][边]]不重复，且除 $v_1$ 外无重复顶点，并且经过所有顶点。

故是[[MK271][哈密顿圈]]，则 $G$ 是[[MK272][哈密顿图]]

***** 定理3（Dirac定理）

若[[MK225][简单图]] $G=<V,E>$ 是 $(p,q)$ [[MK208][图]]且 $|V|=p>3$ 若 $\forall v\in V\rightarrow d(v)\geq\frac{p}{2}$ 

则 $G$ 是[[MK272][哈密顿图]]

****** 证明<<MK274>>

若 $G$ 不是[[MK272][哈密顿图]]，则根据[[MK273][定理2]] $G$ 不是[[MK226][完全图]]，则必有[[MK209][顶点]] $\{u,v\}\subset V$ 满足 $\{u,v\}\not\in E$

于是添加边 $\{u,v\}$ 到 $E$ 中形成 $E_1$ ，若 $G_1=<V,E_1>$ 仍不是[[MK272][哈密顿图]]，则继续添加边。

由于[[MK209][顶点]]与[[MK211][边]]均为[[MK42][有限集]]，故一直添加可使其成为[[MK226][完全图]]。

故根据[[MK273][定理2]]最终有 $G_k$ 是[[MK272][哈密顿图]]，定义[[MK271][哈密顿圈]]为 $c=<v_1,...,v_n,e_n,v_1>$

则取 $G_{k-1}=<V,E_{k-1}>$ 较 $G_k$ 少一条边且不是[[MK272][哈密顿图]]

则少去的边必在 $c$ 上，不妨设缺少了 $e_n$ 故有[[MK270][哈密顿路]] $r=<v_1,...,v_n>$

此时假设存在 $v_m$ 使得 $e_p=\{v_1,v_m\}\in E_{k-1}\land e_q=\{v_n,v_{m-1}\}\in E_{k-1}$ 

则有圈 $c=<v_1,...,v_{m-1},e_q,v_n,e_n,v_{n-1},...,e_{m+1},v_m,e_p,v_1>$

故 $v_n$ 不能与 $v_1$ 邻接的前一个节点邻接。

此时设 $d(v_1)=s$ 则有 $d(v_n)\leq p-1-k$ 故有 $d(v_1)+d(v_n)\leq p-1$

故有 $d(v_1)<\frac{p}{2}\lor d(v_n)<\frac{p}{2}$ 。

由于 $G$ 是 $G_{k-1}$ 的[[MK230][生成子图]]，故任意节点在 $G$ 的[[MK218][度]]小于等于 $G_{k-1}$ 中的度

综上所述，若 $G$ 不是哈密顿图，则存在 $v\in V$ 使得 $d(v)<\frac{p}{2}$ 

即 $G\not\in\mathcal{H}\rightarrow \exists v\in V\left(d(v)<\frac{p}{2}\right)$ 则根据[[MK144][量词转换]]以及[[MK84][假言易位]]有：

\begin{aligned}
&G\not\in\mathcal{H}\rightarrow \exists v\in V\left(d(v)<\frac{p}{2}\right)\\
{|\!\!\!=\!\!\!|}&\lnot(G\not\in\mathcal{H})\rightarrow \lnot\left(\exists v\in V\left(d(v)<\frac{p}{2}\right)\right)\\
{|\!\!\!=\!\!\!|}&G\in\mathcal{H}\rightarrow\forall v\in V\left(\lnot\left(d(v)<\frac{p}{2}\right)\right)\\
{|\!\!\!=\!\!\!|}&G\in\mathcal{H}\rightarrow\forall v\in V\left(d(v)\geq\frac{p}{2}\right)
\end{aligned}

证毕。

***** 定理4（Ore定理）

若[[MK225][简单图]] $G=<V,E>$ 是 $(p,q)$ 满足 $\forall \{u,v\}\subset V\land \{u,v\}\not\in E\rightarrow d(u)+d(v)\geq p$ 

则 $G$ 是[[MK272][哈密顿图]]

****** 证明

根据[[MK274][之前证明]]可得若 $G$ 不是[[MK272][哈密顿图]]，则存在两点 $v_1,v_n$ 满足 $\{v_1,v_n\}\not\in E$ 且 $d(v_1)+d(v_n)\leq p-1$

故同样根据之前证明可得其逆否命题成立 $G\in\mathcal{H}\rightarrow\left(\forall v\in V\forall u\in V\left(\{u,v\}\not\in E\rightarrow d(u)+d(v)\geq p\right)\right)$

***** 定理5

若[[MK255][连通]]的[[MK225][简单图]] $G=<V,E>$ 是 $(p,q)$ 满足 $\forall \{u,v\}\subset V\land \{u,v\}\not\in E\rightarrow d(u)+d(v)\geq p-1$ 

则 $G$ 有[[MK270][哈密顿路]]

****** 证明

定义 $G$ 中的[[MK236][最长路]] $r=<v_1,...,v_n>$ 则根据条件有 $d(v_1)+d(v_n)\geq p-1$

则假设（1）存在 $v\in V$ 不在 $r$ 上，

显然对于任意 $v$ 与 $v_1,v_k$ 之间不存在[[MK211][边]]否则 $r$ 不是最长路，故与 $v_1,v_k$ 邻接的[[MK209][节点]]必在 $r$ 上。

假设（2） $r$ 上不存在[[MK238][圈]]，则根据[[MK274][之前证明]]故 $v_n$ 不能与 $v_1$ 邻接的前一个节点邻接。

故可得 $d(v_1)+d(v_k)\leq n-1$ 且由于存在 $v$ 有 $n\leq p-1$ 

则有 $d(v_1)+d(v_1)\leq n-1\leq p-2<p-1$ 与条件矛盾

故在假设（1）的基础上假设（2）不成立，即在假设（1）的基础上 $r$ 上存在圈

定义 $r$ 上的圈为 $c=<v_z,...,v_{z-1},v_z>$

由于存在圈且[[MK255][连通]]，故必有 $r$ 上的 $v_k$ 与 $v$ 相连，则存在 $r'=<v,v_k,...,v_z,...v_{k-1}>$

显然又与最长路矛盾，故假设（1）不成立，即不存在 $v\in V$ 不在 $r$ 上

则 $r$ 包含所有节点，即为[[MK270][哈密顿路]]

*** 无向树

**** 基础定义

***** 定义<<MK275>>

一个[[MK255][连通]]无[[MK238][圈]]的[[MK225][简单图]] $G=<V,E>$ 定义为树

***** 平凡树<<MK276>>

只有一个顶点的[[MK275][树]]

***** 叶<<MK277>>

[[MK218][度]]为 $1$ 的[[MK209][顶点]]成为该树的叶

****** 推论<<MK278>>

非[[MK276][平凡树]]至少有两个[[MK277][叶]]

******* 证明

定义 $G=<V,E>$ 是[[MK275][树]]，则其[[MK236][最长路]]为 $r=<v_1,...,v_n>$

若 $d(v_1)\ne1$ 则要么有不在 $r$ 上的[[MK209][顶点]]与之邻接，则 $r$ 不是最长路

要么存在 $r$ 上的顶点与之邻接，则形成[[MK238][圈]]，与[[MK275][树]]定义矛盾。

故 $d(v_1)=1$ 同理可证 $d(v_n)=1$

***** 分支<<MK279>>

非[[MK277][叶]]节点称作分支点

***** 森林

一个无[[MK238][圈]]的[[MK225][简单图]] $G=<V,E>$ 定义为森林

对比[[MK275][树]]去除了[[MK255][连通]]条件。树也是森林

***** 偏心率<<MK280>>

定义[[MK275][树]] $G=<V,E>$ 对于任意[[MK209][顶点]] $v\in V$ 定义 $e(v)=\max\left\{\phi(u,v)\big|u\in V\right\}$ 

其中 $\phi(u,v)$ 是 $u,v$ 两点间的[[MK246][距离]]

***** 半径<<MK281>>

定义[[MK275][树]] $G=<V,E>$ 定义其半径 $r(G)=\min\left\{e(v)\big|v\in V\right\}$ 

其中 $e(v)$ 是[[MK209][顶点]] $v$ 的[[MK280][偏心率]]

***** 中心<<MK282>>

定义[[MK275][树]] $G=<V,E>$ 定义 $H=\left\{v\big|e(v)=r(G)\right\}$ 则称 $H$ 是树 $G$ 的中心

其中 $e(v)$ 是[[MK209][顶点]] $v$ 的[[MK280][偏心率]]， $r(G)$ 是树的[[MK281][半径]]

****** 推论

树仅有一个或者两个中心，可用去[[MK277][叶]]法找到

******* 证明

定义[[MK275][树]] $G=<V,E>$ 对于任意[[MK277][叶]] $v$ 任意 $u\in V$ 到 $v$ 均需要经过连接 $v$ 的[[MK279][分支]] $v'$

则可得 $\phi(u,v)=\phi(u,v')+1$ 即有 $e(v)>e(v')$ 其中 $\phi$ 是的[[MK246][距离]] $e$ 是[[MK280][偏心率]]

则定义去除所有[[MK277][叶]]后的[[MK231][导出子图]]为 $G_1=<V_1,E_1>$ 

则有 $V_1$ 中包含的[[MK209][顶点]]在 $G$ 中的[[MK280][偏心率]]大于 $V-V_1$ 中包含的顶点在 $G$ 中的偏心率

依次类推可得 $V_k$ 中包含的[[MK209][顶点]]在 $G$ 中的[[MK280][偏心率]]大于 $V_{k-1}-V_k$ 中包含的顶点在 $G$ 中的偏心率

即大于 $V-V_k$ 中包含的顶点在 $G$ 中的偏心率

根据[[MK278][推论]]可得 $V_k\ne\varnothing$ 时至少有两个叶。故当 $V_k$ 仅有一个或两个顶点时无法继续

则证毕 

**** 等价条件

[[MK225][简单图]] $G=<V,E>$ 是 $(p,q)$ [[MK208][图]]，则以下五个命题等价：

（1） $G$ 是[[MK275][树]]

（2） $G$ 中任意两个[[MK209][顶点]]有唯一[[MK235][路]]

（3） $G$ [[MK255][连通]]且 $p=q+1$

（4） $G$ 中无[[MK238][圈]]且 $p=q+1$

（5） $G$ 中无[[MK238][圈]]，且 $G$ 中任意两个不邻接的[[MK209][顶点]]间加一条边，得到一个有唯一圈的图

（6） $G$ 是[[MK258][极小连通图]]

***** 证明

****** （1）证（2）

（1）成立，则 $G$ 是[[MK275][树]]

故[[MK255][连通]]，则对于任意 $\{u,v\}\subset V$ 均有是[[MK233][迹]]，根据[[MK237][定理]]则有[[MK235][路]]

若 $u,v$ 之间存在两条路，则根据[[MK241][定理]]存在[[MK238][圈]]，与树矛盾。

故 $u,v$ 之间有唯一路。证毕

****** （2）证（3）

（2）成立，则 $G$ 中任意两个[[MK209][顶点]]有唯一[[MK235][路]]，则 $G$ [[MK255][连通]]

假设对于有 $p$ 个顶点的图 $G$ ，若任意两个[[MK209][顶点]]有唯一[[MK235][路]]，则有 $p=q+1$ 即 $q=p-1$

则对于 $p'=p+1$ 个顶点的 $(p',q')$ 图 $G'$ 若有任意两个[[MK209][顶点]]有唯一[[MK235][路]]时：

若此时 $q'=p-1$ 则无新增边，显然 $G$ 中的顶点与新增顶点不连通，故假设不成立

若此时 $q'>p$ 由于是[[MK225][简单图]]，故无重边，则新增的顶点 $v'$ 必有两条新增边，假设与 $v_1,v_2$ 相连

由于 $v_1,v_2$ 存在路，故此时 $<v_1,e_1,v',e_2,v_2>$ 形成新的路，则 $G'$ 中存在两个点之间有两条路

故矛盾，假设亦不成立。

故当 $(p,q)$ 图满足任意两个[[MK209][顶点]]有唯一[[MK235][路]]时，有 $p=q+1$ 

则 $(p'=q+1,q')$ 图满足任意两个[[MK209][顶点]]有唯一[[MK235][路]]时亦有 $p'=q'+1$ 

显然 $(2,q)$ 图若任意两个[[MK209][顶点]]有唯一[[MK235][路]]的，则满足 $p=q+1$ 

则根据数学归纳法，对于任意 $|V|<\infty$ 的图 $G$ 若有任意两个[[MK209][顶点]]有唯一[[MK235][路]]，则有 $p=q+1$ 

由于[[MK209][顶点]]是有限集，则证毕 

****** （3）证（4）

（3）成立，则 $G$ [[MK255][连通]]且 $p=q+1$

假设有[[MK238][圈]] $c=<v_1,...,v_n,e_n,v_1>$ 则显然 $c$ 中至少包含 $n$ 条[[MK211][边]]，故 $n\leq q$

此时若 $p=n$ 则有 $p=n\leq q$ 与 $p=q+1$ 矛盾

若 $p>n$ 则有不在 $c$ 上的[[MK209][顶点]] $p-n$ 个。由于连通，故每个顶点与 $c$ 至少存在一条边

故边数 $q\geq n+p-n\geq p$ 显然与 $p=q+1$ 矛盾

故假设不成立 $G$ 中不含[[MK238][圈]]

****** （4）证（5）

（4）成立，则有 $(p,q)$ 图 $G$ 中无[[MK238][圈]]且 $p=q+1$

假设 $G$ 不[[MK255][连通]]，则 $G$ 有 $k\geq 2$ 个支，根据[[MK254][推论]]可得每个支是 $G$ 的连通子图

根据（4）可得 $G$ 无[[MK238][圈]]，则其支 $G_i$ 亦无[[MK238][圈]]，则根据[[MK275][定义]] $G_i$ 是树，定义 $G_i$ 是 $(p_i,q_i)$ [[MK208][图]]

则根据（1）证（2），（2）证（3）可得 $p_k=q_k+1$ 根据[[MK254][推论]]亦有 $p=\sum_{i=1}^k p_k,q=\sum_{i=1}^k q_k$

则 $p=q+k$ 由于条件有 $k=1$ 矛盾，故假设不成立， $G$ [[MK255][连通]]

则又根据[[MK275][定义]]有 $G$ 是[[MK275][树]]，进一步根据（1）证（2）可得对于任意两个[[MK209][顶点]]有唯一[[MK235][路]]

则显然，添加边后有唯一圈。

****** （5）证（1）

（5）成立，则有 $(p,q)$ 图 $G$ 中无[[MK238][圈]]且中任意两个不邻接的[[MK209][顶点]]间加一条边，得到一个有唯一圈

则对于任意两个不邻接顶点 $\{u,v\}\subset V$ 添加[[MK211][边]]有唯一圈，则圈必定经过 $u,v$ 定义 $c=<u,...,v,e,u>$

则去掉 $e$ 后有[[MK235][路]] $r=<u,...,v>$ 则对于任意 $\{u,v\}\subset V$ 要么邻接，要么存在路

故 $G$ [[MK255][连通]]，结合无[[MK238][圈]]可得 $G$ 是[[MK275][树]]

****** （1）与（6）充要

******* 充分

由于（1）则有（2），则对于任意 $e=\{u,v\}\in E$ 可得去除 $e$ 后 $u,v$ 间不含其他[[MK235][路]]

则 $G'=<V,E/\{e\}>$ 不是[[MK255][连通图]]

******* 必要

若 $G$ 是[[MK258][极小连通图]]则 $G$ [[MK255][连通]]，此时假设存在[[MK238][圈]] $c=<v_1,...,v_n,e_n,v_1>$

则去除 $e_n$ 显然图仍然连通。故假设不成立 $G$ 中无圈

故 $G$ [[MK255][连通]]，结合无[[MK238][圈]]可得 $G$ 是[[MK275][树]]

**** 性质

***** 树是简单图

根据[[MK275][定义]]，树无回路，即无环。且树为无向无重边图，即满足[[MK225][简单图]]定义

***** 树是[[MK259][双图]]

树 $G=<V,E>$ 取任一 $v\in V$ ，定义 $X$ 为到 $v$ 的[[MK245][距离]]为奇数的[[MK209][节点]]， $Y$ 为到 $v$ 的[[MK245][距离]]为偶数的[[MK209][节点]]

若任一节点 $v'\in X\land v'\in Y$ ，则必有两条不同的[[MK232][拟路径]]连接 $v,v'$ 根据[[MK241][通路定理]]必有两条[[MK238][通路]]形成[[MK238][回路]]

故有 $X\cap Y=\varnothing$

由于[[MK275][树]]为连通图，故所有节点到 $v$ 均存在[[MK233][路径]]，即 $X\cup Y=V$

对于任意 $\{v_1,v_2\}\subset X$ 若 存在边 $e=\{v_1,v_2\}$ 根据 $v_1,v_2$ 均与 $v$ 存在通路，

则存在 $v,...,v_1,e,v_2,...,v$ 的回路，与条件不符。

故 $X$ 中的点不连通。综上所述，树为二分图。

***** 树是平面图

根据[[MK275][定义]]树不含[[MK238][回路]]，进一步根据[[MK303][等价条件]] $K_{5},K_{3,3}$ 均含回路，故不可能为树的子图。

故树是平面图。
 
**** 生成树

***** 定义<<MK283>>

若图 $T,G$ 满足：

（1） $T$ 是 $G$ 的[[MK230][生成子图]]

（2） $T$ 是[[MK275][树]]

则 $T$ 称为 $G$ 的生成树。

***** 定理

[[MK225][简单图]] $G=<V,E>$ 有[[MK283][生成树]]的充要体案件是 $G$ [[MK255][连通]]

****** 证明

******* 充分

若 $G$ 有生成树，故有[[MK230][生成子图]] $T$ 且是[[MK275][树]]。则 $T$ 连通。

根据[[MK230][生成子图]]定义 $G$ 与 $T$ [[MK209][顶点]]相同，[[MK211][边]]包含 $T$ 的边。故 $G$ 亦连通

******* 必要

如果无向连通图 $G$ 有回路，则删去回路上的一条边，然后继续构造直到没有回路

*** 有向树

*** 有向树<<MK284>>

[[MK257][弱连通]]且无[[MK238][弱圈]]的[[MK208][图]]定义为有向树

*** 有根树<<MK285>>

若[[MK221][有向图]] $G=<V,E>$ 满足：

（1） $\exists v\in V\rightarrow d^-(v)=0$

（2） $\forall v'\in V/\{v\}\rightarrow d^-(v')=1$

（3） 是[[MK284][有向树]]

此时 $v$ 成为树根，任意 $v^*\in V\rightarrow d^+(v^*)=0$ 成为树叶

其余的[[MK209][顶点]]定义为分支/节点

**** 等价条件<<MK286>>

若[[MK221][有向图]] $G=<V,E>$ 是有根树的充要条件是

存在 $v\in V$ 满足对于任意 $u\in V/\{v\}$ 均有 $v$ [[MK244][有向可达]] $u$ 且 $G$ 中没有[[MK238][弱圈]]

***** 证明

****** 充分<<MK287>>

若 $G$ 是有根树，则存在树根 $v$ 由于 $d^-(u)=1$ 故必存在 $u_1$ 满足 $e_1=<u_1,u>\in E$

若 $u_1\ne v$ 则有 $d^-(u_1)=1$ ，则必有 $<u_2,u_1>\in E$

依次类推，由于[[MK209][顶点]] $|V|<\infty$ 故必有以 $u$ 结尾的最长[[MK235][有向路]] $r=<u_k,...,u_1,e_1,u>$

此时假设 $u_k\ne v$ 则必有 $e=<u_{k+1},u_k>\in E$ 若 $u_{k+1}$ 在 $r$ 上，则有[[MK238][弱圈]]与有根树定义矛盾

若 $u_{k+1}$ 不在 $r$ 上，则有 $r'=<u_{k+1},e,u_k,...,u>$ [[MK245][长度]]大于 $r$ 与最长路矛盾

故假设不成立，必有 $v=u_k$ 则有路 $r=<v,...,u>$ 即 $v$ 到 $u$ [[MK244][有向可达]]

无弱圈条件等价，故充分性证毕

****** 必要

若存在 $v\in V$ 满足对于任意 $u\in V/\{v\}$ 均有 $v$ 到 $u$ [[MK244][有向可达]]且 $G$ 中没有[[MK238][弱圈]]

假设 $d^-(v)=1$ 则必有 $e=<u,v>\in E$ 由于可达，故存在[[MK235][有向路]] $r=<v,...,u>$

故有[[MK238][弱圈]] $c=<v,...,u,e,v>$ 与条件矛盾，故假设不成立 $d^-(v)=0$

若存在 $u\in V/\{v\}$ 满足 $d^-(u)>1$ 则有 $d^-(u)\geq 2$

则任取两条[[MK211][边]]，分别去经过这两条边的最长路，根据[[MK287][之前证明]]可得必终结于 $v$

故必有[[MK238][弱圈]]，矛盾。故有假设不成立，不存在 $u\in V/\{v\}$ 且 $d^-(u)>1$

无弱圈条件等价，故必要性证毕

**** 性质

***** 性质1<<MK288>>

对于任意 $u\in V/\{v\}$ 其中 $v$ 是树根，有唯一[[MK235][有向路]] $r=<v,e_1,u_1,...,u_{n-1},e_n,u>$

****** 证明

假设存在两条不同有向路，则有[[MK238][弱圈]]，与定义矛盾，则假设不成立

***** 性质2

对于任意 $\{u,v\}\subset V$ 至多存在一条[[MK235][有向路]] $r=<u,e_1,u_1,...,u_{n-1},e_n,v>$

****** 证明

若存在多条，则有[[MK238][弱圈]]

***** 性质3<<MK289>>

对于任意 $\{u,v\}\subset V$ 若 $\mathcal{D}(u)<\mathcal{D}(v)$ 且 $u$ 到 $v$ [[MK244][有向可达]]

则树根 $r$ 到 $v$ 的[[MK235][有向路]]必经过 $u$

****** 证明

根据[[MK288][性质1]]可得 $r$ 到 $u,v$ 均[[MK244][有向可达]]

假设存在 $r$ 到 $v$ 的[[MK235][有向路]]不经过 $u$ 则有[[MK238][弱圈]]，矛盾故假设不成立

***** 性质4<<MK290>>

对于任意 $\{u,v\}\subset V$ 若有[[MK235][有向路]] $r=<u,e,v>$

则任意 $z\in V\land z\not\in\{u,v\}$ 满足 $z$ 到 $v$ [[MK244][有向可达]]，其[[MK235][有向路]]必经过 $u$

****** 证明

若存在不经过 $u$ 的路，则 $d^-(v)=2$ 与定义矛盾。

**** 定理

***** 定理1<<MK291>>

有根树 $G=<V,E>$ 中任意不是树根 $r$ 的[[MK293][分支]] $v$ 

定义 $Y=\mathcal{A}(v)\cup\{v\}$ 其中 $\mathcal{A}(v)$ 是 $v$ 的所有[[MK244][有向可达]]的[[MK209][节点]]的集合

定义 $X=M/Y\cup\{v\}$ 

则 $G_Y=<Y,Y\times Y\cap E>,G_X=<X,X\times X\cap E>$ 均为有根树

****** 证明

仅证 $G_X$ 对于 $G_Y$ 类似可证

显然 $G_X$ 是[[MK221][有向图]]，根据[[MK286][等价条件]]依次证明

******* 无弱圈

由于 $X\subset V,E_X\subset E$ ，则若 $G_X$ 有[[MK238][弱圈]] $<v_1,...,v_n,e_n,v_1>$

则 $G$ 中亦有圈，与 $G$ 是有根树矛盾，故 $G_X$ 无弱圈

******* 任意非树根节点可达

对于任意 $z\in X$ 在图 $G$ 中根据[[MK288][性质1]]有 $r$ 到 $z$ 有向可达

则有通路 $<r,...,z>$ 若经过任意 $x\in Y$ 则 $v$ 到 $z$ 可达，故有 $z\in Y$

若 $z\ne v$ 则与 $z\in X$ 矛盾，若 $z=v$ 则与之前证明无弱圈矛盾，故通路不经过任意 $x\in Y$

由于 $E_X=X\times X\cap E$ 故在 $G_X$ 中 $r$ 到 $z$ 亦有向可达

**** 其他定义

***** 叶<<MK292>>

若[[MK285][有根树]] $G=<V,E>$ 若有 $v\in V$ 满足 $d^+(v)=0$ 则定义 $v$ 是 $G$ 的叶

并定义 $\mathcal{L}(V)$ 是 $G$ 所有叶的集合

****** 定理1

[[MK285][有根树]] $G=<V,E>$ 必有叶

******* 证明 

假设无叶，则对于任意[[MK232][通道]] $t=<v_1,...,v_n>$ 由于 $d^+(v_n)>0$

则必有 $e_n=<v_n,v_{n+1}>\in E\land v_{n+1}\in V$ 故有 $t_1=<v_1,...,v_{n+1}>$

由于 $|V|<\infty$ 故必有[[MK238][圈]]，与[[MK285][定义]]矛盾

故假设不成立，必有叶

****** 定理2

[[MK285][有根树]] $G=<V,E>$ 若 $|V|>1$ 则 $r\not\in\mathcal{L}(V)$ 其中 $r$ 是树根

******* 证明

假设 $r\in\mathcal{L}(V)$ 则 $d^+(r)=0$ 又因为 $r$ 是树根，故有 $d^-(r)=0$

则不存在边连接 $r$ ，故 $G$ 不是[[MK257][弱连通]]，则不是[[MK284][有向树]]，故不是有根树

与条件矛盾，故假设不成立 $r\not\in\mathcal{L}(V)$ 
 
***** 分支<<MK293>>

不是[[MK292][叶]]的[[MK209][节点]]定义为分支

***** 深度<<MK294>>

若[[MK285][有根树]] $G=<V,E>$ 以 $v$ 为树根

对于任意 $u\in V/\{v\}$ 定义 $\phi(v,u)$ 即 $u,v$ 的[[MK246][距离]]为 $u$ 的深度，记作 $\mathcal{D}(u)$

***** 高<<MK295>>

若[[MK285][有根树]] $G=<V,E>$ 

若[[MK209][节点]] $v$ 是[[MK279][分支]]，则高定义为 $\mathcal{H}(v)=\max\left\{\phi(v,u)\big|u\in V/\{v\}\right\}$

即 $v$ 与其所有[[MK245][有向可达]]节点的最大[[MK246][距离]]

若[[MK209][节点]] $v$ 不是[[MK279][分支]]，则高 $\mathcal{H}(v)=0$

[[MK285][树根]] $r$ 的节点亦定义为树的高，即 $\mathcal{H}(r)=\mathcal{H}(v)$

***** 层<<MK296>>

若[[MK285][有根树]] $G=<V,E>$ 以 $v$ 为树根，所有[[MK294][深度]]为 $k$ 的顶点的集合统称为该图的第 $k$ 层

即 $L_k=\left\{u\big|\phi(v,u)=k\land u\in V\right\}$

***** 父子<<MK297>>

若[[MK285][有根树]] $G=<V,E>$ 若 $<u,v>\in E$ 则称 $v$ 是 $u$ 的父[[MK209][顶点]]， $u$ 是 $v$ 的子顶点

定义 $\mathcal{P}(v)=\left\{u\big|<u,v>\in E\right\}$ 为顶点 $v$ 的父顶点集

定义 $\mathcal{S}(v)=\left\{u\big|<v,u>\in E\right\}$ 为顶点 $v$ 的子节点集

***** 子树<<MK298>>

若[[MK285][有根树]] $G=<V,E>$ 对于任意 $u\in V/\{r\}$ 其中 $r$ 是树根，则定义

（1） $V_s(u)=\left\{x\big|x\in V\land <u,x>\in\mathcal{T}\right\}$ 其中 $\mathcal{T}$ 是[[MK250][通道关系]]

（2） $E_s(u)=\left\{<x,y>\big|\{x,y\}\in V_s(u)\land <x,y>\in E\right\}$

则有[[MK229][子图]] $G_s(u)=<V_s(u),E_s(u)>$ 由于原图不含弱圈，且 $d^-(u)=1$

故易证 $G_s(u)$ 亦为有根树且根为 $u$

***** 兄弟节点<<MK299>>

若[[MK285][有根树]] $G=<V,E>$ 定义 $V'=V/\{r\}$ 即去除[[MK285][根]]

定义[[MK155][关系]] $\mathcal{B}\subset V'\times V'$ 为 $\mathcal{B}=\left\{<v,w>\big|(\exists u\in V\rightarrow\{<u,v>,<u,w>\}\subset E\right\}$

则若 $\{v,w\}\subset V'$ 满足 $v\mathcal{B}w$ 则称 $v,w$ 互为兄弟[[MK209][节点]]

****** 性质

对于任意 $\{v,w,x\}\subset V'$

******* 对称性

显然 $v\mathcal{B}w\rightarrow w\mathcal{B}v$

******* 自反性

显然 $v\mathcal{B}v$

******* 传递性

$v\mathcal{B}w\land w\mathcal{B}x\rightarrow v\mathcal{B}x$

******** 证明 

若有 $v\mathcal{B}w\land w\mathcal{B}x$ 则存在 $\{<p,v>,<p,w>\}\subset E\land \{<q,w>,<q,x>\}\subset E$

根据[[MK285][有根树]]定义，由于 $w\in V'$ 则有 $d^-(w)=1$ 则假设 $p\ne q$ 则 $d^-(w)=2$ 矛盾。

故假设不成立，有 $q=p$ 则有 $\{<p,v>,<p,x>\}\subset E$ 即 $v\mathcal{B}w\land w\mathcal{B}x\rightarrow v\mathcal{B}x$ 

******* 等价关系<<MK300>>

由定义可知 $\mathcal{B}$ 是 $V'$ 上的[[MK155][二元关系]]

结合之前证明，可得 $\mathcal{B}$ 是[[MK176][等价关系]]

则对于任意 $v\in V$ 定义 $[v]_\mathcal{B}$ 是 $v$ 的[[MK177][等价类]]，亦称 $v$ 的兄弟类

******* 划分

根据[[MK300][之前证明]] $\mathcal{B}$ 是 $V'$ 上的[[MK176][等价关系]]，则根据[[MK180][定理1]]得 $\mathcal{B}$ 的兄弟集合划分 $V'$

******* 兄弟节点[[MK294][深度]]相等

若有 $v\mathcal{B}w$ 则有 $\{v,w\}\subset V'$ 根据[[MK286][等价条件]]可得树[[MK285][根]] $r$ 到 $u,v$ 均[[MK244][有向可达]]

由于 $v\mahtcal{B}w$ 故 $v,w$ 分别有唯一射入边 $<u,v>,<u,w>$

根据[[MK285][有根树]]定义必为[[MK284][有向树]]则无[[MK238][弱圈]]，故 $r,u$ 之间存在唯一[[MK235][有向路]]

则显然有 $\phi(r,v)=\phi(r,w)=\phi(r,u)+1$

** 图的矩阵表示

*** 邻接矩阵<<MK301>>

对于无[[MK213][重边]]的[[MK221][有向图]] $G=<V,E>$ 其邻接矩阵定义为 $A=\{a_{ij}\}$ 其中 $a_{ij}=\begin{cases}1&<v_i,v_j>\in E\\0&<v_i,v_j>\not\in E\end{cases}$

对于无[[MK213][重边]]的[[MK224][无向图]] $G=<V,E>$ 其邻接矩阵定义为 $A=\{a_{ij}\}$ 其中 $a_{ij}=\begin{cases}1&\{v_i,v_j\}\in E\\0&\{v_i,v_j\}\not\in E\end{cases}$

**** 性质

***** 性质1

无向图的邻接矩阵是对角线对称矩阵

***** 性质2

若 $|V|=n$ 则

对有向图，[[MK209][顶点]] $v_k\in V$ 其[[MK218][出度]]为 $d^+(v_k)=\sum_{i=1}^na_{ki}$ 

即[[MK301][邻接矩阵]]行的和，入度为 $d^-(v_k)=\sum_{i=1}^na_{ik}$ 即[[MK301][邻接矩阵]]列的和

对无向图，[[MK209][顶点]] $v_k\in V$ 其[[MK218][度]]为 $d(v_k)=\sum_{i=1}^na_{ki}$ 或 $d(v_k)=\sum_{i=1}^na_{ik}$ 

**** 定理

***** 定理1

$A^n=A\times...\times A=\left\{a^{(n)}_{ij}\right\}$ 是 $n$ 个[[MK301][邻接矩阵]]相乘，则 $a^{(n)}_{ij}$ 为[[MK209][节点]] $v_i$ 到 $v_j$ 长度为 $n$ 的[[MK232][通道]]条数

****** 证明<<MK302>>

[[MK301][邻接矩阵]]与自身相乘 $A\times A=A^2=\left\{a^{(2)}_{ij}\right\}$ 

则有 $a^{(2)}_{ij}=\sum_{k=1}^na_{ik}a_{kj}$ 当且仅当 $a_{ik}>0\land a_{kj}>0$ 时 $a_{ik}a_{kj}>0$

故 $a^{(2)}_{ij}$ 为 $v_i$ 到 $v_j$ 经过边数为 $2$ 的[[MK232][拟路径]]条数。

当 $n-1$ 成立时 $A^{n-1}\times A=\left\{a^{(n)}_{ij}\right\}$ 其中 $a^{(n)}_{ij}=\sum_{k=1}^na^{(n-1)}_{ik}a_{kj}$ 

这里面 $a^{(n-1)}_{ik}$ 为 $v_i$ 到 $v_k$ 长度为 $n-1$ 拟路径条数，若此时 $<v_k,v_j>\in E$ 

则 $v_i$ 可通过 $a^{(n-1)}_{ik}$ 条拟路径到达 $v_k$ 在由 $v_k$ 到达 $v_j$

故 $a^{(n)}_{ij}$ 为 $v_i$ 到 $v_j$ 长度为 $n$ 的[[MK232][拟路径]]条数

***** 定理2

定义 $A^{|V|}=\left\{ a_{ij} \right\}$ 定义 $b_{ij}=\begin{cases}1&a_{ij}\ne0\\0&a_{ij}=0\end{cases}$ 定义矩阵 $B=\{b_{ij}\}$ 

则矩阵 $B$ 为路径矩阵，若 $b_{ij}=1$ 则[[MK209][节点]] $v_i$ 到 $v_j$ 存在[[MK233][迹]]

****** 证明

根据[[MK302][之前证明]]同理可证 $A^{(n)}=\left\{a^{(n)}_{ij}\right\}$ 中 $\left\{a^{(2)}_{ij}\right\}$ 表示[[MK209][节点]] $v_i$ 到 $v_j$ 存在长度为 $n$ 的[[MK232][通道]]

则 $b_{ij}$ 表示[[MK209][节点]] $v_i$ 到 $v_j$ 存在拟路径，根据[[MK234][定理]]可知必存在[[MK233][迹]]

*** 关联矩阵

若[[MK225][简单图]] $G=<V,E>$ 其中 $V=\{v_1,...,v_n\},E=\{e_1,...,e_m\}$ 

则关联矩阵 $A_{mn}=\{a_{ij}\}$ 其中根据[[MK151][有序组]]定义 $a_{ij}=\begin{cases}1&\{v_i\}\in e_j\\0&\{v_i\}\not\in e_j\end{cases}$

** 图算法

*** 拓扑排序<<MK322>>

定义[[MK222][有向无圈图]] $G=<V,E>$ 为依赖关系。求满足 $G$ 定义的排序

**** 计算

第一步：

求所有 $G$ 中[[MK218][入度]]为 $0$ 的[[MK209][顶点]]作为最前排序，定义为 $V'_1$

根据[[MK223][定理]]可得 $G$ 中必然存在[[MK218][入度]]为 $0$ 的[[MK209][顶点]]，根据排序要求此类顶点无依赖

第二步：

定义 $V_1=V/V'_1$ 并有[[MK231][导出子图]] $G_1=<V_1,E_2>$

第三步：

从 $G_1$ 中寻找入度为 $0$ 的顶点作为最前排序

显然 $G_1$ 仍为[[MK222][有向无圈图]]，故[[MK223][同理]]必有入度为 $0$ 的顶点

以后几步：

依次类推直至 $V_k=\varnothing$ 由于 $G_i$ 均为[[MK222][有向无圈图]]，故必有入度为 $0$ 的顶点

且 $|V|<\infty$ 故终有 $V_k=\varnothing$

*** 最小生成树

定义[[MK225][简单图]] $G=<V,E,g>$ 其中 $g$ 为[[MK211][边]]的[[MK217][赋权函数]]

则求 $G$ 的[[MK283][生成树]] $T$ 使得 $T$ 包含的所有[[MK211][边]]的赋权和最小

以下方法均可用数学归纳法证明

**** Prime

任取一顶点 $v_1\in V$ ，取与之相连的赋权值最小的边，定义为 $e_1=\{v_1,v_2\}$

然后取与 $v_1,v_2$ 相连的不形成[[MK238][圈]]的最小边，定义为 $e_2=\{v,v_3\}$ 其中 $v$ 是 $v_1,v_2$ 的任意一点

依次类推，由于[[MK209][顶点]]是[[MK42][有限集]]，故可以取到包含所有顶点。

**** Kruscal

将 $g(e),e\in E$ 排序，依次取赋权最小的，每取一次判断是否形成[[MK238][圈]]。

若形成圈，则取下一条最小的。直到连通

** 平面图

*** 定义

若[[MK224][无向图]] $G=<V,E>$ 满足：

（1） 可以在一个平面上图示出来

（2） 各[[MK211][边]]仅在顶点处相交

则称为平面图

*** 最小非平面图

顶点数最少的非平面图是 $5$ 个[[MK209][节点]]的[[MK226][完全图]]，即 $K_5$

边数最少的是 $X,Y$ 均有 $3$ 个[[MK209][节点]]的[[MK259][完全二分图]]，即 $K_{3,3}$

*** 平面图等价条件<<MK303>>

$G$ 或者 $G$ 的[[MK229][子图]]作任何同胚操作后得到的图均不能以 $K_5$ 及 $K_{3,3}$ 为子图

*** 同胚操作

在原图的边上增加或者删除二[[MK218][度]]的[[MK209][节点]]。

其本身将一条边分解为一个节点两条边，或做相反操作。不改变图的平面性质。

* 抽象代数

** 代数的构建

*** 运算

**** 定义<<MK304>>

运算是集合 $S^n=S\times ...\times S$（即 $n$ 个 $S$ 的[[MK153][笛卡尔积]]）到 $S$ 的[[MK194][函数]] 

通常用 $*$ 表示二元运算，如 $*(x,y)=x*y$

通常用 $\Delta$ 表示一元运算，如 $\Delta x$

**** 基本性质<<MK305>>

所有二元运算均满足：

普遍性： $S$ 中的所有元素均可参与运算

单值性<<MK306>>： $\forall x\forall y\forall x'\forall y'(x=x'\land y=y'\rightarrow x*y=x'*y')$

封闭性： $\forall x\forall y(x\in S\land y\in S\rightarrow x*y\in S)$

**** 一般性质

二元运算可以满足：

结合律<<MK307>>： $\forall x\forall y\forall z\left(\{x,y,z\}\subset S\rightarrow (x*y)*z=x*(y*z)\right)$

交换律<<MK308>>： $\forall x\forall y(\{x,y\}\subset S\rightarrow x*y=y*x)$

分配率<<MK309>>： 对于运算 $*,\#$ 有 $\forall x\forall y\forall z\left(\{x,y,z\}\subset S\rightarrow x*(y\#z)=x*y\#x*z)\right)$ 则称运算 $*$ 对 $\#$ 可分配

*** 代数结构定义<<MK310>>

非空集合 $S$ 上存在若干满足[[MK305][基本性质]]的运算，通常记作 $<S,*,\#,...>$

** 特殊元素

*** 幺元<<MK311>>

[[MK310][代数结构]] $<S,*>$ 上存在元素 $e$ 对于任意 $x\in S$ 均满足 $e*x=x*e=x$ 则 $e$ 为幺元

若仅满足 $x*e=x$ 则为左幺元

若仅满足 $e*x=x$ 则为右幺元

**** 性质<<MK312>>

若存在左右幺元，则左幺元等于右幺元，且幺元唯一

***** 证明

若 $e_1,e_2$ 分别为左，右幺元，则有 $e_1=e_1*e_2=e_2$ 故左右幺元相等。

若存在其他幺元 $e_3$ 同理可证 $e_1=e_3$

*** 零元<<MK313>>

[[MK310][代数结构]] $<S,*>$ 上存在元素 $o$ 对于任意 $x\in S$ 均满足 $o*x=x*o=o$ 则 $o$ 为零元

若仅满足 $x*o=o$ 则为左零元

若仅满足 $o*x=o$ 则为右零元

**** 性质

若存在左右零元，则左零元等于右零元，且零元唯一

***** 证明

同[[MK312][之前证明]]

*** 逆元<<MK314>>

[[MK310][代数结构]] $<S,*>$ 上存在[[MK311][幺元]] $e$ ，若 $x*y=e$ 则：

$x$ 是 $y$ 的左逆元

$y$ 是 $x$ 的右逆元

若[[MK304][运算]]满足[[MK308][交换律]]，则称互为逆元

**** 性质1<<MK315>>

若[[MK310][代数结构]] $<S,*>$ 上 $|S|>1$ 且有幺元 $e$ 零元 $o$ ，则零元没有逆元

***** 证明

若 $o=e$ 则对于任意 $a\in S\land a\ne o$ 均有 $a=a*e=a*o=o$ ，与条件矛盾。由于 $|S|>1$ 故必存在 $a\ne o\land a\in S$ 故 $o\ne e$ 。

假设存在左逆元 $x$ ，则有 $o=x*o=e$ 与 $o\ne e$ 矛盾

**** 性质2<<MK316>>

满足[[MK307][结合律]]的[[MK310][代数结构]]中，逆元唯一

***** 证明

若 $x$ 分别有左右逆元 $l,r$ 则 $r=e*r=(l*x)*r=l*(x*r)=l*e=l$

**** 性质3

满足[[MK307][结合律]]的[[MK310][代数结构]]中，逆元的逆元一定是本身

***** 证明

根据定义若满足 $x*y=y*x=e$ 则 $x$ 的逆元是 $y$

则同理对于 $y$ 来说 $x$ 满足 $y*x=x*y=e$ 即 $x$ 是 $y$ 的逆元

且根据[[MK316][性质2]]可得逆元唯一，故 $x$ 的逆元只能是 $y$ 且 $y$ 的逆元只能是 $x$

故 $x$ 逆元的逆元一定是 $x$

*** 可约元素<<MK317>>

[[MK310][代数结构]] $<S,*>$ 中存在 $a\in S$ 满足：

（1） $\forall x\forall y(a*x=a*y\land x\in S\land y\in S\rightarrow x=y)$ 称为左可约

（2） $\forall x\forall y(x*a=y*a\land x\in S\land y\in S\rightarrow x=y)$ 称为左可约

若同时满足（1）和（2），则 $a$ 称为可约

**** 性质1

满足[[MK307][结合律]]的[[MK310][代数结构]]中，有[[MK314][逆元]]的元素[[MK317][可约]]

***** 证明

根据条件有：

（1） $a$ 存在逆元 $-a$ 

（2） $x*a=y*a$

则根据[[MK306][单值性]]有 $x*a=y*a\land -a=-a\rightarrow x*a*-a=y*a*-a$

又因为满足结合律，则有: 

\begin{aligned}
x*a*-a&=y*a*-a\\
x*(a*-a)&=y*(a*-a)\\
x*e&=y*e\\
x&=y\\
\end{aligned}

同理可证左可约，故 $a$ 可约

** 代数结构的关系

*** 同类型定义

两个[[MK310][代数结构]] $<S,*>,<\bar{S},\bar{*}>$ 若满足 $|S|=|\bar{S}|$ 即集合[[MK3][基数]]相等

*** 同态映射<<MK318>>

两个[[MK310][代数结构]] $<S,\Delta,*>,<\bar{S},\bar{\Delta},\bar{*}>$ 若存在[[MK194][函数]] $f:S\rightarrow\bar{S}$ ，对于任意 $\{a,b\}\subset S$ 满足 $h(\Delta a)=\bar{\Delta}h(a)\land h(a*b)=h(a)\bar{ *}h(b)$

则称 $f$ 是 $S$ 到 $S'$ 的同态映射，特别的：

（1） 当 $f$ [[MK195][单射]]时称为单一同态

（2） 当 $f$ [[MK198][满射]]时称为满同态

（3） 当 $f$ [[MK200][双射]]时称为同构映射

*** 同构定义

两个[[MK310][代数结构]] $<S,*>,<\bar{S},\bar{*}>$ 若存[[MK318][同构映射]] $f$ ，则称两个[[MK310][代数结构]]同构。

** 代数结构的类型

*** 半群<<MK319>>

对于[[MK310][代数结构]] $<S,*>$ 来说，若：

（1） 满足[[MK307][结合律]]

则称为半群

*** 独异点

对于[[MK310][代数结构]] $<S,*>$ 来说，若：

（1） 满足[[MK307][结合律]]

（2） 存在[[MK311][幺元]]

则称为独异点

*** 群

对于[[MK310][代数结构]] $<S,*>$ 来说，若：

（1） 满足[[MK307][结合律]]

（2） 存在[[MK311][幺元]]

（3） 每个元素存在[[MK314][逆元]]

则称为群（因为结合律故 $|S|>1$ ，又根据[[MK315][性质1]]可知群没有[[MK313][零元]]）

*** 交换群<<MK320>>

对于[[MK310][代数结构]] $<S,*>$ 来说，若：

（1） 满足[[MK307][结合律]]

（2） 存在[[MK311][幺元]]

（3） 每个元素存在[[MK314][逆元]]

（4） 满足[[MK308][交换律]]

则称为交换群（同上没有零元）

*** 环<<MK321>>

对于[[MK310][代数结构]] $<S,+,*>$ 来说，若：

（1） $<S,+>$ 是[[MK320][交换群]]

（2） $<S,*>$ 是[[MK319][半群]]

（3） 运算 $*$ 对 $+$ [[MK309][可分配]]

则称为环

*** 域

对于[[MK310][代数结构]] $<S,+,*>$ 来说，若：

（1） $<S,+,*>$ 是[[MK321][环]]

（2） $<S-\{0\},*>$ 是[[MK320][交换群]]（ $S-\{0\}$ 表示 $S$ 中去掉[[MK313][零元]]）

则称为域

* 电路设计

** DFG（数据流图）

*** 定义<<MK362>>

定义为[[MK221][有向图]] $G=<V,E,f,g>$ 其中

（1） $V$ 为[[MK209][节点]]集合，表示计算/功能模块，是[[MK42][有限集]]

（2） 存在 $S\in V$ 为数据输入节点集合，存在若敢 $F\subset V$ 为数据输出节点集合

（3） $E$ 为有向[[MK211][边]]集合，表示数据流动先后顺序，是[[MK42][有限集]]

（4） $f$ 为节点[[MK216][赋权函数]]，表示关联计算时间

（5） $g$ 为边[[MK216][赋权函数]]，表示该边的延迟（通常由dff类寄存器产生）

     若无延迟设备，则定义为 $f(e)=0,e\in E$

通常表述粒度为：

（1） 细粒度：节点 $v\in V$ 只包含加/乘等基本运算单元

（2） 粗粒度：节点 $v\in V$ 包含复杂的功能模块

*** 函数表示<<MK381>>

[[MK362][DFG]]表示一组功能单元的电路组合，以及单元间连接的延迟

理想情况下，电路会无限工作，即在离散时间 $t\in\mathbb{N}$ 时刻接受 $x_t$ 输出 $y_t$

基于现实 $y_t$ 的值取决于 $x_{t},...,x_{t-n}$ 其中 $n\in\mathbb{N}\cup 0$ 由电路性质决定

且当 $x_t,...,x_{t-n}$ 确定时 $y_t$ 确定，即满足满足[[MK194][函数定义]]

故对于任意[[MK362][DFG]] $G$ 故可将其视为函数 $P_G:\prod_{i=1}^{n} X_G\times\to Y_G$ 其中

（1） $X_G$ 为输入信号所有可能的集合

（2） $Y_G$ 为输出信号所有可能的集合

（3） 此处乘法为[[MK153][笛卡尔积]]

故可有等价函数 $P_G(x_{t},...,x_{t-n})=y_t$

*** 等价<<MK380>>

对于不同的[[MK362][DFG]] $G_1,G_2$ ，定义其[[MK381][函数表示]] $P_{G_1},P_{G_2}$ 满足：

（1） $X_{G_1}=X_{G_2}$

（2） $\exists c\in\mathbb{W},\forall x\in X_{G_1}\rightarrow P_{G_1}(x_{t},...,x_{t-n})=P_{G_1}(x_{t-c},...,x_{t-n-c})$

则称 $G_1,G_2$ 等价

*** 延迟单元<<MK369>>

定义为[[MK362][DFG]] $G=<V,E,f,g>$ 中边赋权大于 $0$ 的边集合

即 $E^*_G=\left\{e\big|e\in E\land g(e)>0\right\}$

*** 路径<<MK363>>

[[MK362][DFG]] $G=<V,E,f,g>$ 中任意两个节点 $\{u,v\}\subset C$ 间的任一[[MK232][有向通道]] $r_{uv}$

若满足单次电平信号在有限时间内可由 $u$ 通过 $r_{uv}$ 传播至 $v$ 则 $r_{uv}$ 是 $G$ 中 $u$ 到 $v$ 的路径

进一步定义 $G$ 中路径集合为 $\mathcal{R}_G$ 实践证明 $\mathcal{R}_G$ 是有限集

*** 时延路径<<MK371>>

[[MK362][DFG]] $G=<V,E,f,g>$ 中的[[MK363][路径]] $r$ 若满足 $i=\sum_{e\in E(r_{uv})}g(e)$

则称 $r$ 是时延为 $i$ 的路径，反之对于 $r$ 其 *路径时延* 为 $i$

定义 $\tau_G(i)=\left\{r\big|r\in\mahtcal{R}_G\land i=\sum_{e\in E(r_{uv})}g(e)\right\}$ 为时延为 $i$ 的路径的集合

*** 路径时间<<MK366>>

[[MK362][DFG]] $G=<V,E,f,g>$ 中任意[[MK363][路径]] $r_{uv}$

其路径时间定义为 $t(r)=\sum_{v\in V(r_{uv})}f(v)+\sum_{e\in E(r_{uv})}g(e)$

其中 $E(r)$ 为[[MK364][取边]]运算， $V(r)$ 为[[MK365][取节点]]运算

*** 关键路径<<MK370>>

对于[[MK362][DFG]] $G=<V,E,f,g>$ 定义 $T_{E'}=\left\{t(r)\big|r\in\tau_G(0)\right\}$

是 $G$ 中零[[MK371][时延路径]]的[[MK366][路径时间]]集合，根据[[MK362][DFG定义]]易证 $T_{E'},\tau_G(0)$ 为有限集

则易证存在 $r\in\tau_G(0)$ 满足 $t_{\infty}(G)=\max(T_{E'})$ 则 $r$ 定义为 $G$ 的关键路径

*** 时钟周期<<MK376>>

即系统工作的时钟周期，系统必须在一个周期内完成[[MK369][延迟单元]]间的电平信号传输

故可得时钟周期 $T_{clk}\leq t_\infty(G)$ 即时钟周期小于等于[[MK370][关键路径]]的[[MK366][路径时间]]

** 迭代边界

*** 定义

定义为[[MK362][DFG]] $G=<V,E,f,g>$ 中的最大[[MK368][环路边界]] $T_\infty=\max\left(\left\{T_{LB}(r)\big|r\in L(G)\land T_{LB}(r)\ne\infty\right\}\right)$

其中 $L(G)$ 为 $G$ 中所有[[MK367][环路]]集合 

**** 迭代

定义为[[MK362][DFG]]中所有节点执行一次的过程

**** 迭代周期

电路系统处理一个输入样点，并输出结果所用的时间，表示为符号 $T_{it}$

**** 时钟周期

电路系统时钟信号提供的工作周期，表示为符号 $T_{\text{clk}}$

电路系统时钟频率为周期的倒数 $f=\frac{1}{T_{\text{clk}}}$

**** 环路<<MK367>>

定义为[[MK362][DFG]] $G=<V,E,f,g>$ 的[[MK238][圈]]，定义 $L(G)$ 为 $G$ 中所有环路集合

**** 环路边界<<MK368>>

定义为[[MK362][DFG]] $G=<V,E,f,g>$ 中的[[MK367][环路]] $r_{uu}$ 的节点的时延 $T_L(r)=\sum_{v\in V(r)}f(v)$

与边的时延 $W_L(r)=\sum_{e\in E(r)}G(e)$ 的比值 $T_{LB}(r)=\frac{T_L(r)}{W_L(r)}$

其中 $E(r)$ 为[[MK364][取边]]运算， $V(r)$ 为[[MK365][取节点]]运算

*** 求解（LPM）

对于[[MK362][DFG]] $G=<V,E,f,g>$ 其[[MK369][延迟单元]]个数为 $n=|E^*_G|$

**** 定义矩阵

对于任意[[MK369][延迟单元]] $e_i=<v_i,u_i>\land e_j=<v_j,u_j>\land\{e_i,e_j\}\subset E^*_G$

则定义 $Z=\left\{t(r_{u_iv_j})\big|r_{u_iv_j}\in\tau_G(m-1)\right\}$ 对于矩阵元素 $l_{ij}^m=\begin{cases}-1&Z=\varnothing\\\max(Z)&|Z|>0\end{cases}$

即从[[MK369][延迟单元]] $e_i$ 到 $e_j$ [[MK366][路径时间]]最长的 $m-1$ [[MK371][时延路径]]，若无通路则取 $-1$

最终定义矩阵 $L^m=\{l_{ij}^m\}$ 其中 $i=$

**** 初始矩阵 & 计算方法<<MK372>>

即矩阵 $L^1=\{l^1_{ij}\}$ 其中 $i\leq n\land j\leq n$

则定义计算 $L^m=L_1*L^{m-1}=\{l^m_{ij}\}$ 定义 $z_{ij}(k)=\begin{cases}-1&l^1_{ik}=-1\lor l^{m-1}_{kj}=-1\\l^1_{ik}+l^{m-1}_{kj}&\text{others}\end{cases}$

则 $l^2_{ij}=\max\left(\left\{z_k\big|1\leq k\leq n\land k\in\mathbb{N}\right\}\right)$
 
**** 矩阵意义<<MK373>>

定义 $e_i=<u_i,v_i>$ 满足 $g(e_i)>0$

则对于 $L^m$ 若对角线上 $l^m_{ii}\ne-1$ 则根据[[MK372][定义]]

可得 $l^m_{ii}$ 是[[MK371][路径时延]]为 $m-1$ 且[[MK366][路径时间]]最长的 $v_i$ 到 $u_i$ 的[[MK363][路径]] $r_{v_iu_i}$

进一步可得 $\frac{l^m_{ii}}{m}$ 即为 $r_{v_iu_i}$ 的[[MK368][环路边界]]

**** 可能环路<<MK374>>

对于[[MK369][延迟单元]] $e_i=<u_i,v_i>$ 来说，若存在单次信号由 $v_i$ 到 $u_i$ 的[[MK363][路径]]

则该路径 $r_{v_iu_i}$ 可能不经过、经过若干或经过所有其他[[MK369][延迟单元]]

即 $r_{v_iu_i}$ 可能经过 $0$ 至 $n-1$ 个除 $e_i$ 外的延迟单元

**** 信号往复（不比往复前大）<<MK375>>

当 $r_{v_iu_i}$ 至多经过 $k-1<n-1$ 个其他[[MK369][延迟单元]]时，则在 $L^{k}$ 之后信号出现往复

假设存在 $m>k$ 使得对于任意 $j\leq k$ 均有 $\frac{l^m_{ii}}{m}>\frac{l^j_{ii}}{j}$

进一步定义 $s\in\mathbb{N}$ 满足 $sk<m\leq(s+1)k\leq n$ 即信号从 $L^{sk+1}$ 开始最新一轮往复

故 $l^m_{ii}$ 时信号往复了 $s$ 轮后继续经过了 $z=m-sk$ 个[[MK369][延迟单元]]

每一轮往复耗时 $l^k_{ii}$ 经过 $k$ 个[[MK369][延迟单元]]，即有 $\frac{l^m_{ii}}{m}=\frac{sl^k_{ii}+l^z_{ii}}{sk+z}$ 定义 $x=\frac{l^z_{ii}}{z}$

定义 $f(x)=\frac{sl^k_{ii}+xz}{sk+z}$ 由于均为正数，显然求导可得递增

当 $x=\frac{l^k_{ii}}{k}$ 时可得 $f(x)=\frac{l^k_{ii}}{k}$ 故当且仅当 $x>\frac{l^k_{ii}}{k}$ 时有 $f(x)>\frac{l^k_{ii}}{k}$

由于 $x=\frac{l^z_{ii}}{z}$ 且 $\frac{l^m_{ii}}{m}>\frac{l^k_{ii}}{k}$ 故有 $x=\frac{l^z_{ii}}{z}>\frac{l^k_{ii}}{k}$

同理定义 $y=\frac{l^k_{ii}}{k}$ 则有 $g(y)=\frac{sky+l^z_{ii}}{sk+z}$ 由于均为正数故 $g(y)$ 递增

与之前类似可证当当且仅当 $y>\frac{l^z_{ii}}{z}$ 时有 $g(y)>\frac{l^z_{ii}}{z}$

结合 $y=\frac{l^k_{ii}}{k}$ 以及 $\frac{l^m_{ii}}{m}>\frac{l^z_{ii}}{z}$ 可得 $y=\frac{l^k_{ii}}{k}>\frac{l^z_{ii}}{z}$ 

总上所述，由于 $\forall j\leq k\rightarrow \frac{l^m_{ii}}{m}>\frac{l^j_{ii}}{j}$ 故有 $\frac{l^k_{ii}}{k}>\frac{l^z_{ii}}{z}\land \frac{l^z_{ii}}{z}>\frac{l^k_{ii}}{k}$ 与[[~/OneDrive/离散数学/Disc_Math.org::MK5][三岐性]]矛盾

故假设不成立，则不存在 $m>k$ 满足 $\forall j\leq k\rightarrow \frac{l^m_{ii}}{m}>\frac{l^j_{ii}}{j}$ 

**** 最终取值

根据[[MK375][信号往复]]可得往复后的 $\frac{l^m_{ii}}{m}$ 不可能大于所有往复前的 $\frac{l^m_{ii}}{m}$ 

根据[[MK374][可能环路]]可得最多只能经过 $n-1$ 个[[MK369][延迟单元]]

综上所述，只需计算 $L^1,...,L^n$ 并取 $T_\infty=\max\left(\left\{\frac{l^m_{ii}}{m}\big|1\leq i\leq n\land 1\leq m\leq n\right\}\right)$

** 并行

每个周期输入 $n$ 个数据，复制 $n$ 倍硬件资源同时处理这 $n$ 个数据。

由于硬件资源复制，故[[MK370][关键路径]]一般保持不变

** 流水线

在[[MK366][路径]]中插入寄存器来减少[[MK370][关键路径]]长度，从而降低[[MK376][时钟周期]]

*** 割集<<MK378>>

存在[[MK362][DFG]] $G=<V,E,f,g>$ 一组边 $E'\subset E$

使得 $G'=<V,E-E'>$ 此时 $G'$ 存在不是[[MK257][弱联通]]的子图

则定义 $E'$ 是 $G$ 的割集

*** 前馈割集

若[[MK362][DFG]] $G=<V,E,f,g>$ 的[[MK378][割集]] $E'$ 将 $G$ 划分为 $2$ 个非[[MK257][弱联通]]的[[MK229][子图]]

定义为 $G_1=<V_1,E_1>,G_2=<V_2,E_2>$ 则定义：

（1） $E_a(i)=\left\{e\big|e=<u,v>\in E'\land (v\in V_i\lor u\in V_i)\land u\not\in S\land v\not\in F\right\}$

（2） $E_b(i)=\left\{e\big|e=<u,v>\in E'\land u\in V_i\land u\not\in S\land v\not\in F\right\}$

（3） $E_c(i)=\left\{e\big|e=<u,v>\in E'\land v\in V_i\land u\not\in S\land v\not\in F\right\}$

其中 $S,F$ 为[[MK362][数据输入/输出]]节点集合，则若满足：

（1） $S\subset V_1\land F\subset V_2$

（2） $E_a(1)=E_b(1)\land E_a(2)=E_c(2)$

则定义 $E'$ 是 $G$ 的前馈割集。

即对于数据输入子图 $V_1$ 来说，所有 $E'$ 中的边均为数据流出方向

对于数据输出子图 $V_2$ 来说，所有 $E'$ 中的边均为数据流入方向

*** 定理

若 $E'$ 是[[MK362][DFG]] $G=<V,E,f,g>$ 的[[MK379][前馈割集]]，则在 $E'$ 上添加统一时钟寄存器

即定义 $g'(e)=\begin{cases}g(e)+1&e\in E'\\g(e)&e\not\in E'\end{cases}$ 以及 $G'=<V,E,f,g'>$

则 $G'$ 与 $G$ [[MK380][等价]]

**** 证明

定义 $G_1=<V_1,E_1>,G_2=<V_2,E_2>$ 其中 $S\subset V_1\land F\subset V_2$

定义 $E'=\{<u_i,v_i>\}$ 则对于任意 $i$ 均有 $u_i\in V_1\land v_i\in V_2$

由于 $G_1,G_2$ 在去除 $E'$ 后非[[MK257][弱联通]]，故可得 $\{v_i\}$ 接受的信号为 $G_2$ 的输入信号集

以及 $G_1$ 的所有信号输出集。则根据[[MK381][函数表示]]定义 $y_t=P_{G_1}(x_{t},...,x_{t-n}),P_{G_2}(y_{t},...,y_{t-m})$

则有 $P_G(x_{t},...,x_{t-n})=P_{G_2}\big(y_t,...,y_{t-m}\big)$

即 $P_G(x_{t},...,x_{t-n})=P_{G_2}\big(P_{G_1}(x_{t},...,x_{t-n}),...,P_{G_1}(x_{t-m},...,x_{t-n-m})\big)$

又由于 $G'$ 在 $E'$ 的所有边上增加 $1$ 延迟

故有 $P_{G'}(x_{t},...,x_{t-n})=P_{G_2}\big(P_{G_1}(x_{t-1},...,x_{t-n-1}),...,P_{G_1}(x_{t-m-1},...,x_{t-n-m-1})\big)$

即：

\begin{aligned}
P_{G'}(x_{t+1},...,x_{t-n+1})=&P_{G_2}\big(P_{G_1}(x_{t},...,x_{t-n}),...,P_{G_1}(x_{t-m},...,x_{t-n-m})\big)\\
=&P_G(x_{t},...,x_{t-n})$
\end{aligned}

故满足[[MK380][等价]]定义


